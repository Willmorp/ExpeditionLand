function GetProductSearchFormValues(){var a=$("#MenuSelectedHidden").attr("producttypevalue");if(a==""){return false}var g="frm_"+a+"_Search";var c=Get(g+"_NoOfRoomsDropDownList");var d=Get(g+"_OthersDropDownList1");if(d==""||d=="0"){d=1}if(c==""||c=="0"){c=1}if(c!=""){AddRooms(c);for(var e=1;e<=c;e++){var b=Get(g+"_NoOfChildsDropDownList"+e);if(b!=""){AddChildAge(e,b)}}}if(d!=""){for(var e=1;e<=d;e++){var f=Get(g+"_OthersDropDownList"+e);AddOthers(e,f)}}GetFormValuesFromCookie(g,g);if(a!=undefined&&a.toLowerCase()=="flights"){if($("#rdOneway").attr("checked")){TripOption($("#rdOneway"))}else{if($("#rdRountrip").attr("checked")){TripOption($("#rdRountrip"))}else{if($("#rdMultipleCity").attr("checked")){TripOption($("#rdMultipleCity"))}else{$("#rdRountrip").attr("checked","checked");TripOption($("#rdRountrip"))}}}}}function ValidatePaxCount(){var c=parseInt($("#NoOfAdultsDropDownList").val());var m=parseInt($("#NoOfChildsDropDownList").val());var o=parseInt($("#NoOfOthersDropDownList").val());var h=!isNaN(parseInt($("#NoOfMalePassenger").val()))?parseInt($("#NoOfMalePassenger").val()):0;var l=!isNaN(parseInt($("#NoOfFemalePassenger").val()))?parseInt($("#NoOfFemalePassenger").val()):0;var a=!isNaN(parseInt($("#NoOfWheelChair").val()))?parseInt($("#NoOfWheelChair").val()):0;var f=c+m+o;var n=h+l;var g=0;var d=false;g=$("#BookingClassDropDownList_1").val();var j=g.split("!##!");var e=j[2];if(e=="2"||e=="0"){if(n<=0){n=0}}else{n=f;d=true}if(f<a&&f!=0){alert("wheelchair count should not be greater than Passengers count");temp=3;return false}if(f!=n){alert("No of Passengers should match");temp=3;return false}else{if(m>0&&c==0&&o==0){var b=null;for(var k=1;k<=m;k++){b=parseInt($("#ChildAgeDropDownList"+k).val());if(b<=15){break}}if(b<=15){alert("Children under 12 years must travel with a parent or guardian aged 16 years and over. For all children aged 12 - 15 years wishing to travel without a parent or guardian aged 16 years or over, please contact Queensland Rail on 1300 131 722 to submit their travel request. Proof of age will be required to be presented for all children aged 12 - 15 years wishing to travel without a parent or guardian aged 16 years or over");return false}else{return true}}else{return true}}}function StoreProductSearchFormValues(){var a=$("#MenuSelectedHidden").attr("producttypevalue");var b="frm_"+a+"_Search";SetFormValuesToCookie(b,b)}function SetFormValuesToCookie(b,a){$(":input",$("#"+b)).each(function(){var d=this.type,c=this.tagName.toLowerCase();var e=a+"_"+$(this).attr("name");if($(this).attr("savetocookiee")!=null){var f=$(this).attr("savetocookiee");if(f.toLowerCase()=="true"){if($(this).is(":radio")){Set(e,$(this).attr("checked"))}else{Set(e,$(this).val())}}}else{if($(this).is(":radio")){Set(e,$(this).attr("checked"))}else{Set(e,$(this).val())}}});return true}function GetFormValuesFromCookie(b,a){var c=$("#"+b);$(":input",$("#"+b)).each(function(){var f=this.type,e=this.tagName.toLowerCase();var g=a+"_"+$(this).attr("name");var h=Get(g);if(h!=""){if($(this).is(":radio")){if(h=="true"){$(this).attr("checked","checked")}else{$(this).removeAttr("checked")}}else{if($(this).attr("savetocookiee")!=null){var d=$(this).attr("savetocookiee");if(d.toLowerCase()=="true"){$(this).val(h)}else{$(this).val("")}}else{$(this).val(h)}}}})}function Set(d,e){if(e!="Unknown"&&e!=""){var b=(navigator.appVersion.indexOf("MSIE 7.0")>0);if(navigator.appName=="Microsoft Internet Explorer"&&b){}else{var a={expires:-1,path:"/"};var c={expires:1,path:"/"};$.cookie(d,null,a);$.cookie(d,e,c)}}}function Get(a){var b=$.cookie(a);if(b==null){return""}else{return $.cookie(a)}}(function(c){c.fn.jqm=function(f){var e={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:h,ajaxText:"",target:h,modal:h,toTop:h,onShow:h,onHide:h,onLoad:h};return this.each(function(){if(this._jqm){return n[this._jqm].c=c.extend({},n[this._jqm].c,f)}j++;this._jqm=j;n[j]={c:c.extend(e,c.jqm.params,f),a:h,w:c(this).addClass("jqmID"+j),s:j};if(e.trigger){c(this).jqmAddTrigger(e.trigger)}})};c.fn.jqmAddClose=function(f){return o(this,f,"jqmHide")};c.fn.jqmAddTrigger=function(f){return o(this,f,"jqmShow")};c.fn.jqmShow=function(e){return this.each(function(){e=e||window.event;c.jqm.open(this._jqm,e)})};c.fn.jqmHide=function(e){return this.each(function(){e=e||window.event;c.jqm.close(this._jqm,e)})};c.jqm={hash:{},open:function(A,q){var x=n[A],f=x.c,m="."+f.closeClass,w=(parseInt(x.w.css("z-index"))),w=(w>0)?w:3000,C=c("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":w-1,opacity:f.overlay/100});if(x.a){return h}x.t=q;x.a=true;x.w.css("z-index",w);if(f.modal){if(!g[0]){a("bind")}g.push(A)}else{if(f.overlay>0){x.w.jqmAddClose(C)}else{C=h}}x.o=(C)?C.addClass(f.overlayClass).prependTo("body"):h;if(b){c("html,body").css({height:"100%",width:"100%"});if(C){C=C.css({position:"absolute"})[0];for(var B in {Top:1,Left:1}){C.style.setExpression(B.toLowerCase(),"(_=(document.documentElement.scroll"+B+" || document.body.scroll"+B+"))+'px'")}}}if(f.ajax){var e=f.target||x.w,v=f.ajax,e=(typeof e=="string")?c(e,x.w):c(e),v=(v.substr(0,1)=="@")?c(q).attr(v.substring(1)):v;e.html(f.ajaxText).load(v,function(){if(f.onLoad){f.onLoad.call(this,x)}if(m){x.w.jqmAddClose(c(m,x.w))}k(x)})}else{if(m){x.w.jqmAddClose(c(m,x.w))}}if(f.toTop&&x.o){x.w.before('<span id="jqmP'+x.w[0]._jqm+'"></span>').insertAfter(x.o)}(f.onShow)?f.onShow(x):x.w.show();k(x);return h},close:function(f){var e=n[f];if(!e.a){return h}e.a=h;if(g[0]){g.pop();if(!g[0]){a("unbind")}}if(e.c.toTop&&e.o){c("#jqmP"+e.w[0]._jqm).after(e.w).remove()}if(e.c.onHide){e.c.onHide(e)}else{e.w.hide();if(e.o){e.o.remove()}}return h},params:{}};var j=0,n=c.jqm.hash,g=[],b=navigator.userAgent.match(/msie [6]/i),h=false,l=c('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),k=function(e){if(b){if(e.o){e.o.html('<p style="width:100%;height:100%"/>').prepend(l)}else{if(!c("iframe.jqm",e.w)[0]){e.w.prepend(l)}}}d(e)},d=function(f){try{c(":input:visible",f.w)[0].focus()}catch(e){}},a=function(e){c()[e]("keypress",p)[e]("keydown",p)[e]("mousedown",p)},p=function(f){var m=n[g[g.length-1]],q=(!c(f.target).parents(".jqmID"+m.s)[0]);if(q){d(m)}return !q},o=function(f,m,e){return f.each(function(){var q=this._jqm;c(m).each(function(){if(!this[e]){this[e]=[];c(this).click(function(){for(var r in {jqmShow:1,jqmHide:1}){for(var t in this[r]){if(n[this[r][t]]){n[this[r][t]].w[r](this)}}}return h})}this[e].push(q)})})}})(jQuery);var myPic=new Image();myPic.src="//dvapvh58pp4t7.cloudfront.net/1/dreamtrips/Media/Frontend/b2b/images/loading1.gif";var ElementBlockingSettings={isElementBlocking:true,message:"<img src="+myPic.src+" />",css:{border:"none",backgroundColor:"transparent"}};var locationServiceUrl=$("#hdnLocationServiceUrl").val();var OTAServiceUrl=$("#hdnOTAServiceUrl").val()+"services/api/content/getautocompletedata";var hdnOTACruiseUrl=$("#hdnOTACruiseUrl").val();var OTABOTService=$("#hdnOTAServiceUrl").val()+"ota/tpredirect?";var OTAroviaServiceAPI=$("#OTAroviaServiceAPI").val();var OTAhideoutsservice=$("#OTAhideoutsservice").val();var cultureinfo=$("#cultureinfo").val();$("select#StartTime option[value='11']").attr("selected","selected");$("select#EndTime option[value='11']").attr("selected","selected");$("#OTAhideout").click(function(){locationAutocompleteFlight;hideoutsCountrydropdown()});$(document).on("click","button.btnreset",function(a){if(a.target.id=="resethideout"){$(".Cityhide").css("display","none");$(".Monthhide").css("display","none");validator.resetForm();document.getElementById("frmhideoutssearch").reset();customRadiobox();customCheckbox();$("#resethideout").addClass("disabled")}else{if(a.target.id=="resetFlight"){$(".multicityhide1").add(".multicityhide2").add(".multicityhide3").add(".multicityhide4").css("display","none");$(".addflighthide").css("display","block");$(".removeflightcount").css("display","none");$("#addflightcount").val("0");$("#tdChildAgeFlight"+1+" #divChildAgeContainerFlight").remove();validator.resetForm();document.getElementById("frmflightsearch").reset();customRadiobox();customCheckbox();$("#resetFlight").addClass("disabled");$(".flightmoreoptions").add("#lessoptions").addClass("hide");$("#addoptions").removeClass("hide")}else{if(a.target.id=="resethotel"){$("#tdChildAge"+1+" #divChildAgeContainer").remove();validator.resetForm();$("#resethotel").addClass("disabled")}else{if(a.target.id=="resetRental"){$(".multirentalhide2").css("display","none");$(".multirentalhide3").css("display","none");$(".multirentalhide4").css("display","none");$(".multirentalhide5").css("display","none");$(".adddiscounthide").css("display","block");$("#adddiscountvalue").val("0");validator.resetForm();$("#resetRental").addClass("disabled")}else{if(a.target.id=="resetcruise"){$("#cruiseLineId").multiselect("deselectAll",false);$("#cruiseLineId").multiselect("refresh");$("#cruiseShipId").multiselect("deselectAll",false);$("#cruiseShipId").multiselect("refresh");$("#departurePortId").multiselect("deselectAll",false);$("#departurePortId").multiselect("refresh");$("#destinationId").multiselect("deselectAll",false);$("#destinationId").multiselect("refresh");$("#portsOfCallId").multiselect("deselectAll",false);$("#portsOfCallId").multiselect("refresh");validator.resetForm();$("#resetcruise").addClass("disabled")}else{if(a.target.id=="resetActivities"){validator.resetForm();$("#resetActivities").addClass("disabled")}else{validator.resetForm()}}}}}}});$(document).on("click","ul.nav-tabs li",function(){validator.resetForm();$(".OTAActivityrez-ac-wrapper").empty();$(".OTAHotelrez-ac-wrapper").empty();$(".OTARentalOriginrez-ac-wrapper").empty();$(".OTARentalDropOffrez-ac-wrapper").empty();$(".OTArez-ac-wrapper").empty()});var container=$("div.errorcontainer");$("#frmcruisesearch").validate({errorContainer:container,errorLabelContainer:$("ul",container),wrapper:"label",rules:{StartDateTextBoxCruise:{required:function(){if($("input[type='radio'][name=cruiseTravelPeriod]:checked").val()=="cruiseDateRange"){return true}else{return false}},},EndDateTextBoxCruise:{required:function(){if($("input[type='radio'][name=cruiseTravelPeriod]:checked").val()=="cruiseDateRange"){return true}else{return false}},},},messages:{StartDateTextBoxCruise:{required:Resources.Search_Revelex_CruiseStartDateRequired},EndDateTextBoxCruise:{required:Resources.Search_Revelex_CruiseEndDateRequired},},submitHandler:function(){DeepLink("cruise")}});$("#frmactivitysearch").validate({errorContainer:container,errorLabelContainer:$("ul",container),wrapper:"label",rules:{StartactivityTextBox:{required:true,},StartDateTextBox_Activity:{required:true,Searchdatesactivityvalidation:true},EndDateTextBox_Activity:{required:true,Activitydate:true,Searchdatesactivityvalidation:true},},messages:{StartactivityTextBox:{required:Resources.Search_Destination_Required},StartDateTextBox_Activity:{required:Resources.Search_StartDate,Searchdatesactivityvalidation:Resources.Search_ActivitySearchValidation},EndDateTextBox_Activity:{required:Resources.Search_EndDate,Activitydate:Resources.Search_Enterdateafterstartdate,Searchdatesactivityvalidation:Resources.Search_ActivitySearchValidation},},submitHandler:function(){if($("#hdnactivitynullsearch").val()=="0"){var a=$("#StartactivityTextBox").val();$("#StartactivityTextBoxError").html(Resources.Search_Activitylocationsearch+a).show().parent().show().parent().show();return false}else{$("#StartactivityTextBoxError").html("").hide().parent().hide().parent().hide();DeepLink("activity")}}});$("#frmhideoutssearch").validate({errorContainer:container,errorLabelContainer:$("ul",container),wrapper:"label",rules:{Countrylist:{required:true,},Citylisthideouts:{required:true,},Monthlist:{required:true,}},messages:{Countrylist:{required:Resources.Search_Country},Citylisthideouts:{required:Resources.Search_City},Monthlist:{required:Resources.Search_Month},},submitHandler:function(){DeepLink("hideaways")}});$("#RentalSearch").validate({onfocusout:false,errorContainer:container,errorLabelContainer:$("ul",container),wrapper:"label",rules:{DropOffTextBoxHotel:{required:true},OriginTextBoxHotel:{required:true},StartDateTextBoxRental:{required:true,Searchdatesrentalvalidation:true},EndDateTextBoxRental:{required:true,validateDateRenatl:true,Searchdatesrentalvalidation:true},EndTime:{validatetime:true,},},messages:{OriginTextBoxHotel:{required:Resources.Search_RentalPickUpLocation},DropOffTextBoxHotel:{required:Resources.Search_RentalDropOffLocation},StartDateTextBoxRental:{required:Resources.Search_RentalPickUpdate,Searchdatesrentalvalidation:Resources.Search_RentalSearchValidationforPickup},EndDateTextBoxRental:{required:Resources.Search_RentalDropOff,validateDateRenatl:Resources.Search_RentalDateValidate,Searchdatesrentalvalidation:Resources.Search_RentalSearchValidationfordropoff},EndTime:{validatetime:Resources.Search_TimeValidation},},submitHandler:function(){DeepLink("car")}});$("#HotelSearch").validate({onfocusout:false,errorContainer:container,errorLabelContainer:$(".appenderror",container),wrapper:"label",rules:{HotelDestinationTextBox:{required:true,},StartDateTextBoxHotel:{required:true,Searchdateshotelvalidation:true,SearchdateshotelvalidationMinInterval:true},EndDateTextBoxHotel:{required:true,validateDate:true,CompareDate:true,Searchdateshotelvalidation:true,SearchdateshotelvalidationMinInterval:true},HotelNoOfAdultsDropDownList:{validateAdult:true},HotelNoOfChildsDropDownList1:{validatePassenger:true},},messages:{HotelDestinationTextBox:{required:Resources.Search_Destination_Required},StartDateTextBoxHotel:{required:Resources.Search_HotelCheckInDate,Searchdateshotelvalidation:Resources.Search_HotelSearchValidationforCheckin,SearchdateshotelvalidationMinInterval:Resources.Search_HotelSearchValidationforCheckOutMinInterval},EndDateTextBoxHotel:{required:Resources.Search_HotelCheckOutDate,validateDate:Resources.Search_CheckOutDateAfterCheckIn,CompareDate:Resources.Search_HotelCompareChkInChkOut,Searchdateshotelvalidation:Resources.Search_HotelSearchValidationforCheckOut,SearchdateshotelvalidationMinInterval:Resources.Search_HotelSearchValidationforCheckOutMinInterval},HotelNoOfAdultsDropDownList:{validateAdult:Resources.Search_AdultRequired},HotelNoOfChildsDropDownList1:{validatePassenger:Resources.Search_Morethan9traveller},},submitHandler:function(){DeepLink("hotel")}});var validator=$("#frmflightsearch").validate({onfocusout:false,errorContainer:container,errorLabelContainer:$(".appenderror",container),wrapper:"label",rules:{LeavingFromTextBox:{validateLeavingFrom:true,},GoingToTextBox:{validateGoingTo:true,validateLocation:true},StartDateTextBoxFlight:{validateStartDate:true,Searchdatesflightvalidation:true},EndDateTextBoxFlight:{validateEndDate:true,validateDate1:true,Searchdatesflightvalidation:true},FlightNoOfChildsDropDownList1:{validatePass:true,},NoOfAdultsDropDownList:{validateInfant:true,},CheckinDateTextBox_2:{required:true,validateDate2:true,Searchdatesflightvalidation:true},CheckinDateTextBox_3:{required:true,validateDate3:true,Searchdatesflightvalidation:true},CheckinDateTextBox_4:{required:true,validateDate4:true,Searchdatesflightvalidation:true},CheckinDateTextBox_5:{required:true,validateDate5:true,Searchdatesflightvalidation:true},OriginTextBox_2:{required:true},OriginTextBox_3:{required:true},OriginTextBox_4:{required:true},OriginTextBox_5:{required:true},DestinationTextBox_2:{required:true,validateLocation2:true},DestinationTextBox_3:{required:true,validateLocation3:true},DestinationTextBox_4:{required:true,validateLocation4:true},DestinationTextBox_5:{required:true,validateLocation5:true},StartTimeTextBox:{validateflighttime:true},departuretime2:{validateflight1time:true},departuretime3:{validateflight2time:true},departuretime4:{validateflight3time:true},departuretime5:{validateflight4time:true},},messages:{LeavingFromTextBox:{validateLeavingFrom:Resources.Search_Flight1LeavingFrom},GoingToTextBox:{validateGoingTo:Resources.Search_Flight1GoingTo,validateLocation:Resources.Search_Flight1LeavingFromtoGoingTo},StartDateTextBoxFlight:{validateStartDate:Resources.Search_Flight1DepartingDate,Searchdatesflightvalidation:Resources.Search_Flight1SearchdateValidation},EndDateTextBoxFlight:{validateEndDate:Resources.Search_Flight1ReturningDate,validateDate1:Resources.Search_Fligh2greaterthanFlight,Searchdatesflightvalidation:Resources.Search_Flight1SearchdateValidation},OriginTextBox_2:{required:Resources.Search_Flight2LeavingDate},OriginTextBox_3:{required:Resources.Search_Flight3LeavingFrom},OriginTextBox_4:{required:Resources.Search_Flight4LeavingFrom},OriginTextBox_5:{required:Resources.Search_Flight5LeavingFrom},DestinationTextBox_2:{required:Resources.Search_Flight2GoingTo,validateLocation2:Resources.Search_Flight2LeavingFromtoGoingTo},DestinationTextBox_3:{required:Resources.Search_Flight3GoingTo,validateLocation3:Resources.Search_Flight3LeavingFromtoGoingTo},DestinationTextBox_4:{required:Resources.Search_Flight4GoingTo,validateLocation4:Resources.Search_Flight4LeavingFromtoGoingTo},DestinationTextBox_5:{required:Resources.Search_Flight5GoingTo,validateLocation5:Resources.Search_Flight5LeavingFromtoGoingTo},CheckinDateTextBox_2:{required:Resources.Search_Flight2DepartingDate,validateDate2:Resources.Search_Fligh2greaterthanFlight1,Searchdatesflightvalidation:Resources.Search_Flight2SearchdateValidation},CheckinDateTextBox_3:{required:Resources.Search_Flight3DepartingDate,validateDate3:Resources.Search_Fligh3greaterthanFlight2,Searchdatesflightvalidation:Resources.Search_Flight3SearchdateValidation},CheckinDateTextBox_4:{required:Resources.Search_Flight4DepartingDate,validateDate4:Resources.Search_Fligh4greaterthanFlight3,Searchdatesflightvalidation:Resources.Search_Flight4SearchdateValidation},CheckinDateTextBox_5:{required:Resources.Search_Flight5DepartingDate,validateDate5:Resources.Search_Fligh5greaterthanFlight4,Searchdatesflightvalidation:Resources.Search_Flight5SearchdateValidation},NoOfAdultsDropDownList:{validateAdult:Resources.Search_AdultRequired},FlightNoOfChildsDropDownList1:{validatePass:Resources.Search_Morethan9traveller},NoOfAdultsDropDownList:{validateInfant:Resources.Search_Adultperinfant},StartTimeTextBox:{validateflighttime:Resources.Search_Flight1Time},departuretime2:{validateflight1time:Resources.Search_Flight2Time},departuretime3:{validateflight2time:Resources.Search_Flight3Time},departuretime4:{validateflight3time:Resources.Search_Flight4Time},departuretime5:{validateflight4time:Resources.Search_Flight5Time},},submitHandler:function(){DeepLink("flight")}});function InitializeOTADataValidations(){$.validator.addMethod("destinationfield",function(a,b){return $("#destinationcruise").val()!="0"});$.validator.addMethod("selectcruisefield",function(a,b){return $("#selectcruiseidname").val()!="0"});$.validator.addMethod("Activitydate",function(){return Date.parse($("#EndDateTextBox_Activity").val())>=Date.parse($("#StartDateTextBox_Activity").val())});$.validator.addMethod("validateDateRenatl",function(){return Date.parse($("#EndDateTextBoxRental").val())>=Date.parse($("#StartDateTextBoxRental").val())});$.validator.addMethod("validatetime",function(){var b=parseInt($("#StartTime").val());var a=parseInt($("#EndTime").val());if(Date.parse($("#EndDateTextBoxRental").val())==Date.parse($("#StartDateTextBoxRental").val())&&b>=a){return false}return true});$.validator.addMethod("validateDate",function(){return Date.parse($("#EndDateTextBoxHotel").val())>=Date.parse($("#StartDateTextBoxHotel").val())});$.validator.addMethod("CompareDate",function(){return $("#EndDateTextBoxHotel").val()!=$("#StartDateTextBoxHotel").val()});$.validator.addMethod("validateAdult",function(){return $("#HotelNoOfAdultsDropDownList").val()!="0"});$.validator.addMethod("validatePassenger",function(){var a=$("#HotelNoOfAdultsDropDownList").val();var c=$("#HotelNoOfChildsDropDownList1").val();var b=parseInt(a)+parseInt(c);return b<=9});$("#frmflightsearch").validate().resetForm();$.validator.addMethod("validateDate1",function(){return Date.parse($("#EndDateTextBoxFlight").val())>=Date.parse($("#StartDateTextBoxFlight").val())});$.validator.addMethod("validateDate2",function(){return Date.parse($("#CheckinDateTextBox_2").val())>=Date.parse($("#StartDateTextBoxFlight").val())});$.validator.addMethod("validateDate3",function(){return Date.parse($("#CheckinDateTextBox_3").val())>=Date.parse($("#CheckinDateTextBox_2").val())});$.validator.addMethod("validateDate4",function(){return Date.parse($("#CheckinDateTextBox_4").val())>=Date.parse($("#CheckinDateTextBox_3").val())});$.validator.addMethod("validateDate5",function(){return Date.parse($("#CheckinDateTextBox_5").val())>=Date.parse($("#CheckinDateTextBox_4").val())});$.validator.addMethod("validateLeavingFrom",function(a,b){return $("#LeavingFromTextBox").val()!=""});$.validator.addMethod("validateGoingTo",function(a,b){return $("#GoingToTextBox").val()!=""});$.validator.addMethod("validateStartDate",function(a,b){return $("#StartDateTextBoxFlight").val()!=""});$.validator.addMethod("validateEndDate",function(a,b){return $("#EndDateTextBoxFlight").val()!=""});$.validator.addMethod("validateAdult",function(a,b){return $("#NoOfAdultsDropDownList").val()!="0"});$.validator.addMethod("validateLocation",function(a,b){return $("#LeavingFromTextBox").val()!=$("#GoingToTextBox").val()});$.validator.addMethod("validateLocation2",function(a,b){return $("#OriginTextBox_2").val()!=$("#DestinationTextBox_2").val()});$.validator.addMethod("validateLocation3",function(a,b){return $("#OriginTextBox_3").val()!=$("#DestinationTextBox_3").val()});$.validator.addMethod("validateLocation4",function(a,b){return $("#OriginTextBox_4").val()!=$("#DestinationTextBox_4").val()});$.validator.addMethod("validateLocation5",function(a,b){return $("#OriginTextBox_5").val()!=$("#DestinationTextBox_5").val()});$.validator.addMethod("validateflighttime",function(a,b){if($("#StartDateTextBoxFlight").val()!=""&&$("#EndDateTextBoxFlight").val()!=""&&$("#StartDateTextBoxFlight").val()==$("#EndDateTextBoxFlight").val()&&parseInt($("#StartTimeTextBox").val())>=parseInt($("#EndTimeTextBox").val())){return false}return true});$.validator.addMethod("validateflight1time",function(a,b){if($("#StartDateTextBoxFlight").val()!=""&&$("#CheckinDateTextBox_2").val()!=""&&$("#StartDateTextBoxFlight").val()==$("#CheckinDateTextBox_2").val()&&parseInt($("#StartTimeTextBox").val())>=parseInt($("#departuretime2").val())){return false}return true});$.validator.addMethod("validateflight2time",function(a,b){if($("#CheckinDateTextBox_2").val()!=""&&$("#CheckinDateTextBox_3").val()!=""&&$("#CheckinDateTextBox_2").val()==$("#CheckinDateTextBox_3").val()&&parseInt($("#departuretime2").val())>=parseInt($("#departuretime3").val())){return false}return true});$.validator.addMethod("validateflight3time",function(a,b){if($("#CheckinDateTextBox_3").val()!=""&&$("#CheckinDateTextBox_4").val()!=""&&$("#CheckinDateTextBox_3").val()==$("#CheckinDateTextBox_4").val()&&parseInt($("#departuretime3").val())>=parseInt($("#departuretime4").val())){return false}return true});$.validator.addMethod("validateflight4time",function(a,b){if($("#CheckinDateTextBox_4").val()!=""&&$("#CheckinDateTextBox_5").val()!=""&&$("#CheckinDateTextBox_4").val()==$("#CheckinDateTextBox_5").val()&&parseInt($("#departuretime4").val())>=parseInt($("#departuretime5").val())){return false}return true});$.validator.addMethod("validatePass",function(g,d){var b=/\d+/;var e=$("#NoOfAdultsDropDownList").val().match(b);var a=$("#FlightNoOfChildsDropDownList1").val().match(b);var c=0;var f=parseInt(e)+parseInt(a)+parseInt(c);return f<=9});$.validator.addMethod("validateInfant",function(e,a){var d=/\d+/;var b=parseInt($("#NoOfAdultsDropDownList").val().match(d));var c=0;return c<=b});$.validator.addMethod("Searchdatesflightvalidation",function(a){var b=new Date();var c=b.setDate(b.getDate()+331);return Date.parse(a)<c});$.validator.addMethod("Searchdateshotelvalidation",function(a,e){var d=e.id;var b="";var c=new Date();if(d=="StartDateTextBoxHotel"){b=c.setDate(c.getDate()+329)}else{b=c.setDate(c.getDate()+330)}return Date.parse(a)<b});$.validator.addMethod("SearchdateshotelvalidationMinInterval",function(j,m){var c=m.id;var h="";var d=new Date();if(c=="StartDateTextBoxHotel"){h=d.setDate(d.getDate()+329)}else{var g=new Date($("#StartDateTextBoxHotel").val());var b=g.getDate();var a=g.getMonth();var f=g.getFullYear();g=new Date(f,a,b+29);var e=new Date(j);var l=e.getDate();var k=e.getMonth();var n=e.getFullYear();e=new Date(n,k,l);if(e.getTime()<=g.getTime()){return true}else{return false}}return Date.parse(j)<h});$.validator.addMethod("Searchdatesrentalvalidation",function(a){var c=new Date();var b=c.setDate(c.getDate()+331);return Date.parse(a)<b});$.validator.addMethod("Searchdatesactivityvalidation",function(a){var c=new Date();var b=c.setDate(c.getDate()+365);return Date.parse(a)<b});$.validator.addMethod("searchstartandenddate",function(a,b){if($("#StartDateTextBox").val()!=""){return Date.parse($("#EndDateTextBox").val())>=Date.parse($("#StartDateTextBox").val())}else{return true}});$.validator.addMethod("searchstartdate",function(d,a){var c="";if(a.name=="StartDateTextBox"){c=$("#StartDateTextBox").val()}else{if(a.name=="EndDateTextBox"){c=$("#EndDateTextBox").val()}}if($("#StartDateTextBox").val()==""&&$("#EndDateTextBox").val()==""){return true}var b=/^\d{2}\/\d{2}\/\d{4}$/;return b.test(c)});if($("#divTopDestinations").length>0){$("#divTopDestinations").jqm()}$("#AirportRadioButton").change(function(){$("#LocationDiv").attr("style","display:none");$("#AirportDiv").attr("style","display:block")});$("#LocationRadioButton").change(function(){$("#AirportDiv").attr("style","display:none");$("#LocationDiv").attr("style","display:block")})}function ShowHideItinerary(a){if($("#orditn_"+a).attr("style").indexOf("none")>-1){$("#orditn_"+a).slideDown()}else{$("#orditn_"+a).slideUp()}}$("#divProductTypeMenu UL LI A").each(function(){if($(this).attr("rel")!=null&&$(this).attr("rel")==$("#MenuSelectedHidden").val().toLowerCase()){$(this).parent().addClass("sel")}});function LoadProductTypeSearchControl(e,b,d){var c;var a="ProductType="+b+"&ProductTypeValue="+d;$("#MenuSelectedHidden").val(b);$("#divProductTypeMenu UL LI A").each(function(){if(b==$(this).attr("rel")){$(this).parent().addClass("sel");c=$(this).parent()}else{$(this).parent().removeClass("sel");$(this).parent().addClass("items")}});var f=new serviceProxy($.extend({},ElementBlockingSettings,{element:c}));f.invoke("/Product/LoadProductTypeSearchControl","POST",a,function(g){$("#div_content").html(g)})}function SearchOption_OnClick(f){var b=$(f).val();var a=$(f).attr("checked");var e="";var h=false;if(b=="11"){if(a==true){h=true}else{$(".carattributes").css("display","none")}}var c=0;$(".rblSearchOptions").each(function(){if($(this).attr("checked")==true){e+="+"+$(this).val();c++}});e=e.toString().substr(1,e.toString().length-1);$("#hdnSearchOption").val(e);if(c>1){IsDynamicPackage=true;var g="";if(e.toString().indexOf("21")>-1){g=$("#HiddenContent #divFlightPlus").html()}else{if(e.toString().indexOf("11")>-1){g=$("#HiddenContent #divCarPlus").html()}else{g=$("#HiddenContent #divHotelPlus").html()}}$("#productTypeSearchPlaceHolder").html(g)}else{IsDynamicPackage=false;var d=$("#MenuSelectedHidden").attr("producttypevalue");LoadProductTypeSearchCtl(d)}geolocationAutocomplete("StartLocationTextBox",function(k,j){On_SelectStartLocation(j.item)});geolocationAutocomplete("EndLocationTextBox",function(k,j){On_SelectStartLocation(j.item)});InitializeDateCtls();InitializeValidations()}function ShowProgress(){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true})}function LoadPassengerSubTypes(b){var c=0;c=$("#TypeDropDownList_"+b).val();if(c=="8741584f-0194-48e7-9746-03d9c7b8f37d"){var d;var e;e="#SubType"+b;d="#StudentST"+b;var a="#ConST"+b;$(e).css("display","block");$(d).css("display","block");$(a).css("display","none")}else{if(c=="9fdfabf4-f2b5-40fc-bac8-e191911b716f"){var d;var e;e="#SubType"+b;d="#ConST"+b;var a="#StudentST"+b;$(e).css("display","block");$(d).css("display","block");$(a).css("display","none")}else{var d;var e;e="#SubType"+b;d="#ConST"+b;var a="#StudentST"+b;$(e).css("display","none");$(d).css("display","none");$(a+b).css("display","none")}}}function ValidatePassengerRequestForm(){if($("#frmotherpassrequest").length>0){$("#frmotherpassrequest").validate({rules:{FirstNameText:{required:"#FirstNameText:visible"},txtMobile:{required:"#txtMobile:visible"}},messages:{FirstNameText:{required:Resources.Search_Required},txtMobile:{required:Resources.Search_Required}}})}}function Mytrip(g,c){var a=false;if(document.getElementById("txtBookingNumber").value!=""&&document.getElementById("txtEmailID").value!=""){a=true}else{if(document.getElementById("txtBookingNumber").value==""&&document.getElementById("txtEmailID").value!=""){a=false}else{if(document.getElementById("txtBookingNumber").value!=""&&document.getElementById("txtEmailID").value==""){a=false}else{if(document.getElementById("txtTelephoneNumber").value!=""){a=true}else{if(document.getElementById("txtPNR").value!=""){a=true}}}}}if(a==false){alert(Resources.Search_FillSearchCriteria);return false}var b=$("#"+g);if(c==""){var e="/Product/SearchMyTrips/"+d}else{var e="/Product/SearchMyTrips/?OrderBy="+c+"###"+d}var d=$(b).serialize();d=d;var f=new serviceProxy();f.invoke(e,"POST",d,function(h){$("#TripsSearch").html(h);$("#TripsSearch").show()});return false}function SelectConcession(b){var c=$(b).val();var a=$(b).val().split(",");var d=$("#hdnPckgRoomNum").val();if($("#hdnPckgRoomNum").val()=="undefined"||$("#hdnPckgRoomNum").val()==null||$("#hdnPckgRoomNum").val()=="null"){d=0}$("#hdnPckgRoomNum").val();var e=$("#SelectedLookUpID").val();if(d==0){$("#txtCardNum_"+e).val(a[0]);$("#txtFirstName_"+e).val(a[1]);$("#txtLastName_"+e).val(a[2]);$("#txtConcessionCode_"+e).val(a[3]);$("#hdnConcessionType_"+e).val(a[4])}else{$("#txtCardNum_"+e+"_"+d).val(a[0]);$("#txtFirstName_"+e+"_"+d).val(a[1]);$("#txtLastName_"+e+"_"+d).val(a[2]);$("#txtConcessionCode_"+e+"_"+d).val(a[3]);$("#hdnConcessionType_"+e+"_"+d).val(a[4])}}function CancelConcession(){var a=$("#SelectedLookUpID").val();$("#txtCardNum_"+a).val("");$("#txtFirstName_"+a).val("");$("#txtLastName_"+a).val("");$("#txtConcessionCode_"+a).val("")}function OpenConcessionlookkup(b,c){$("#SelectedLookUpID").val(b);if(c=="undefined"||c==null||c==""){c=0}var d=null;var e=null;if(c!=0){d=$("#TypeDropDownList_"+b+"_"+c).val();e=$("#SubTypeDropDownList_"+b+"_"+c).val();$("#hdnPckgRoomNum").val(c)}else{d=$("#TypeDropDownList_"+b).val();e=$("#SubTypeDropDownList_"+b).val()}var a="SelectedPaxTypeID="+d+"&SelectedPaxSupTypeID="+e;var f=new serviceProxy({show:true});f.invoke("/Product/LoadConcessionLookUp/","POST",a,function(g){$("#ViewCovessionLookkupContent").html(g);$("#ViewCovessionLookkup").modal("show");$("#lblAddrecordmsg").html("")});return false}function SearchConcession(){var d=$("#StartDateTextBox").val();var g=$("#hdnPackageOptionID").val();if(g!=null&&g!=undefined&&g!=""){if(d==null||d==undefined||d==""){var e=document.getElementById("spnFixedDateSelectedDate");if(e!=null&&e!=undefined&&e!=""){d=e.innerHTML}if(d==null||d==undefined||d==""){alert(Resources.Search_DepartureDate);return false}}}if($.trim($("#ConcessionNameSearchTxt").val())==""&&$.trim($("#ConcessionEmailSearchTxt").val())==""){alert(Resources.Search_NameEmailValid);return false}var h=new serviceProxy({show:true});var l=$("#ConcessionNameSearchTxt").val();var f=$("#ConcessionEmailSearchTxt").val();var k=$("#ConcessionContactNumberTxt").val();var a=$("#ConcessionIDNumbeTxt").val();var b=null;if($("#hdnIsPckgTrain").val()==1){var j=$("#PackageId").val();b=$("#frmPackageDetails"+j).serialize()}else{b=$("#frm_27_Search").serialize()}b=b+"&Name="+l+"&Email="+f+"&ContactNumber="+k+"&IDNumber="+a+"&pckgDate="+d;var c=$("#PassSubTypeDecription").val();b=b+"&ParentID="+c;h.invoke("/Product/SearchConcession","POST",b,function(m){$("#DivPassConcessionList").html(m);$("#DivPassConcessionList").slideDown(500)});return false}function SearchTrainPckgConcession(){var c=new serviceProxy({show:true});var d=$("#ConcessionNameSearchTxt").val();var a=$("#frmFixedPackageDetails").serialize();a=a+"&Name="+d;var b=$("#PassSubTypeDecription").val();a=a+"&ParentID="+b;c.invoke("/Product/SearchConcession","POST",a,function(e){$("#DivPassConcessionList").html(e);$("#DivPassConcessionList").slideDown(500)});return false}function TrainLoadOtherPaxTypes(a){var c=new serviceProxy({show:true});var b=0;b=$("#NoOfOthersDropDownList").val();var d="noofPax="+b;c.invoke("/Product/LoadOtherPaxTypeControl/","GET",d,function(e){if(b==0){$("#DivPassSubTypeDecription").attr("style","display:none")}else{$("#DivPassSubTypeDecription").attr("style","display:block");$("#PassSubTypeDescription").html(a)}$("#CustomPaxControl").html(e);$("#CustomPaxControl").show()});return false}function ConcessionCodeReset_Click(a){$("#txtCardNum_"+a).val("");$("#txtFirstName_"+a).val("");$("#txtLastName_"+a).val("");$("#txtConcessionCode_"+a).val("");$("#concessionValidationMsg_"+a).html("");$("#concessionValidationMsg_"+a).attr("style","display:none")}function ConcessionApply_OnClick(f,b){var e="";if(b=="undefined"||b==null||b==""){b=0}var d="";if(b!=0){d="_"+b}var a=$("#hdnConcessionType_"+f+d).val();$("#lblAddrecordmsg").html("");if($.trim($("#txtCardNum_"+f+d).val())==""&&(a=="Concession"||a=="EmployeeDiscount"||a=="StudentWarrant"||a=="TravelPass"||a=="Entitlement")){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_CardNumberRequired+"</span>"}else{if($.trim($("#txtFirstName_"+f+d).val())==""){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_FirstNameRequired+"</span>"}else{if($.trim($("#txtLastName_"+f+d).val())==""){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_LastNameRequired+"</span>"}else{if($.trim($("#txtConcessionCode_"+f+d).val())==""){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_QRConcessionMsg+"</span>"}}}}if(e!=""){$("#concessionValidationMsg_"+f).attr("style","display:block");$("#concessionValidationMsg_"+f+d).html(e);return false}else{$("#hdnApplyClick_"+f+d).val(f);$("#concessionValidationMsg_"+f).attr("style","display:none");$("#concessionValidationMsg_"+f+d).html("");var h=new serviceProxy();var g=null;if($("#hdnIsPckgTrain").val()==1){var c=$("#PackageId").val();g=$("#frmPackageDetails"+c).serialize()}else{g=$("#frm_27_Search").serialize()}var j=g+" &RoomIndex="+b+"&CardHolderLastName="+$("#txtLastName_"+f+d).val()+"&CardHolderFirstName="+$("#txtFirstName_"+f+d).val()+"&CardNumber="+$("#txtCardNum_"+f+d).val()+"&ConcessionCode="+$("#txtConcessionCode_"+f+d).val();j+="&ParentPassengerTypeID="+$("#TypeDropDownList_"+f+d).val()+"&PassengerTypeID="+$("#SubTypeDropDownList_"+f+d).val();h.invoke("/Product/ValidateConcession/","POST",j,function(k){if(k=="true"){e='<span class="rzcspltxt rezpaddrig rzcc7">Concession Applied</span>';$("#concessionValidationMsg_"+f+d).html(e);$("#concessionValidationMsg_"+f).attr("style","display:block")}else{$("#txtFirstName_"+f+d).val("");$("#txtLastName_"+f+d).val("");$("#txtCardNum_"+f+d).val("");$("#txtConcessionCode_"+f+d).val("");$("#concessionValidationMsg_"+f+d).html(k);$("#concessionValidationMsg_"+f).attr("style","display:block")}});return false}}function ValidateRestrictBooking(C,y){var d=0;var q=$("#hdnSelectedTrainTripOption").val();if(q=="2"){var A=0;for(var t=1;t<=5;t++){var v=$("#MultiStartLocationTextBox_"+t).val();var a=$("#MultiEndLocationTextBox_"+t).val();var h=0;if(v!=""){h=h+1}if(a!=""){h=h+1}if(v!=""&&v!=""){A=A+1}if((h<2&&h!=0)||$("#isValidStationHdn").val()=="false"||$("#isValidSlectionnHdn").val()=="false"){alert(Resources.Search_ValidLeavingFrom);return false}else{if(A==0||$("#isValidStationHdn").val()=="false"||$("#isValidSlectionnHdn").val()=="false"){alert(Resources.Search_ValidLeavingFrom);return false}}}}else{var v=$("#StartLocationTextBox_1").val();var k=v.split(",");var a=$("#EndLocationTextBox_1").val();var D=a.split(",");if(v==""||D==""||$("#isValidStationHdn").val()=="false"||$("#isValidSlectionnHdn").val()=="false"){alert(Resources.Search_ValidLeavingFrom);return false}}var n=parseInt($("#NoOfAdultsDropDownList").val());var e=parseInt($("#NoOfChildsDropDownList").val());var B=parseInt($("#NoOfOthersDropDownList").val());var f=parseInt($("#NoOfInfantsDropDownList").val());if(n==0&&e==0&&B==0){alert(Resources.Search_SelectValidPax);return false}if(f!=0&&f>(n+B)){alert(Resources.Search_InfantperAdultValidation);return false}d=$("#NoOfOthersDropDownList").val();var j=0;$("#paxErrorMsg").hide();var x=parseInt($("#NoOfAdultsDropDownList").val())+parseInt($("#NoOfChildsDropDownList").val())+parseInt($("#NoOfOthersDropDownList").val());if(x>8){$("#paxErrorMsg").show();return false}for(var p=0;p<d;p++){var u=(parseInt(p)+1);var z=$("#txtUniqueConCode_"+u).val();if(z==1){if(d>0){for(var p=1;p<=d;p++){var o=$("#txtCardNum_"+p).val();if(o==""||o=="undefined"||o==null){if(y=="True"){alert(Resources.Search_ConcessionDetails)}else{alert(Resources.Search_QRConcessionMsgPaxType)}return false}}for(var p=1;p<=d;p++){var l=$("#hdnApplyClick_"+p).val();if(l==""||l=="undefined"||l==null){if(y=="True"){alert(Resources.Search_ValidateConcession)}else{alert(Resources.Search_QRConcessionMsgPaxType)}return false}else{if($("#hdnConcessionApplied").val()==""){if(y=="True"){alert(Resources.Search_InvalidConcessionDetails)}else{alert(Resources.Search_QRConcessionMsgPaxType)}return false}}}}}}var m=24*3600*1000;var c=$.datepicker.parseDate(tenantDateFormatForJQuery,$("#StartDateTextBox").val());if(c!=null&&c!=NaN&&c!=undefined){var s=c.getTime();var E=Date(c);var w=new Date();var r=w.getTime();var g=Math.round((s-r)/(m));var b=g+1;if(b>C&&C!=0){alert(Resources.Search_SelectDays.replace("KEY",C));return false}else{if(!ValidatePaxCount()){return false}}}return true}function LoadGenderPaxTypes(){var c=0;c=$("#BookingClassDropDownList_1").val();var a=c.split("!##!");var b=a[2];if(b=="2"||b=="0"){$("#NoOfMalePassenger, #NoOfFemalePassenger").prop("readonly",false)}else{$("#NoOfMalePassenger, #NoOfFemalePassenger").val("").prop("readonly",true)}}function Enterkeycheck(b){var c=("which" in b)?b.which:b.keyCode;var a=navigator.userAgent.toLowerCase();if(a.indexOf("msie")>-1){isIE=true}else{if(a.indexOf("safari")>-1){isIE=true}}if(c==13&&isIE==true){return SearchConcession()}}function LoadPaxMoreConcession(h,b,a,g,f,d,e,k,c){var j=new serviceProxy();j.invoke("/Product/LoadPaxMoreConcession/?paxIndex="+h+"&paxTypeName="+b+"&tripIndex="+a+"&fbID="+f+"&bcID="+d+"&segID="+g+"&pkgID="+e+"&uniqueID="+k+"&IsFareFinderSearch="+c,"POST",null,function(l){$("#divMoreConcessionPricePopup").html(l);$("#divMoreConcessionPricePopup").show()});return false}function ApplyPaxMoreConcession(c,m,f,n,h,l,a,b,j,k,g,e){if(parseInt(a)<parseInt(b)){alert(Resources.Search_Entitlements.replace("KEY",b));return false}var d=new serviceProxy();d.invoke("/Product/ApplySelectedMoreConcessionFare/?paxIndex="+c+"&paxTypeName="+m+"&tripIndex="+f+"&fbID="+h+"&bcID="+l+"&segID="+n+"&selectedMoreConcessionIndex="+j+"&pkgID="+k+"&uniqueID="+g+"&IsFareFinderSearch="+e,"POST",null,function(o){$("#divMoreConcessionPricePopup").hide();d.invoke("/Package/ReloadPackageSearch/?packageid="+k,"GET",null,function(p){$("#package_availability"+k).html(p)})});return false}function ShowProgress(){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true})}function ShowProgressTimeout(){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true});setTimeout(function(){$.unblockUI()},2000)}function SearchPackageByDeepLink(){var k=$("#hdnSelectedProductType").val();var d=$("#frm_"+k+"_Search").serialize();var b=$("#StartLocationTextBox").val();var f=[];var h="",c="",l="",g="",j="",m="";var e=0,a=0;if(b!=undefined&&b!=""){f=b.split(",");if(f.length>2){h=$.trim(f[0]);c=$.trim(f[1]);l=$.trim(f[2])}}if($("#chkTravellers").is(":checked")){e=2}else{e=parseInt($("#drpAdult").val());a=parseInt($("#drpChild").val())}if($("input[type='radio'][name=searchTravelPeriod]:checked").val()=="range"){m=$("#drpDatePeriod").val()}else{g=$("#StartDateTextBox").val();j=$("#EndDateTextBox").val()}window.location.href="/FareFinder/DeepLinkSearch/?MemberID=&ValidateToken=&City="+h+"&State="+c+"&Country="+l+"&TravlePeriod="+m+"&StartDate="+g+"&EndDate="+j+"&AdultCount="+e+"&ChildCount="+a;return false}$("#frmpackagesearch").validate({errorContainer:container,errorLabelContainer:$("ul",container),wrapper:"label",rules:{StartDateTextBox:{required:true},EndDateTextBox:{searchstartandenddate:true,searchstartdate:true},},messages:{StartDateTextBox:{required:Resources.Search_Searchstartdate,searchstartdate:Resources.Search_Searchstartdate},EndDateTextBox:{searchstartandenddate:Resources.Search_Enterdateafterstartdate,searchstartdate:Resources.Search_Searchenddate},},invalidHandler:function(b,a){submitted=true;$.unblockUI()},});$(window).resize(function(){var a=$(window).height();if($(window).width()<768&&$(".filtersContentWrapper").is(":visible")){$(".filtersContentWrapper").css("height",a+"px")}});$(function(){addTooltipforExceededtitle()});function addTooltipforExceededtitle(){$(".resultsTitle a").each(function(){if(isEllipsisActive(this)){$(this).parent().append("<div class='tooltip'><h4>"+$(this).text()+"</h4></div>")}});$(".resultsTitle .results-trip-location").each(function(){if(isEllipsisActive(this)){$(this).parent().append("<div class='tooltip'><h4>"+$(this).text()+"</h4></div>")}})}function isEllipsisActive(a){return(a.offsetWidth<a.scrollWidth)}$(document).ready(function(){$(".multiselect").each(function(){var a=$(this);a.multiselect({nonSelectedText:a.attr("title-text"),includeSelectAllOption:true,})});CruiseDateRangeChange();$("#inner-custom-menu input").click(function(a){a.stopPropagation()});$(".ignore-mask .dropdown a").click(function(){$("#dropdownMenu1").addClass("open")});$("#inner-custom-menu li").click(function(){})});function CruiseDateRangeChange(){if($("input[type='radio'][name=cruiseTravelPeriod]:checked").val()=="cruiseDateRange"){$("#cruiseDateRangeGroup").attr("style","display: block");$("#cruiseMonthGroup").attr("style","display: none")}else{$("#cruiseMonthGroup").attr("style","display: block");$("#cruiseDateRangeGroup").attr("style","display: none")}}$(".qtyplus").click(function(a){a.preventDefault();fieldName=$(this).attr("field");var b=parseInt($("input[name="+fieldName+"]").val());if(!isNaN(b)){$("input[name="+fieldName+"]").val(b+1)}else{$("input[name="+fieldName+"]").val(0)}updateNightLabel()});$(".qtyminus").click(function(a){a.preventDefault();fieldName=$(this).attr("field");var b=parseInt($("input[name="+fieldName+"]").val());if(!isNaN(b)&&b>0){$("input[name="+fieldName+"]").val(b-1)}else{$("input[name="+fieldName+"]").val(0)}updateNightLabel()});$("#FromLengthCruise").blur(function(){if($.isNumeric($("#FromLengthCruise").val())){}else{$("#FromLengthCruise").val(0);$("#ToLengthCruise").val(0)}updateNightLabel()});$("#ToLengthCruise").blur(function(){if($.isNumeric($("#ToLengthCruise").val())){}else{$("#FromLengthCruise").val(0);$("#ToLengthCruise").val(0)}updateNightLabel()});function updateNightLabel(){if(parseInt($("#FromLengthCruise").val())===0&&parseInt($("#ToLengthCruise").val())===0){$("#nightsLabel").empty()}else{$("#nightsLabel").html("("+$("#FromLengthCruise").val()+"-"+$("#ToLengthCruise").val()+")")}}
/* jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jörn Zaefferer; Licensed MIT */
var requiredtxt="Required";if(typeof Resources!="undefined"&&typeof Resources.Common_Required!="undefined"){requiredtxt=Resources.Common_Required}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){return b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0}var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(d){c.settings.submitHandler&&(c.submitButton=d.target),a(d.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(d.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(d){function f(){var e;return c.settings.submitHandler?(c.submitButton&&(e=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,d),c.submitButton&&e.remove(),!1):!0}return c.settings.debug&&d.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,f()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):f():(c.focusInvalid(),!1)})),c)},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}var b=!0,c=a(this[0].form).validate();return this.each(function(){b=b&&c.element(this)}),b},removeAttrs:function(c){var d={},b=this;return a.each(c.split(/\s/),function(g,f){d[f]=b.attr(f),b.removeAttr(f)}),d},rules:function(f,h){var c=this[0];if(f){var b=a.data(c.form,"validator").settings,j=b.rules,d=a.validator.staticRules(c);switch(f){case"add":a.extend(d,a.validator.normalizeRule(h)),delete d.messages,j[c.name]=d,h.messages&&(b.messages[c.name]=a.extend(b.messages[c.name],h.messages));break;case"remove":if(!h){return delete j[c.name],d}var g={};return a.each(h.split(/\s/),function(n,l){g[l]=d[l],delete d[l]}),g}}var k=a.validator.normalizeRules(a.extend({},a.validator.classRules(c),a.validator.attributeRules(c),a.validator.dataRules(c),a.validator.staticRules(c)),c);if(k.required){var m=k.required;delete k.required,k=a.extend({required:m},k)}return k}}),a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var d=a.makeArray(arguments);return d.unshift(b),a.validator.format.apply(this,d)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(e,d){b=b.replace(RegExp("\\{"+e+"\\}","g"),function(){return d})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(b){this.lastActive=b,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(b)).hide())},onfocusout:function(b){this.checkable(b)||!(b.name in this.submitted)&&this.optional(b)||this.element(b)},onkeyup:function(c,b){(9!==b.which||""!==this.elementValue(c))&&(c.name in this.submitted||c===this.lastElement)&&this.element(c)},onclick:function(b){b.name in this.submitted?this.element(b):b.parentNode.name in this.submitted&&this.element(b.parentNode)},highlight:function(c,d,b){"radio"===c.type?this.findByName(c.name).addClass(d).removeClass(b):a(c).addClass(d).removeClass(b)},unhighlight:function(c,d,b){"radio"===c.type?this.findByName(c.name).removeClass(d).addClass(b):a(c).removeClass(d).addClass(b)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:requiredtxt,remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function c(g){var h=a.data(this[0].form,"validator"),f="on"+g.type.replace(/^validate/,"");h.settings[f]&&h.settings[f].call(h,this[0],g)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var d=this.groups={};a.each(this.settings.groups,function(f,g){"string"==typeof g&&(g=g.split(/\s/)),a.each(g,function(e,h){d[h]=f})});var b=this.settings.rules;a.each(b,function(f,g){b[f]=a.validator.normalizeRule(g)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var c=0,b=this.currentElements=this.elements();b[c];c++){this.check(b[c])}return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b)!==!1;return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b){this.errorList.push({message:b[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var b=0;for(var c in d){b++}return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(c){return c.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset(),this.toHide=this.errorsFor(b)},elementValue:function(c){var d=a(c).attr("type"),b=a(c).val();return"radio"===d||"checkbox"===d?a("input[name='"+a(c).attr("name")+"']:checked").val():"string"==typeof b?b.replace(/\r/g,""):b},check:function(f){f=this.validationTargetFor(this.clean(f));var h,c=a(f).rules(),b=!1,j=this.elementValue(f);for(var d in c){var g={method:d,parameters:c[d]};try{if(h=a.validator.methods[d].call(this,j,f,g.parameters),"dependency-mismatch"===h){b=!0;continue}if(b=!1,"pending"===h){return this.toHide=this.toHide.not(this.errorsFor(f)),void 0}if(!h){return this.formatAndAdd(f,g),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+f.id+", check the '"+g.method+"' method.",k),k}}return b?void 0:(this.objectLength(c)&&this.successList.push(f),!0)},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||b.attributes&&a(b).attr("data-msg-"+c.toLowerCase())},customMessage:function(d,b){var c=this.settings.messages[d];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var b=0;arguments.length>b;b++){if(void 0!==arguments[b]){return arguments[b]}}return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,d){var b=this.defaultMessage(c,d.method),f=/\$?\{(\d+)\}/g;"function"==typeof b?b=b.call(this,d.parameters,c):f.test(b)&&(b=a.validator.format(b.replace(f,"{$1}"),d.parameters)),this.errorList.push({message:b,element:c}),this.errorMap[c.name]=b,this.submitted[c.name]=b},addWrapper:function(b){return this.settings.wrapper&&(b=b.add(b.parent(this.settings.wrapper))),b},defaultShowErrors:function(){var d,b;for(d=0;this.errorList[d];d++){var c=this.errorList[d];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success){for(d=0;this.successList[d];d++){this.showLabel(this.successList[d])}}if(this.settings.unhighlight){for(d=0,b=this.validElements();b[d];d++){this.settings.unhighlight.call(this,b[d],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);b.length?(b.removeClass(this.settings.validClass).addClass(this.settings.errorClass),b.html(d)):(b=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(d||""),this.settings.wrapper&&(b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(b).length||(this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c))),!d&&this.settings.success&&(b.text(""),"string"==typeof this.settings.success?b.addClass(this.settings.success):this.settings.success(b,c)),this.toShow=this.toShow.add(b)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]),b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c)){return this.findByName(c.name).filter(":checked").length}}return b.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):!0},dependTypes:{"boolean":function(b){return b},string:function(b,c){return !!a(b,c.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={},b=a(c).attr("class");return b&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(d,a.validator.classRuleSettings[this])}),d},attributeRules:function(f){var g={},c=a(f),b=c[0].getAttribute("type");for(var h in a.validator.methods){var d;"required"===h?(d=c.get(0).getAttribute(h),""===d&&(d=!0),d=!!d):d=c.attr(h),/min|max/.test(h)&&(null===b||/number|range|text/.test(b))&&(d=Number(d)),d?g[h]=d:b===h&&"range"!==b&&(g[h]=!0)}return g.maxlength&&/-1|2147483647|524288/.test(g.maxlength)&&delete g.maxlength,g},dataRules:function(c){var d,b,g={},f=a(c);for(d in a.validator.methods){b=f.data("rule-"+d.toLowerCase()),void 0!==b&&(g[d]=b)}return g},staticRules:function(c){var d={},b=a.data(c.form,"validator");return b.settings.rules&&(d=a.validator.normalizeRule(b.settings.rules[c.name])||{}),d},normalizeRules:function(b,c){return a.each(b,function(d,f){if(f===!1){return delete b[d],void 0}if(f.param||f.depends){var e=!0;switch(typeof f.depends){case"string":e=!!a(f.depends,c.form).length;break;case"function":e=f.depends.call(c,c)}e?b[d]=void 0!==f.param?f.param:!0:delete b[d]}}),a.each(b,function(e,d){b[e]=a.isFunction(d)?d(c):d}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var d;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(d=b[this].split(/[\s,]+/),b[this]=[Number(d[0]),Number(d[1])]))}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(c,d,b){a.validator.methods[c]=d,a.validator.messages[c]=void 0!==b?b:a.validator.messages[c],3>d.length&&a.validator.addClassRules(c,a.validator.normalizeRule(c))},methods:{required:function(c,d,b){if(!this.depend(b,d)){return"dependency-mismatch"}if("select"===d.nodeName.toLowerCase()){var f=a(d).val();return f&&f.length>0}return this.checkable(d)?this.getLength(c,d)>0:a.trim(c).length>0},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(""+new Date(c))},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,g){if(this.optional(g)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(f)){return !1}var h=0,c=0,b=!1;f=f.replace(/\D/g,"");for(var j=f.length-1;j>=0;j--){var d=f.charAt(j);c=parseInt(d,10),b&&(c*=2)>9&&(c-=9),h+=c,b=!b}return 0===h%10},minlength:function(c,d,b){var f=a.isArray(c)?c.length:this.getLength(a.trim(c),d);return this.optional(d)||f>=b},maxlength:function(c,d,b){var f=a.isArray(c)?c.length:this.getLength(a.trim(c),d);return this.optional(d)||b>=f},rangelength:function(c,d,b){var f=a.isArray(c)?c.length:this.getLength(a.trim(c),d);return this.optional(d)||f>=b[0]&&b[1]>=f},min:function(d,b,c){return this.optional(b)||d>=c},max:function(d,b,c){return this.optional(b)||c>=d},range:function(d,b,c){return this.optional(b)||d>=c[0]&&c[1]>=d},equalTo:function(c,d,b){var f=a(b);return this.settings.onfocusout&&f.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(d).valid()}),c===f.val()},remote:function(f,g,c){if(this.optional(g)){return"dependency-mismatch"}var b=this.previousValue(g);if(this.settings.messages[g.name]||(this.settings.messages[g.name]={}),b.originalMessage=this.settings.messages[g.name].remote,this.settings.messages[g.name].remote=b.message,c="string"==typeof c&&{url:c}||c,b.old===f){return b.valid}b.old=f;var h=this;this.startRequest(g);var d={};return d[g.name]=f,a.ajax(a.extend(!0,{url:c,mode:"abort",port:"validate"+g.name,dataType:"json",data:d,success:function(e){h.settings.messages[g.name].remote=b.originalMessage;var k=e===!0||"true"===e;if(k){var n=h.formSubmitted;h.prepareElement(g),h.formSubmitted=n,h.successList.push(g),delete h.invalid[g.name],h.showErrors()}else{var m={},j=e||h.defaultMessage(g,"remote");m[g.name]=b.message=a.isFunction(j)?j(f):j,h.invalid[g.name]=!0,h.showErrors(m)}b.valid=k,h.stopRequest(g,k)}},c)),"pending"}}}),a.format=a.validator.format})(jQuery),function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,d){var g=f.port;"abort"===f.mode&&(a[g]&&a[g].abort(),a[g]=d)})}else{var b=c.ajax;c.ajax=function(d){var f=("mode" in d?d:c.ajaxSettings).mode,e=("port" in d?d:c.ajaxSettings).port;return"abort"===f?(a[e]&&a[e].abort(),a[e]=b.apply(this,arguments),a[e]):b.apply(this,arguments)}}}(jQuery),function(a){a.extend(a.fn,{validateDelegate:function(c,d,b){return this.bind(d,function(e){var f=a(e.target);return f.is(c)?b.apply(f,arguments):void 0})}})}(jQuery);var originerror=0;var destinationerror=0;var sametexterror=0;function DeleteShopingCartProduct_Click(d,a,e){var c;if(typeof Resources!="undefined"){if(typeof Resources.Search_JustaMoment!="undefined"){c=Resources.Search_JustaMoment}else{if(typeof Resources.Profile_JustaMoment!="undefined"){c=Resources.Profile_JustaMoment}else{if(typeof Resources.Checkout_JustaMoment!="undefined"){c=Resources.Checkout_JustaMoment}else{c="Just a moment..."}}}}else{c="Just a moment..."}var f;if(typeof Resources!="undefined"){if(typeof Resources.Search_InvalidTrainCartItemRemoved!="undefined"){f="<h1>"+Resources.Search_InvalidTrainCartItemRemoved+"</h1>"}else{if(typeof Resources.Checkout_InvalidTrainCartItemRemoved!="undefined"){f="<h1>"+Resources.Checkout_InvalidTrainCartItemRemoved+"</h1>"}else{f="<h1>A product price should be greater than $0 to proceed further. Autometically $0 product also will be removed from cart ?</h1>"}}}else{f="<h1>A product price should be greater than $0 to proceed further. Autometically $0 product also will be removed from cart ?</h1>"}if(IsValidCartItemRemove(d)==false){if(confirm(f)){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+c+"</h1>",showOverlay:true,css:blockUIDefault.css});var g=new serviceProxy({show:false});var b="producttransactiondetailid="+d+"&viewName="+e;g.invoke("/Cart/DeleteTrainCartItem","POST",b,function(j){CallBackDeleteCartItem(j,e)})}else{return false}}else{$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+c+"</h1>",showOverlay:true,css:blockUIDefault.css});var g=new serviceProxy({show:false});var h="producttransactiondetailid="+d+"&IsPackage="+a+"&viewName="+e;g.invoke("/Cart/DeleteCartItem","POST",h,function(j){CallBackDeleteCartItem(j,e)})}}function IsValidCartItemRemove(c){var b=true;var a="pTxId="+c;jQuery.ajax({url:"/Cart/IsValidCartItemRemove/",type:"POST",data:a,success:function(d){b=d},async:false});return b}function CallBackDeleteCartItem(c,b){$(".modal-backdrop").remove();if(b=="ViewCartWidget"||b=="ViewCartWidgetPopup"){var a=new serviceProxy({show:false});if(b=="ViewCartWidgetPopup"){a.invoke("/cart/ViewCartWidgetPopup/?action=delete","GET",null,function(d){$("#ViewCartWidgetPopupContent").html(d);$("#ViewCartWidgetPopup").modal("show");$.unblockUI()})}$("#div_shoppingcartcontent").html(c);if(b=="ViewCartWidget"){$.unblockUI()}a.invoke("/profile/LoadMenu","POST","viewName=Menu",function(d){$("#divProductTypeMenu").html(d)});a.invoke("/profile/LoadControl","POST","viewName=LogOnUserControl",function(d){$("#div_LogOnUserContent").html(d)})}else{if(b=="Cart"){window.location.href="/cart/CartDetails"}else{window.location.href="/cart/Reserve"}}}function DeletePackageOption_Click(d,a,e){var b=new serviceProxy();var c="producttransactiondetailid="+d+"&IsPackageOption="+a+"&viewName="+e;b.invoke("/Cart/DeleteCartItem","POST",c,CartCallback)}if("onhashchange" in window){var proxy=new serviceProxy({show:false});if($("#div_shoppingcartcontent.mycart:visible").length>0){proxy.invoke("/Cart/GetCartDetails","GET",null,CartCallback)}$("#div_LogOnUserContent").each(function(a){if($("#divCartItems:visible").length>0){proxy.invoke("/profile/LoadControl","POST","viewName=LogOnUserControl",function(b){$("#div_LogOnUserContent").html(b);if(window.SetHeaderPosition){SetHeaderPosition()}})}})}function AddtoCart(a,b){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true,css:blockUIDefault.css});var c=new serviceProxy({show:false});var d=b;if(d=="00000000-0000-0000-0000-000000000000"||d==""){d=a}$.AddtoCart("cartbtn_"+d,"div_shoppingcartcontent");c.invoke("/Cart/Add","GET","productId="+a+"&elementId="+b,CartCallback)}function AddTraintoCart(f,c){if($("#hdnTripType").val()==1){var d=false;var b=false;$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_0")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}}});if(d!=true){alert(Resources.Search_AvailableJourney);return false}else{d=false}$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_1")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}b=true}});if(d!=true){alert(Resources.Search_AvailableJourney);return false}}else{if($("#hdnTripType").val()==2){var d=false;var b=false;$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_0")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}b=true}});if(d!=true&&b){alert("Please select a journey if available or make a request for booking.");return false}else{d=false;b=false}$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_1")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}b=true}});if(d!=true&&b){alert("Please select a journey if available or make a request for booking.");return false}else{d=false;b=false}$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_2")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}b=true}});if(d!=true&&b){alert("Please select a journey if available or make a request for booking.");return false}else{d=false;b=false}$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_3")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}b=true}});if(d!=true&&b){alert("Please select a journey if available or make a request for booking.");return false}else{d=false;b=false}$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_4")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}b=true}});if(d!=true&&b){alert("Please select a journey if available or make a request for booking.");return false}else{d=false;b=false}}else{var d=false;$("input").each(function(){if($(this).attr("name")!=null&&$(this).attr("name").indexOf("fbfc_0")>-1){if($(this).is(":checked")){d=true}if(d==true){return false}}});if(d!=true){alert("Please select a journey if available or make a request for booking.");return false}}}var e=new serviceProxy();var a=c;if(a=="00000000-0000-0000-0000-000000000000"||a==""){a=f}$.AddtoCart("cartbtn_"+a,"div_shoppingcartcontent");e.invoke("/Cart/Add","GET","productId="+f+"&elementId="+c,CartCallback)}function CartCallback(a){$(".modal-backdrop").remove();var b=new serviceProxy({show:false});b.invoke("/cart/ViewCartWidgetPopup","GET",null,function(c){$("#ViewCartWidgetPopupContent").html(c);$("#ViewCartWidgetPopup").modal("show");$.unblockUI()});$("#div_shoppingcartcontent").html(a);b.invoke("/profile/LoadMenu","POST","viewName=Menu",function(c){$("#divProductTypeMenu").html(c)});b.invoke("/profile/LoadControl","POST","viewName=LogOnUserControl",function(c){$("#div_LogOnUserContent").html(c);if(window.SetHeaderPosition){SetHeaderPosition()}})}function AddMultipleRoomsToCart(b){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true,css:blockUIDefault.css});var a=new serviceProxy({show:false});$.AddtoCart("cartbtn_"+b,"div_shoppingcartcontent");a.invoke("/Cart/AddMultipleRoomsToCart?productID="+b,"GET",null,CartCallback)}function AddDynamicPackageToCart(){$.AddtoCart("div_DynamicpackagePrice","div_shoppingcartcontent");$.post("/Cart/AddDynamicPackageToCart",null,function(a){$("#div_shoppingcartcontent").html(a);$.post("/profile/LoadControl","viewName=LogOnUserControl",function(b){$("#div_LogOnUserContent").html(b)})})}function AddPackageToCart(b,a){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true,css:blockUIDefault.css,onBlock:function(){var c=new serviceProxy({show:false});var g=[];$("input").each(function(){if($(this).attr("id")!=null){if($(this).attr("id").indexOf(b+"_chkDependentProduct_")>-1){if($(this).is(":checked")){g.push($(this).attr("value"))}}}});var f=$("#frmPackageDetails"+b).serialize();f=f+"&optionId="+a+"&DependentProductIDs="+g;var e=false;var d=a;c.invoke("/Cart/IsPackageExistsInCart","GET",null,function(h){if(d=="00000000-0000-0000-0000-000000000000"||d==""){d=b}c.invoke("/Cart/AddPackage","POST",f,null,null,null,false);e=true},null,null,false);if(e==true){window.location.href="/order/CheckoutCart/"+d}}})}function CheckAddOn(n,e,m,c,k,h,f){var j=null;var l=1;var a=0;var b="00000000-0000-0000-0000-000000000000";if(m!="00000000-0000-0000-0000-000000000000"){b=m}else{b=e}if(k!=null){j=k.checked}if(f!=null){l=parseInt($(f).val());j=true}if($("#hdnAddOnPrevQty_"+b).length>0){a=$("#hdnAddOnPrevQty_"+b).val()}var d=new serviceProxy({show:false});var g="addOnID="+n+"&productID="+e+"&elementID="+m+"&roomID="+c+"&isSelected="+j+"&FareBasisID="+h+"&Qty="+l+"&PQty="+a;d.invoke("/Product/UpdateAddOn","POST",g,function(o){if($("#divTabContents"+e).length>0){$("#divTabContents"+e).html(o)}else{if($("#package_availability"+e).length>0){$("#package_availability"+e).html(o)}}if($("#hdnAddOnPrevQty_"+b).length>0){$("#hdnAddOnPrevQty_"+b).val(l)}if($("#AddOnQty_"+b).length>0){$("#AddOnQty_"+b).val(l)}})}function ChangeRoomType(h,a,f,e,d,g,b){var j=new serviceProxy({show:false});var c="productID="+h+"&roomID="+a+"&elementID="+f+"&fbid="+b;j.invoke("/Product/ChangeRoomType","POST",c,function(k){if($("#divTabContents"+h).length>0){$("#divTabContents"+h).html(k)}else{if($("#package_availability"+h).length>0){$("#package_availability"+h).html(k)}}})}(function(a){a.extend({AddtoCart:function(d,c,e){var f=a("#"+d);var g=a("#"+c);var b=a("#"+d+"_shadow");if(a(b).length>0){if(!b.attr("id")){a("body").prepend('<div id="'+f.attr("id")+'_shadow" style="display: none; background-color: #ddd; border: solid 1px darkgray; position: static; top: 0px; z-index: -100;">&nbsp;</div>');var b=a("#"+f.attr("id")+"_shadow")}if(!b){alert("Cannot create the shadow div")}b.width(f.css("width")).height(f.css("height")).css("top",f.offset().top).css("left",f.offset().left).css("opacity",0.5).show();b.css("position","absolute");b.animate({width:g.innerWidth(),height:g.innerHeight(),top:g.offset().top,left:g.offset().left},{duration:300}).animate({opacity:0},{duration:100,complete:e})}}})})(jQuery);function ApplyPromotionCode(){var a="";if($("#PromotionCode")!=null){a=$("#PromotionCode").val();var c="";c=$("#frmCheckout").serialize();if(c!=null&&c.indexOf("PromotionCode")<0){c=c+"&PromotionCode="+a}if(a!=""){var b=new serviceProxy({show:true});b.invoke("/Order/ApplyPromotionCode","POST",c,function(d){if(d[0]==0){alert(d[1]);$("#PromotionCode").val("")}else{OnCheckout_Click(d[0])}})}else{alert(Resources.Checkout_EnterPromoCode)}}}function OnCheckout_Click(a){window.location.href="/Order/CheckoutCart/"+a+"?IsBookingRetry=true"}function CancellationPolicy_OnClick(a){$("#"+a).toggle();$("#liCancellationPolicy").addClass("chkmenuarrow")}function ChangeProductRoomType(j,h,b,k,d,e,p,n,g){var l="False";var o=payingAmnt=parseFloat(g);if(isNaN(o)||o==""||o==undefined){o=2}$("#aRoom_"+h+"_"+$("#hdnSelectedElementId_"+h+"_"+e).val()+"_"+$("#hdnSelectedRoom_"+h+"_"+e).val()+"_"+e).html(Resources.Search_Select);$("#divRoom_"+h+"_"+$("#hdnSelectedElementId_"+h+"_"+e).val()+"_"+$("#hdnSelectedRoom_"+h+"_"+e).val()+"_"+e).html(Resources.Search_Select);$("#divRoom_"+h+"_"+b+"_"+j+"_"+e).html("");$("#aRoom_"+h+"_"+b+"_"+j+"_"+e).html("<i class='fa fa-check'></i>");$(".rsltsselect."+h+"_Room").each(function(){if($(this).attr("avilStatus")=="True"){l="True"}});if($("#hdnIsOnRequest_"+h+"_"+b+"_"+j+"_"+e).val()=="True"||l=="True"){$("#tdOnRequest_"+h).show();$("#tdAddToCart_"+h).hide()}else{$("#tdOnRequest_"+h).hide();$("#tdAddToCart_"+h).show()}$("#hdnSelectedRoom_"+h+"_"+e).val(j);$("#hdnSelectedProductId_"+e).val(h);$("#hdnSelectedElementId_"+h+"_"+e).val(b);$("#hdnSelectedFareBasisId_"+h+"_"+e).val(k);$("#hdnSelectedTotalPrice_"+h+"_"+e).val(d);var f=parseFloat($("#hdnRoomCount").val());var c=parseFloat(0);for(var a=1;a<=f;a++){c=parseFloat(c)+parseFloat($("#hdnSelectedTotalPrice_"+h+"_"+a).val())}if($("#hdnIsOnRequest_"+h+"_"+b+"_"+j+"_"+e).val()=="True"){$("#spnReqSelectedPrice_"+h).html($("#hdnCurrencySymbol_"+e).val()+c.toFixed(o))}else{$("#spnSelectedPrice_"+h).html($("#hdnCurrencySymbol_"+e).val()+c.toFixed(o))}var m="";if(p!=null&&p!=""){m="Room "+e+" - "+p}if(n!=null&&n!=""){m=m+" - "+n}if($("#hdnIsOnRequest_"+h+"_"+b+"_"+j+"_"+e).val()=="True"||l=="True"){$("#ALinkRequest_"+h).addClass("clutip");$("#ALinkRequest_"+h).attr("title",$("#hdnOnRequestRollOverText_"+h).val());$("#ALinkRequest_"+h).text(Resources.Search_RequestIt)}else{$("#ALinkRequest_"+h).text(Resources.Search_AddtoCart)}$("#roomName_"+h+"_"+e).html(m);$("#spnBaseProdSelectedPrice_"+h).html($("#hdnCurrencySymbol_"+e).val()+c.toFixed(o));if($("#hdnPartnerTypeValue_"+h).length<=0){FareBasisElementDetails(h,b,j,e)}}function AddProductToCart(f){$("#ViewCartWidgetPopup").modal("hide");var e=new serviceProxy({show:false});$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true,css:blockUIDefault.css});var d=[];$("input").each(function(){if($(this).attr("id")!=null){if($(this).attr("id").indexOf(f+"_chkDependentProduct_")>-1){if($(this).is(":checked")){d.push($(this).attr("value"))}}}});var a=$("#frmPriceDetails_"+f).serialize();a=a+"&DependentProductIDs="+d;var b=function(){e.invoke("/Cart/AddProductToCart","POST",a,function(g){if(g.Message!=null){alert(g.Message);$.unblockUI()}else{CartCallback(g)}})};if($("#hdnIsDependentProduct").length>0&&$("#hdnIsDependentProduct").val().toLowerCase()=="true"){var c=$("#hdnDependentProductParentID").val();return ValidateAddProductToCart(c,b)}else{b()}}function CheckProductAddOn(b,c,a,d,e){if($("#chkAddon_"+b+"_"+a+"_"+d+"_"+e).prop("checked")){$("#spnIsSelected_"+a+"_"+d+"_"+e).show();$("#spnIsNotSelected_"+a+"_"+d+"_"+e).hide()}else{$("#spnIsNotSelected_"+a+"_"+d+"_"+e).show();$("#spnIsSelected_"+a+"_"+d+"_"+e).hide()}}function ShowHideCartItemTabDetails(c,a,b){$("#orditn_"+b).slideUp();if($("#"+c).attr("style").indexOf("none")>-1){$("#SelectedTabID_"+b).val(c+"__"+a.id);$("#"+a.id).removeClass("cancelpolicyexpand");$("#"+a.id).addClass("cancelpolicycollapse");$("#"+c).slideDown()}else{$("#"+a.id).removeClass("cancelpolicycollapse");$("#"+a.id).addClass("cancelpolicyexpand");$("#"+c).slideUp()}}function ShowHideCartItemItinerary(c){if($("#SelectedTabID_"+c).val()!=null&&$("#SelectedTabID_"+c).val()!=""){var a=$("#SelectedTabID_"+c).val();var b=a.split("__");$("#"+b[1]).removeClass("cancelpolicycollapse");$("#"+b[1]).addClass("cancelpolicyexpand");$("#"+b[0]).slideUp()}if($("#orditn_"+c).attr("style").indexOf("none")>-1){$("#orditn_"+c).slideDown()}else{$("#orditn_"+c).slideUp()}}function FareBasisElementDetails(a,b,d,c){var e=$("#hdnSelectedRoomFareBasis_"+a).val();$("#"+e).attr("style","display:none");$("#aFareBaisName_"+a+"_"+b+"_"+d+"_"+c).closest("div").toggleClass("rsltsinfocollapse");$("#tdFareBaisName_"+a+"_"+b+"_"+d+"_"+c).toggle();$("#hdnSelectedRoomFareBasis_"+a).val("tdFareBaisName_"+a+"_"+b+"_"+d+"_"+c)}function ValidateAddProductToCart(b,d){var c=false;var a=new serviceProxy({show:false});a.invoke("/Cart/IsBaseProductAddedToCart/?DependentProductParentID="+b,"GET",null,function(e){if(e!=null&&e.toLowerCase()=="false"){alert(Resources.Search_DependentProductMessage);$.unblockUI()}else{d()}});return false}$(function(){$("input").each(function(){if($(this).attr("id")!=null){if($(this).attr("id").indexOf("_FirstName_")>-1||$(this).attr("id").indexOf("_LastName_")>-1||$(this).attr("id").indexOf("_MiddleName_")>-1){$(this).keypress(function(a){if(!IsValidName(a)){a.preventDefault()}})}}})});function IsValidName(b){var d=[b.keyCode||b.which];var c=String.fromCharCode([b.keyCode||b.which]).toLowerCase();if((d==null)||(d==0)||(d==8)||(d==9)||(d==13)||(d==27)||(d>=35&&d<=40)){var a=new RegExp("['#$%&(]");return !a.test(c)}else{var a=new RegExp("[A-Za-z ]");return a.test(c)}}function onContinueShoppingClick(){var a;if(typeof Resources!="undefined"){if(typeof Resources.Search_JustaMoment!="undefined"){a=Resources.Search_JustaMoment}else{if(typeof Resources.Profile_JustaMoment!="undefined"){a=Resources.Profile_JustaMoment}else{if(typeof Resources.Checkout_JustaMoment!="undefined"){a=Resources.Checkout_JustaMoment}else{a="Just a moment..."}}}}else{a="Just a moment..."}$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+a+"</h1>",showOverlay:true,css:blockUIDefault.css});window.location.href="/Product/Search/";$.unblockUI()}function DeleteShopingCartMembership_Click(d,a,e){var c;var b;if(typeof Resources!="undefined"){if(typeof Resources.Search_JustaMoment!="undefined"){c=Resources.Search_JustaMoment;b=Resources.Search_RemoveMembership}else{if(typeof Resources.Profile_JustaMoment!="undefined"){c=Resources.Profile_JustaMoment}else{if(typeof Resources.Checkout_JustaMoment!="undefined"){c=Resources.Checkout_JustaMoment;b=Resources.Checkout_RemoveMembership}else{c="Just a moment..."}}}}else{c="Just a moment..."}if(confirm(b)){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+c+"</h1>",showOverlay:true,css:blockUIDefault.css});var f=new serviceProxy({show:false});var g="producttransactiondetailid="+d+"&IsPackage="+a+"&viewName="+e;f.invoke("/Cart/DeleteMembershipCartItem","POST",g,function(h){CallBackDeleteCartItem(h,e)})}else{return false}}function ShowProgresscart(){var a=new Image();a.src="";$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true,css:blockUIDefault.css})}$(function(){$(".btn btn-primary").click(function(){$.blockUI({message:'<h1><i class="fa fa-cog fa-spin"></i> '+Resources.Search_JustaMoment+"</h1>",showOverlay:true,css:blockUIDefault.css})})});function hideErrors(){$(".Noflight_Error").hide();$(".OrginTextBox_validate_Required").hide();$(".OrginTextBox_validate_Error").hide();$(".Destination_validate_Required").hide();$(".Destination_validate_Error").hide()}function validateLowestAirfare(e,d){$(".Lowest_Airfare_Errors"+a).show();$(".Lowest_Airfare_Error"+a).hide();var a=e.replace(/OrginTextBox_/gi,"");a=a.replace(/DestinationTextBox_/gi,"");if(d=="true"){var f=$("#OrginTextBox_ConfirmPage").val();var b=$("#DestinationTextBox_ConfirmPage").val()}else{var f=$("#OrginTextBox_"+a).val();var b=$("#DestinationTextBox_"+a).val()}var c=0,g=0;if(f.length!=0){$(".lowestfareerrors_"+a).hide();originerror=0;$(".OrginTextBox_validate_Required_"+a).hide()}else{$(".lowestfareerrors_"+a).show();originerror=1;c=1;$(".OrginTextBox_validate_Required_"+a).show()}if(c!=1){if(f.length==3){$(".lowestfareerrors_"+a).hide();originerror=0;$(".OrginTextBox_validate_Error_"+a).hide()}else{$(".lowestfareerrors_"+a).show();originerror=1;$(".OrginTextBox_validate_Error_"+a).show()}}if(b.length!=0){$(".lowestfareerrors_"+a).hide();destinationerror=0;$(".Destination_validate_Required_"+a).hide()}else{$(".lowestfareerrors_"+a).show();destinationerror=1;g=1;$(".Destination_validate_Required_"+a).show()}if(g!=1){if(b.length==3){$(".lowestfareerrors_"+a).hide();destinationerror=0;$(".Destination_validate_Error_"+a).hide()}else{$(".lowestfareerrors_"+a).show();destinationerror=1;$(".Destination_validate_Error_"+a).show()}}if(b.toLowerCase()!=f.toLowerCase()){$(".lowestfareerrors_"+a).hide();sametexterror=0;$(".Same_Text_validate_Error_"+a).hide()}else{$(".lowestfareerrors_"+a).show();if(b.length!=0){sametexterror=1;$(".Lowest_Airfare_Errors"+a).hide();$(".Lowest_Airfare_Error"+a).show();$(".Same_Text_validate_Error_"+a).show()}}if((f.length!=0&&f.length==3)&&(b.length==0||b.length!=3)||(b.length!=0&&b.length==3)&&(f.length==0||f.length!=3)){$(".Lowest_Airfare_Errors"+a).hide();$(".Lowest_Airfare_Error"+a).show()}if(f.length!=3&&b.length!=3){$(".Lowest_Airfare_Errors"+a).show();$(".Lowest_Airfare_Error"+a).hide()}if(f.length==3&&b.length==3){$(".lowestfareerrors_"+a).hide()}if(originerror==1||destinationerror==1||sametexterror==1){$(".lowestfareerrors_"+a).show();return false}else{return true}}function OnchangelowestairfareValidation(f,a,d){$(".OrginTextBox_validate_Error_"+e).hide();$(".Destination_validate_Error_"+e).hide();$(".Lowest_Airfare_Errors"+e).show();$(".Lowest_Airfare_Error"+e).hide();var e=f.replace(/OrginTextBox_/gi,"");e=e.replace(/DestinationTextBox_/gi,"");if(d=="true"){var g=$("#OrginTextBox_ConfirmPage").val();var b=$("#DestinationTextBox_ConfirmPage").val()}else{var g=$("#OrginTextBox_"+e).val();var b=$("#DestinationTextBox_"+e).val()}var c=0,h=0;if(a=="OrginTextBox"){$(".OrginTextBox_validate_Required_"+e).hide();$(".OrginTextBox_validate_Error_"+e).hide();$(".Same_Text_validate_Error_"+e).hide();if(g.length!=0){originerror=0;$(".OrginTextBox_validate_Required_"+e).hide()}else{$(".lowestfareerrors_"+e).show();originerror=1;c=1;destinationerror=1;$(".OrginTextBox_validate_Required_"+e).show();$(".Destination_validate_Required_"+e).show()}}else{if(a=="DestinationTextBox"){$(".Destination_validate_Required_"+e).hide();$(".Destination_validate_Error_"+e).hide();$(".Same_Text_validate_Error_"+e).hide();if(b.length!=0){destinationerror=0;$(".Destination_validate_Required_"+e).hide()}else{$(".lowestfareerrors_"+e).show();destinationerror=1;h=1;$(".Destination_validate_Required_"+e).show();originerror=1;$(".OrginTextBox_validate_Required_"+e).show()}}}if(b.toLowerCase()!=g.toLowerCase()){sametexterror=0;$(".Same_Text_validate_Error_"+e).hide()}else{$(".lowestfareerrors_"+e).show();if(b.length!=0){sametexterror=1;$(".Lowest_Airfare_Errors"+e).hide();$(".Lowest_Airfare_Error"+e).show();$(".Same_Text_validate_Error_"+e).show()}}if(g.length>0&&b.length==0){$(".OrginTextBox_validate_Required_"+e).hide()}if(b.length>0&&g.length==0){$(".Destination_validate_Required_"+e).hide()}if((g.length!=0&&g.length==3)&&(b.length==0||b.length!=3)||(b.length!=0&&b.length==3)&&(g.length==0||g.length!=3)){$(".Lowest_Airfare_Errors"+e).hide();$(".Lowest_Airfare_Error"+e).show()}if(g.length!=3&&b.length!=3){$(".Lowest_Airfare_Errors"+e).show();$(".Lowest_Airfare_Error"+e).hide()}if(g.length==3&&b.length==3){$(".lowestfareerrors_"+e).hide()}if(originerror==1||destinationerror==1||sametexterror==1){$(".lowestfareerrors_"+e).show();return false}else{return true}}function SearchLowestAirFare(c,e,d){$(".Noflight_Error").hide();var f=$("#OrginTextBox_"+d).val();var a=$("#DestinationTextBox_"+d).val();if(validateLowestAirfare(d)!=true){return}ShowProgresscart();var b="Orgin="+f+"&Destination="+a+"&StartDate="+c+"&EndDate="+e;proxy.invoke("/Package/GetLowestAirFare","POST",b,function(g){$.unblockUI();if(g!=null){if(g.Price=="0"||g.Airline==null){$(".lowestfareerrors_"+d).show();$(".Noflight_Error_"+d).show();$(".Noflight_Error_"+d).html("No flights found for "+f+' <span class="icon icon-arrows"></span> '+a);return}else{$("#divLowestFare_"+d).hide();$("#hLinkGetLowestfair_"+d).hide();$("#paraLowestFairSection_"+d).html('Flights <span class="air-included-price"> '+g.Price+'</span><br /> from<span class="air-included-airport">'+f+"</span>per person")}}})}function geolocationAutocompleteforIATA(a){$("#"+a).autocomplete({source:function(c,b){$.ajax({url:locationServiceUrl+"GetAiportLocationJson",dataType:"jsonp",jsonp:"method",data:{term:c.term},success:function(d){b($.map(d,function(f){var e=formatAirportCode(f);return{label:e.replace("(GENERAL)",""),value:f.AirportCode,location:f}}))}})},autoFocus:false,minLength:3,open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all");$(".lowestfareerrors").hide()},})}function ValidateOriginTextbox(a){$(".OrginTextBox_validate_Required").hide();$(".OrginTextBox_validate_Error").hide();var b=$(a).val();if($.trim(b)==""){$(".lowestfareerrors").show();originerror=1;$(".OrginTextBox_validate_Required").show()}else{if(b.length!=3){$(".lowestfareerrors").show();originerror=1;$(".OrginTextBox_validate_Error").show()}else{originerror=0;$(".OrginTextBox_validate_Error").hide()}}showHideErrors()}function showHideErrors(){if(originerror==1||destinationerror==1){$(".lowestfareerrors").show()}else{$(".lowestfareerrors").hide()}}function ValidateDestinationTextbox(a,c){$(".OrginTextBox_validate_Required").hide();$(".OrginTextBox_validate_Error").hide();var b=$("#OrginTextBox_"+packageId).val();if($.trim(b)==""){$(".lowestfareerrors").show();originerror=1;$(".OrginTextBox_validate_Required").show()}else{if(b.length!=3){$(".lowestfareerrors").show();originerror=1;$(".OrginTextBox_validate_Error").show()}else{originerror=0;$(".OrginTextBox_validate_Error").hide()}}$(".Destination_validate_Required").hide();$(".Destination_validate_Error").hide();var b=$(a).val();if($.trim(b)==""){$(".lowestfareerrors").show();$(".Destination_validate_Required").show();destinationerror=1}else{if(b.length!=3){$(".lowestfareerrors").show();$(".Destination_validate_Error").show();destinationerror=1}else{destinationerror=0;$(".Destination_validate_Error").hide()}}showHideErrors()}function formatAirportCode(a){var b="";if(a.AirportName!=null&&a.AirportName!=""){b=a.AirportName}if(a.Destination!=null&&a.Destination!=""){if(b.toLowerCase().indexOf(a.Destination.toLowerCase())<0){b=a.Destination+" "+b}}if(a.StateName!=null&&a.StateName!=""){b+=", "+a.StateName}if(a.CountryName!=null&&a.CountryName!=""){b+=", "+a.CountryName}b+=" ("+a.AirportCode+")";return b}$(document).mouseup(function(a){var b=$(".rez-ac-wrapper");if(!b.is(a.target)&&b.has(a.target).length===0){b.hide()}});$(function(){$(".stlocctrl").keydown(function(a){switch(a.which){case 32:case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 38:a.preventDefault();navigateUp();break;case 40:a.preventDefault();navigateDown();break;case 13:submit();break;case 9:$(".rez-ac-wrapper").hide();break;case 27:a.preventDefault();$(".rez-ac-wrapper").hide();break;default:searchTimeout(a)}});$(".rez-ac-wrapper").delegate("ul","click",function(){submit()});$(".rez-ac-wrapper").delegate("li.nav","mouseover mouseleave",function(a){if(a.type=="mouseover"){$(this).addClass("over")}else{$(this).removeClass("over")}});$(".rzfclist input[type=radio]").live("change",function(){$("#KeywordTextBox").val($('input[name="search"]:checked').attr("location"));$("#hdnSelectedType").val($('input[name="search"]:checked').attr("selected-type"));$("#ViewSearchWidgetPopup").modal("hide")})});var searching=null;function searchTimeout(b){clearTimeout(searching);var d=$("#hdnLocationSearchApiUrl").val();var a=$("#hdnLocationSubDomainUrl").val();d=d.replace("http:","");d=d.replace("https:","");$("#hdnSelectedType").val("");var c=$("#hdncountrycode").val();searching=delay(function(){var e=$(".stlocctrl").val();if(e.length>=3){$.ajax({url:d,dataType:"json",type:"POST",data:'{"MessageType":4,"MessageBody":"'+encodeURI(e)+"|"+a+"|"+c+'","ControllerType":2}',success:function(f){renderHotelLocationControl(f)},})}else{$(".rez-ac-wrapper").hide()}},200)}function delay(d,a){function b(){return d.apply(c,arguments)}var c=this;return setTimeout(b,a||0)}function renderHotelLocationControl(m){var r="<li class='rez-ac-group'>Themes <i class='fa fa-map-marker'></i></li>";var o="<li class='rez-ac-group'>Areas <i class='fa fa-university'></i></li>";var t="<li class='rez-ac-group'>Region <i class='fa fa-map-marker'></i>";var v="<li class='rez-ac-group'>Packages <i class='fa fa-building'></i></li>";var k="<li class='rez-ac-group'>Dream Trip Number <i class='fa fa-map-marker'></i></li>";var q="<li class='rez-ac-group'>Keyword <i class='fa fa-map-marker'></i></li>";var j="<li class='rez-ac-group'>City <i class='fa fa-map-marker'></i></li>";var l="<li class='rez-ac-group'>State <i class='fa fa-map-marker'></i></li>";var e="<li class='rez-ac-group'>Country <i class='fa fa-map-marker'></i></li>";var p="<li class='rez-ac-group'>Location <i class='fa fa-map-marker'></i></li>";var g=0;var a=0;var b=0;var d=0;var w=0;var s=0;var n=0;var u=0;var f=0;var c=0;themeModel=new Array();areaModel=new Array();regionModel=new Array();packageModel=new Array();dtNumberModel=new Array();keywordModel=new Array();cityModel=new Array();stateModel=new Array();countryModel=new Array();locationModel=new Array();searchResultArray=[];clear();$.map(m.hits.hits,function(y){var x=decodeURIComponent(y._source.Description);switch(parseInt(y._source.type)){case 1:if(d<6){if($.inArray(x,searchResultArray)>-1){}else{v+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"' >"+highlightTxt(x)+"</li>";searchResultArray.push(x);d++}}else{if($.inArray(x,searchResultArray)>-1){}else{packageModel.push([x,y._source.UId+","+y._source.type,y._source.type]);searchResultArray.push(x);d++}}break;case 2:if(a<3){o+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{areaModel.push([x,y._source.UId+","+y._source.type,y._source.type])}a++;break;case 3:if(g<3){r+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{themeModel.push([x,y._source.UId+","+y._source.type,y._source.type])}g++;break;case 4:if(b<3){t+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{regionModel.push([x,y._source.UId+","+y._source.type,y._source.type])}b++;break;case 5:if(w<4){k+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{dtNumberModel.push([x,y._source.UId+","+y._source.type,y._source.type])}w++;break;case 6:if(s<4){q+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{keywordModel.push([x,y._source.UId+","+y._source.type,y._source.type])}s++;break;case 7:if(n<3){j+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{cityModel.push([x,y._source.UId+","+y._source.type,y._source.type])}n++;break;case 8:if(u<3){l+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{stateModel.push([x,y._source.UId+","+y._source.type,y._source.type])}u++;break;case 9:if(f<3){e+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{countryModel.push([x,y._source.UId+","+y._source.type,y._source.type])}f++;break;case 10:if(c<3){p+="<li class='nav' coordinates='"+y._source.UId+","+y._source.type+"' selected-type='"+y._source.type+"'>"+highlightTxt(x)+"</li>"}else{locationModel.push([x,y._source.UId+","+y._source.type,y._source.type])}c++;break}});if(d-6>0){v+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"package\");'>"+(d-6)+" more</a></li>"}else{if(d>0){v+="<li class='rez-ac-more'></li>"}}if(g-3>0){r+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"theme\");'>"+(g-3)+" more</a></li>"}else{if(g>0){r+="<li class='rez-ac-more'></li>"}}if(a-3>0){o+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"area\");'>"+(a-3)+" more</a></li>"}else{if(a>0){o+="<li class='rez-ac-more'></li>"}}if(b-3>0){t+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"region\");'>"+(b-3)+" more</a></li>"}else{if(b>0){t+="<li class='rez-ac-more'></li>"}}if(w-4>0){k+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"dtnumber\");'>"+(w-4)+" more</a></li>"}else{if(w>0){k+="<li class='rez-ac-more'></li>"}}if(s-4>0){q+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"keyword\");'>"+(s-4)+" more</a></li>"}else{if(s>0){q+="<li class='rez-ac-more'></li>"}}if(n-3>0){j+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"city\");'>"+(n-3)+" more</a></li>"}else{if(n>0){j+="<li class='rez-ac-more'></li>"}}if(f-3>0){e+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"country\");'>"+(f-3)+" more</a></li>"}else{if(f>0){e+="<li class='rez-ac-more'></li>"}}if(u-3>0){l+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"state\");'>"+(u-3)+" more</a></li>"}else{if(u>0){l+="<li class='rez-ac-more'></li>"}}if(c-3>0){p+="<li class='rez-ac-more'>... <a href='#' onclick='javascript:loadMySearchPopup(\"location\");'>"+(c-3)+" more</a></li>"}else{if(c>0){p+="<li class='rez-ac-more'></li>"}}var h=(d>0?v:"")+(a>0?o:"")+(g>0?r:"")+(b>0?t:"")+(w>0?k:"")+(s>0?q:"")+(n>0?j:"")+(f>0?e:"")+(u>0?l:"")+(c>0?p:"");if(h!=""){$(".rez-ac-wrapper").append("<ul>"+h+"</ul>");$(".rez-ac-wrapper").append("<div class='rez-ac-ins'>Keep typing to refine search or use <span>more</span> option to view total list</div>");$(".rez-ac-wrapper").show()}}function highlightTxt(a){var c=$(".stlocctrl").val().split(" ");var b=a;for(i=0;i<c.length;i++){if(c[i]!=""&&a.toLowerCase().indexOf(c[i].toLowerCase())>-1){b=b.replace(new RegExp("("+c[i]+")","gi"),"##$1!#")}}b=b.replace(new RegExp("##","gi"),"<span>");b=b.replace(new RegExp("!#","gi"),"</span>");return b}function loadMySearchPopup(c){var a=new Array();var b="";switch(c){case"theme":sortMoreOption(themeModel,"Themes");break;case"area":sortMoreOption(areaModel,"Areas");break;case"region":sortMoreOption(regionModel,"Regions");break;case"package":sortMoreOption(packageModel,"Packages");break;case"dtnumber":sortMoreOption(dtNumberModel,"Dream Trip Numbers");break;case"city":sortMoreOption(cityModel,"Cities");break;case"country":sortMoreOption(countryModel,"Countries");break;case"state":sortMoreOption(stateModel,"States");break;case"keyword":sortMoreOption(keywordModel,"Keywords");break;case"location":sortMoreOption(locationModel,"Locations");break}}function navigateUp(){if($(".rez-ac-wrapper li.over").index()>=0){highlight($(".rez-ac-wrapper li.over").index()-1,-1)}else{highlight($(".rez-ac-wrapper li:last").index(),-1)}}function navigateDown(){if($(".rez-ac-wrapper li.over").index()>=0){highlight($(".rez-ac-wrapper li.over").index()+1,1)}else{highlight(0,1)}}function highlight(b,a){if((b+1)>$(".rez-ac-wrapper li").length){b=0}if($(".rez-ac-wrapper li:eq("+b+")").length>0&&$(".rez-ac-wrapper li:eq("+b+")").attr("class")=="nav"){$(".rez-ac-wrapper li").removeClass("over");$(".rez-ac-wrapper li:eq("+b+")").addClass("over")}else{highlight(b+a,a)}}function submit(){if($(".rez-ac-wrapper li.over").length>0){$("#KeywordTextBox").val($(".rez-ac-wrapper li.over").text());var a=$(".rez-ac-wrapper li.over").attr("selected-type");$("#hdnSelectedType").val(a)}clear()}function clear(){$(".rez-ac-wrapper").html("");$(".rez-ac-wrapper").hide()}function sortMoreOption(b,a){$("#ViewSearchWidgetPopupContent").html(makeMoreLocationString(b,a));$("#ViewSearchWidgetPopup").modal("show")}function makeMoreLocationString(a,b){var c="<div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'><i class='fa fa-times-circle'></i></button><h4 class='modal-title' id='H1'><a href='#'>"+b+"</a></h4></div><div class='modal-body'>";a=a.sort();$.each(a,function(d,e){c+="<div class='rzfclist'><input type='radio' name='search' coordinates='"+e[1]+"' location='"+e[0]+"' selected-type='"+e[2]+"'/><span>"+e[0]+"</span></div>"});c+="</div>";return c};