$(function(){$.validator.addMethod("greaterthantodaydate",function(d,b){if(a($(b))){var c=isGreaterThanTodaysDate(d);if(c){return true}else{return false}}else{return true}},"");function a(b){return b.is(":visible")&&b.parents(":not(:visible)").length==0}$.validator.addMethod("isdate",function(b,c){return IsValidDate(b)},"");$("#pkgCheckAvailability").validate({errorLabelContainer:"#lblMessage",rules:{CountryTextBox:{required:true},DestinationTextBox:{required:true}},messages:{CountryTextBox:{required:"Enter country<br/>"},DestinationTextBox:{required:"Enter destination<br/>"}},invalidHandler:function(c,b){$("div#diverrmsg").show();$.unblockUI()},unhighlight:function(c,b){if(this.numberOfInvalids()<1){$("div#diverrmsg").hide()}else{$.unblockUI()}}})});function InitializeDateCtls(){if($("#hdnSelectedProductType").val()==21){var d=$.datepicker.parseDate(tenantDateFormatForJQuery,$("#StartDateTextBox").val());var e=d.getDate();var f=d.getMonth();var h=d.getFullYear();var g=330;CreateDateCtl("StartDateTextBox",function(){OnStartDateChange_CallBack("StartDateTextBox","EndDateTextBox")},{minDate:0,maxDate:g});CreateDateCtl("EndDateTextBox",null,{minDate:0,maxDate:g});CreateDateCtl("StartDateTextBox_10",null,{minDate:"now"})}else{CreateDateCtl("StartDateTextBox_1",null,{minDate:"now"});CreateDateCtl("CheckinDateTextBox_1",null,{minDate:"now"})}var j=331;var a=329;var b=330;var c=365;CreateDateCtl("StartDateTextBoxFlight",function(){OTAOnStartDateChange_CallBack("StartDateTextBoxFlight","EndDateTextBoxFlight","frmflightsearch");$("#StartDateTextBoxFlight").trigger("change")},{minDate:"now",maxDate:j});CreateDateCtl("EndDateTextBoxFlight",function(){OTADateChange_CallBack("EndDateTextBoxFlight","frmflightsearch");$("#EndDateTextBoxFlight").trigger("change")},{minDate:"now",maxDate:j});CreateDateCtl("OPRStartDateTextBox",function(){OnStartDateChange_CallBack("OPRStartDateTextBox","OPREndDateTextBox")},{minDate:0});CreateDateCtl("OPREndDateTextBox",null);CreateDateCtl("OPRCheckinDateTextBox_1",null,{minDate:0});CreateDateCtl("OPRCheckinDateTextBox_2",null,{minDate:0});CreateDateCtl("OPRCheckinDateTextBox_3",null,{minDate:0});CreateDateCtl("OPRCheckinDateTextBox_4",null,{minDate:0});CreateDateCtl("OPRCheckinDateTextBox_5",null,{minDate:0});CreateDateCtl("StartDateTextBoxHotel",function(){OTAOnStartDateChange_CallBack("StartDateTextBoxHotel","EndDateTextBoxHotel","HotelSearch");$("#StartDateTextBoxHotel").trigger("change")},{minDate:"now",maxDate:a});CreateDateCtl("EndDateTextBoxHotel",function(){OTADateChange_CallBack("EndDateTextBoxHotel","HotelSearch");$("#StartDateTextBoxHotel").trigger("change")},{minDate:"now",maxDate:b});CreateDateCtl("StartDateTextBoxRental",function(){OTAOnStartDateChange_CallBack("StartDateTextBoxRental","EndDateTextBoxRental","RentalSearch");$("#StartDateTextBoxRental").trigger("change")},{minDate:"now",maxDate:j});CreateDateCtl("EndDateTextBoxRental",function(){OTADateChange_CallBack("EndDateTextBoxRental","RentalSearch");$("#EndDateTextBoxRental").trigger("change")},{minDate:"now",maxDate:j});CreateDateCtl("StartDateTextBox_Activity",function(){OTAOnStartDateChange_CallBack("StartDateTextBox_Activity","EndDateTextBox_Activity","frmactivitysearch");$("#StartDateTextBox_Activity").trigger("change")},{minDate:"now",maxDate:c});CreateDateCtl("EndDateTextBox_Activity",function(){OTADateChange_CallBack("EndDateTextBox_Activity","frmactivitysearch");$("#EndDateTextBox_Activity").trigger("change")},{minDate:"now",maxDate:c});CreateDateCtl("StartDateTextBox_cruise",function(){OTADateChange_CallBack("StartDateTextBox_cruise","frmcruisesearch")},{minDate:"now"});CreateDateCtl("StartDateTextBox_Preferred",function(){OTAOnStartDateChange_CallBack("StartDateTextBox_Preferred","EndDateTextBox_Preferred")});CreateDateCtl("EndDateTextBox_Preferred",null,{minDate:"now"});CreateDateCtl("StartDateTextBoxEarned",null,{});CreateDateCtl("EndDateTextBoxEarned",null,{});CreateDateCtl("StartDateTextBox_MyActivity",function(){OTAOnStartDateChange_CallBack("StartDateTextBox_MyActivity","EndDateTextBox_MyActivity")},{changeMonth:true,changeYear:true});CreateDateCtl("EndDateTextBox_MyActivity",null,{changeMonth:true,changeYear:true});CreateDateCtl("CheckinDateTextBox_2",function(){OTADateChange_CallBack("CheckinDateTextBox_2","frmflightsearch");$("#CheckinDateTextBox_2").trigger("change")},{minDate:0,maxDate:g});CreateDateCtl("CheckinDateTextBox_3",function(){OTADateChange_CallBack("CheckinDateTextBox_3","frmflightsearch");$("#CheckinDateTextBox_3").trigger("change")},{minDate:0,maxDate:g});CreateDateCtl("CheckinDateTextBox_4",function(){OTADateChange_CallBack("CheckinDateTextBox_4","frmflightsearch");$("#CheckinDateTextBox_4").trigger("change")},{minDate:0,maxDate:g});CreateDateCtl("CheckinDateTextBox_5",function(){OTADateChange_CallBack("CheckinDateTextBox_5","frmflightsearch");$("#CheckinDateTextBox_5").trigger("change")},{minDate:0,maxDate:g})}function convertToBool(){return false}var submitted=false;function InitializeValidations(){var a=$("#MenuSelectedHidden").attr("producttypevalue");if(a==21){$("#frm_21_Search").validate({errorLabelContainer:"#lblMessage",errorClass:"error",rules:{LeavingFromTextBox:{required:"#LeavingFromTextBox:visible"},GoingToTextBox:{required:"#GoingToTextBox:visible"},DepartureDateTextBox:{required:"#DepartureDateTextBox:visible",isdate:"#DepartureDateTextBox:visible",greaterthantodaydate:"#DepartureDateTextBox:visible"},ReturnDateTextBox:{isdate:true,greaterthantodaydate:true},OriginTextBox_1:{required:"#OriginTextBox_1:visible"},DestinationTextBox_1:{required:"#DestinationTextBox_1:visible"},StartDateTextBox:{required:"#StartDateTextBox:visible",isdate:true,greaterthantodaydate:true},EndDateTextBox:{required:"#StartDateTextBox:visible",isdate:true,greaterthantodaydate:true},CheckinDateTextBox_1:{required:"#CheckinDateTextBox_1:visible",isdate:true,greaterthantodaydate:true},CheckinDateTextBox_2:{isdate:true,greaterthantodaydate:true},CheckinDateTextBox_3:{isdate:true,greaterthantodaydate:true},CheckinDateTextBox_4:{isdate:true,greaterthantodaydate:true},CheckinDateTextBox_5:{isdate:true,greaterthantodaydate:true},hdnIsMemberSelected:{validateagencymemberselect:true}},messages:{LeavingFromTextBox:{required:Resources.Search_EnterLeavingFrom},GoingToTextBox:{required:Resources.Search_EnterGoingTo},StartDateTextBox:{required:Resources.Search_DepartureDate,isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},EndDateTextBox:{required:Resources.Search_ValidReturnDate,isdate:Resources.Search_ValidReturnDate,greaterthantodaydate:Resources.Search_ReturnDateGreaterThanTodayDate},DepartureDateTextBox:{required:Resources.Search_DepartureDate,isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},ReturnDateTextBox:{isdate:Resources.Search_ValidReturnDate,greaterthantodaydate:Resources.Search_ReturnDateGreaterThanTodayDate},OriginTextBox_1:{required:Resources.Search_EnterLeavingFrom},DestinationTextBox_1:{required:Resources.Search_EnterGoingTo},CheckinDateTextBox_1:{required:Resources.Search_DepartureDate,isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},CheckinDateTextBox_2:{isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},CheckinDateTextBox_3:{isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},CheckinDateTextBox_4:{isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},CheckinDateTextBox_5:{isdate:Resources.Search_ValidDepartureDate,greaterthantodaydate:Resources.Search_DepartureDateGreaterThanTodayDate},hdnIsMemberSelected:{validateagencymemberselect:Resources.Search_SelectMember}},showErrors:function(d,b){if(submitted){var c=Resources.Search_YouHaveFollowingErrors+"\n";$.each(b,function(){c+=" * "+this.message+"\n"});alert(c);submitted=false}this.defaultShowErrors()},onfocusout:false,onkeyup:false,invalidHandler:function(c,b){submitted=true;$.unblockUI()},unhighlight:function(c,b){if(this.numberOfInvalids()==0){$("div#diverrmsg").hide()}else{$.unblockUI()}$(c).removeClass(b)}})}else{if(a==27){$("#frm_27_Search").validate({errorLabelContainer:"#lblMessage",errorClass:"error",rules:{StartLocationTextBox_1:{required:"#StartLocationTextBox_1:visible"},EndLocationTextBox_1:{required:"#EndLocationTextBox_1:visible"},StartDateTextBox:{required:"#StartDateTextBox:visible",isdate:"#StartDateTextBox:visible"},EndDateTextBox:{required:"#EndDateTextBox:visible",isdate:true},MultiStartLocationTextBox_1:{required:"#MultiStartLocationTextBox_1:visible"},MultiEndLocationTextBox_1:{required:"#MultiEndLocationTextBox_1:visible"},CheckinDateTextBox_1:{required:"#CheckinDateTextBox_1:visible",isdate:true},CheckinDateTextBox_2:{isdate:true},CheckinDateTextBox_3:{isdate:true},CheckinDateTextBox_4:{isdate:true},CheckinDateTextBox_5:{isdate:true},hdnIsMemberSelected:{validateagencymemberselect:true}},messages:{StartLocationTextBox_1:{required:Resources.Search_EnterLeavingFrom},EndLocationTextBox_1:{required:Resources.Search_EnterGoingTo},StartDateTextBox:{required:Resources.Search_DepartureDate,isdate:Resources.Search_ValidDepartureDate},EndDateTextBox:{required:Resources.Search_ValidReturnDate,isdate:Resources.Search_ValidReturnDate},MultiStartLocationTextBox_1:{required:Resources.Search_EnterLeavingFrom},MultiEndLocationTextBox_1:{required:Resources.Search_EnterGoingTo},CheckinDateTextBox_1:{required:Resources.Search_DepartureDate,isdate:Resources.Search_ValidDepartureDate},CheckinDateTextBox_2:{isdate:Resources.Search_ValidDepartureDate},CheckinDateTextBox_3:{isdate:Resources.Search_ValidDepartureDate},CheckinDateTextBox_4:{isdate:Resources.Search_ValidDepartureDate},CheckinDateTextBox_5:{isdate:Resources.Search_ValidDepartureDate},hdnIsMemberSelected:{validateagencymemberselect:Resources.Search_SelectMember}},showErrors:function(d,b){if(submitted){var c=Resources.Search_YouHaveFollowingErrors+"\n";$.each(b,function(){c+=" * "+this.message+"\n"});alert(c);submitted=false}this.defaultShowErrors()},onfocusout:false,onkeyup:false,invalidHandler:function(c,b){submitted=true;$.unblockUI()},unhighlight:function(c,b){if(this.numberOfInvalids()==0){$("div#diverrmsg").hide()}else{$.unblockUI()}$(c).removeClass(b)}})}else{$(function(){$("#frm_"+a+"_Search").validate({errorLabelContainer:"#lblMessage",errorClass:"error",rules:{CountryTextBox:{required:true},StartLocationTextBox:{required:true},StartDateTextBox:{required:true,isdate:true,greaterthantodaydate:!convertToBool()},EndDateTextBox:{required:true,isdate:true,greaterthantodaydate:!convertToBool()},EndLocationTextBox:{required:"#EndLocationTextBox:visible"},hdnIsMemberSelected:{validateagencymemberselect:true},DriverAgeTextBox:{required:"#DriverAgeTextBox:visible",range:[21,99]}},messages:{CountryTextBox:{required:$("#CountryTextBox").attr("requiredMessage")},StartLocationTextBox:{required:$("#StartLocationTextBox").attr("requiredMessage")},StartDateTextBox:{required:$("#StartDateTextBox").attr("requiredMessage"),isdate:$("#StartDateTextBox").attr("validdatemessage"),greaterthantodaydate:$("#StartDateTextBox").attr("greaterthantodaydate")},EndDateTextBox:{required:$("#EndDateTextBox").attr("requiredMessage"),isdate:$("#EndDateTextBox").attr("validdatemessage"),greaterthantodaydate:$("#EndDateTextBox").attr("greaterthantodaydate")},EndLocationTextBox:{required:$("#EndLocationTextBox").attr("requiredMessage")},hdnIsMemberSelected:{validateagencymemberselect:"Select a member to  search"},DriverAgeTextBox:{required:$("#DriverAgeTextBox").attr("requiredMessage"),range:$("#DriverAgeTextBox").attr("validdatemessage")}},showErrors:function(d,b){if(submitted){var c=Resources.Search_YouHaveFollowingErrors+"\n";$.each(b,function(){c+=" * "+this.message+"\n"});alert(c);submitted=false}},onfocusout:false,onkeyup:false,invalidHandler:function(c,b){submitted=true;$.unblockUI()},unhighlight:function(c,b){if(this.numberOfInvalids()==0){$("div#diverrmsg").hide()}else{$.unblockUI()}$(c).removeClass(b)}})})}}}var flightString="",flightCount=0,flightModel=new Array();var cityString="",cityCount=0,cityModel=new Array();var POIString="",POICount=0,POIModel=new Array();var hotelorigin="",searchingHotel=null;var renatlorigin="",renatldestination="",searchingRental=null,searchingFlight=null,flight1="",flight2="",flight3="",rentalPlace="",flightSelected="",flightSelectedValue="";var flight4="",flight5="",flight6="",flight7="",flight8="",searcount=100,sublistcount=100,subcount=0,searchingActivity=null,classname="",hdntext="";$(function(){InitializeDateCtls();InitializeValidations();InitializeOTADataValidations();on_CountryTextBoxChange("false");$("div#diverrmsg").hide();if($("#divTopDestinations").length>0){$("#divTopDestinations").jqm()}if($("#divTrainFareBasisDescriptionPopup").length>0){$("#divTrainFareBasisDescriptionPopup").jqm({model:true})}if($("#divMoreConcessionPricePopup").length>0){$("#divMoreConcessionPricePopup").jqm({model:true})}if($("#ConcessionLookupCentre").length>0){$("#ConcessionLookupCentre").jqm({model:true})}if($("#divPackageOthersPriceDetails").length>0){$("#divPackageOthersPriceDetails").jqm({model:true})}var e=$("#MenuSelectedHidden").attr("producttypevalue");if(e!=4){GetProductSearchFormValues()}AttachTopDestinationClickEvent();if($("#frmotherpassrequest").length>0){ValidatePassengerRequestForm()}$.validator.addMethod("validateagencymemberselect",function(f,g){return ValidateAgencyMemberSelect()},"");if($("#A1_1")!=null){$("#A1_1").trigger("click")}$("#NoOfRoomsDropDownList").change(function(){var f=parseInt($(this).val());AddRooms(f)});if(e==21){ShowHideFlightTripOption($("#hdnTripType").val())}if(e==27){geolocationAutocompleteTrain("StartLocationTextBox_1",null);geolocationAutocompleteTrain("EndLocationTextBox_1",null);geolocationAutocompleteTrain("MultiStartLocationTextBox_1",null);geolocationAutocompleteTrain("MultiEndLocationTextBox_1",null);geolocationAutocompleteTrain("MultiStartLocationTextBox_2",null);geolocationAutocompleteTrain("MultiEndLocationTextBox_2",null);geolocationAutocompleteTrain("MultiStartLocationTextBox_3",null);geolocationAutocompleteTrain("MultiEndLocationTextBox_3",null);geolocationAutocompleteTrain("MultiStartLocationTextBox_4",null);geolocationAutocompleteTrain("MultiEndLocationTextBox_4",null);geolocationAutocompleteTrain("MultiStartLocationTextBox_5",null);geolocationAutocompleteTrain("MultiEndLocationTextBox_5",null)}$("#StartLocationTextBox").on("input",function(){$("#StartLocationHidden, #CountryCodeHidden, #GeoNameTypeHidden").val("")});$(".wrapper>span").hover(function(){$(this).next("div.tooltip").show()},function(){$(this).next("div.tooltip").hide()});$("#SearchByNameText").keydown(function(f){if(f.keyCode==13){ValidatePackageSearchByName()}});$("#StartLocationTextBox").keydown(function(f){if(f.keyCode==13){var g=0;g=$("#MenuSelectedHidden").attr("producttypevalue");if(g==4&&g!=NaN&&g!=null){ValidatePackageSearchByLocation()}}});$(".OTAActivityrez-ac-wrapper").delegate("li.nav","mouseover mouseleave",function(f){if(f.type=="mouseover"){$(this).addClass("over")}else{$(this).removeClass("over")}});$(".OTAActivityrez-ac-wrapper").delegate("ul","click",function(){selectactivityvalues()});$(".OTAHotelrez-ac-wrapper").delegate("li.nav","mouseover mouseleave",function(f){if(f.type=="mouseover"){$(this).addClass("over")}else{$(this).removeClass("over")}});$(".OTAHotelrez-ac-wrapper").delegate("ul","click",function(){selecthotelvalues()});$(".OTARentalOriginrez-ac-wrapper").delegate("li.nav","mouseover mouseleave",function(f){if(f.type=="mouseover"){$(this).addClass("over")}else{$(this).removeClass("over")}$(".OTARentalOriginrez-ac-wrapper").delegate("ul","click",function(){selectrentalvalues()})});$(".OTARentalDropOffrez-ac-wrapper").delegate("li.nav","mouseover mouseleave",function(f){if(f.type=="mouseover"){$(this).addClass("over")}else{$(this).removeClass("over")}});$(".OTARentalDropOffrez-ac-wrapper").delegate("ul","click",function(){selectrentalvalues()});$(".OTArez-ac-wrapper li.nav").live("mouseover mouseleave",function(f){if(f.type=="mouseover"){$(this).addClass("over")}else{$(this).removeClass("over")}});$(".OTArez-ac-wrapper ul li.nav").live("click",function(f){selectflightvalues()});$(".removeautodiv").live("keydown",function(f){if(f.which==13){selectflightvalues();f.preventDefault()}else{if(f.which==9){selectflightvalues()}}});$("#HotelDestinationTextBox").focusin(function(f){if($.cookie("cachinghotel")!=undefined&&$.cookie("cachinghotel")!=""){autoCompleteForKeyEvents(f,"OTARentalOriginrez-ac-wrapper","hotel",null,null,"true")}});$(".searchRental").focusin(function(f){var g=$(this).attr("id");if(g=="OriginTextBoxHotel"){classname="OTARentalOriginrez-ac-wrapper";hdntext="hdnrental"}else{classname="OTARentalDropOffrez-ac-wrapper";hdntext="hdncruise"}if(($.cookie("cachingrentalpickup")!=undefined&&$.cookie("cachingrentalpickup")!=""&&$("#"+g).val()=="")||($.cookie("cachingrentaldropoff")!=undefined&&$.cookie("cachingrentaldropoff")!=""&&$("#"+g).val()=="")){autoCompleteForKeyEvents(f,classname,"rental",this,hdntext,"true")}});$("#HotelDestinationTextBox").keyup(function(f){autoCompleteForKeyEvents(f,"OTAHotelrez-ac-wrapper","hotel")});$("#StartactivityTextBox").keyup(function(f){autoCompleteForKeyEvents(f,"OTAActivityrez-ac-wrapper","activity")});$(".searchRental").keyup(function(g){var j=$(this).attr("id"),h="",f="";if(j=="OriginTextBoxHotel"){h="OTARentalOriginrez-ac-wrapper";f="hdnrental"}else{h="OTARentalDropOffrez-ac-wrapper";f="hdncruise"}autoCompleteForKeyEvents(g,h,"rental",this,f)});var d=document.getElementById("StartactivityTextBox");d.onkeydown=function(f){var g=f.keyCode||f.charCode;if(g==13){selectactivityvalues();f.preventDefault()}else{if(g==9){selectactivityvalues()}}};var c=document.getElementById("OriginTextBoxHotel");c.onkeydown=function(f){GetClickEvent(f)};var a=document.getElementById("DropOffTextBoxHotel");a.onkeydown=function(f){GetClickEvent(f)};var b=document.getElementById("HotelDestinationTextBox");b.onkeydown=function(f){var g=f.keyCode||f.charCode;if(g==13){selecthotelvalues();f.preventDefault()}else{if(g==9){selecthotelvalues()}}};$("#loginPopup").on("hidden.bs.modal",function(){$.cookie("sessionlogin",null)});$("#ResetSearchForm").click(function(){$("#KeywordTextBox").val("");$("#divDatePeriod").attr("style","display: block");$("#divStartDate, #divEndDate").attr("style","display: none");$("#StartDateTextBox, #EndDateTextBox").val("");$("#drpDatePeriod option[value=18], #drpChild option[value=0], #drpAdult option[value=2]").attr("selected",true);$("#rdoPeriodTravelPeriod").prop("checked",true);$("input[type='radio'][value=specific]").parent().removeClass("selected");$("input[type='radio'][value=range]").parent().addClass("selected");customRadiobox();customCheckbox()});$(document).on("click","body",function(g){if($(".ota_autosuggestion").is(":visible")){var f=g.target.className;if((f.indexOf("ui-autocomplete-input")>0)){var h="#"+event.target.id;if($(h).parent().next(".ota_autosuggestion").is(":visible")){}else{$(".ota_autosuggestion").empty().hide()}}else{$(".ota_autosuggestion").empty().hide()}}});$("#adddiscount").off().on("click",function(){for(var f=1;f<6;f++){if($(".multirentalhide"+f).is(":hidden")){$(".multirentalhide"+f).removeAttr("style");if($(".removediscountvalue").is(":hidden")){$(".removediscountvalue").show()}if(f==5){$("#adddiscount").hide()}break}}});$("#removediscount").off().on("click",function(){for(var f=5;f>=1;f--){if(!$(".multirentalhide"+f).is(":hidden")){$(".multirentalhide"+f).find(".col-xs-5,.col-xs-3").addClass("hide");$(".multirentalhide"+f).find("select").prop("selectedIndex",0);if(f!=1){$(".multirentalhide"+f).hide()}if($("#adddiscount").is(":hidden")){$("#adddiscount").show()}if(f==1){$(".rentalmoreoptions").add(".moreoptions").toggleClass("hide")}break}}});$("#addflight").off().on("click",function(){var f=parseInt($("#addflightcount").val());if(f<4){f=f+1}$("#addflightcount").val(f);$(".removeflightcount").css("display","block");for(var g=1;g<5;g++){if($(".multicityhide"+g).is(":hidden")){fillAdjacentCityFlight(g);$(".multicityhide"+g).show();if(g==4){$(".addflighthide").hide()}break}}resetFormCheck();return false});$("#removeflight").off().on("click",function(){var f=parseInt($("#addflightcount").val());f=f-1;if(f>=0){$("#addflightcount").val(f)}$(".addflighthide").css("display","block");for(var g=4;g>0;g--){if($(".multicityhide"+g).is(":visible")){$(".multicityhide"+g).hide();if(g==1){$(".removeflightcount").hide()}break}}resetFormCheck();return false});$(".flightoptions").off().on("click",function(){$(".flightmoreoptions").toggleClass("hide");$(this).addClass("hide").siblings().removeClass("hide")});$(".closeflights").off().on("click",function(){var g=0;$(this).parent().fadeOut();for(var f=4;f>0;f--){if($(".multicityhide"+f).is(":visible")){g++}}if(g==1){$(".removeflightcount").hide();$(".addflighthide").show()}else{$(".addflighthide").show()}resetFormCheck()});$("#frmflightsearch :input").on("input change blur",function(){resetFormCheck()});$("#HotelSearch :input").on("input change blur",function(){var f=0;$("#HotelSearch :input").each(function(){if($(this).is(":visible")){if(($(this).prop("tagName").toLowerCase()=="button")||$(this).hasClass("dummy-control")||($(this).attr("type")=="submit")){}else{if($(this).prop("tagName").toLowerCase()=="select"){if(($(this).attr("id")=="HotelNoOfAdultsDropDownList")&&($(this)[0].selectedIndex!=1)){f++}else{if(($(this).attr("id")=="HotelNoOfChildsDropDownList1")&&($(this)[0].selectedIndex!=0)){f++}}}else{if($(this).val()){f++}}}}});if(f){$("#HotelSearch .btnreset").removeClass("disabled")}else{$("#HotelSearch .btnreset").addClass("disabled")}});$(".rentalmoreoptions").on("click",function(){if($(this).attr("id")=="lessoptions"){$(".rental-agency").prop("selectedIndex",0);$(".RentalAgencyContainer > div > div.col-xs-5,.RentalAgencyContainer > div > div.col-xs-3").addClass("hide");$(".RentalAgencyContainer > div").not(":eq(0)").hide()}$(".moreoptions").toggleClass("hide");$(this).addClass("hide").siblings().removeClass("hide")});$("input[name=diffdrop]").change(function(){if($(this).is(":checked")){$(".RentalRow-Hide").removeClass("hide");$("#hdncruise").val("2")}else{$(".RentalRow-Hide").addClass("hide");$("#hdncruise").val("1")}});$("#RentalSearch :input").on("input change blur",function(){var f=0;$("#RentalSearch :input").each(function(){if($(this).is(":visible")){if(($(this).prop("tagName").toLowerCase()=="button")||($(this).attr("type")=="submit")||($(this).attr("type")=="checkbox")){}else{if($(this).prop("tagName").toLowerCase()=="select"){if(($(this).attr("id")=="StartTime")||($(this).attr("id")=="EndTime")){if($(this)[0].selectedIndex!=11){f++}}else{if($(this)[0].selectedIndex!=0){f++}}}else{if($(this).attr("type")=="checkbox"&&$(this).is(":checked")){f++}else{if($(this).val()){f++}}}}}});if(f){$("#RentalSearch .btnreset").removeClass("disabled")}else{$("#RentalSearch .btnreset").addClass("disabled")}});$("#frmactivitysearch :input").on("input change blur",function(){var f=0;$("#frmactivitysearch :input").each(function(){if($(this).is(":visible")){if(($(this).prop("tagName").toLowerCase()=="button")||$(this).hasClass("dummy-control")||($(this).attr("type")=="submit")){}else{if($(this).val()){f++}}}});if(f){$("#frmactivitysearch .btnreset").removeClass("disabled")}else{$("#frmactivitysearch .btnreset").addClass("disabled")}});$("#frmcruisesearch :input").on("input change blur",function(){var f=0;$("#frmcruisesearch :input").each(function(){if($(this).is(":visible")&&($(this).prop("tagName").toLowerCase()=="select")){if($(this)[0].selectedIndex!=0){f++}else{if($(this).val()){f++}}}});if($("#FromLengthCruise").val()>0){f++}if($("#ToLengthCruise").val()>0){f++}if(f){$("#frmcruisesearch .btnreset").removeClass("disabled")}else{$("#frmcruisesearch .btnreset").addClass("disabled")}});$("#frmhideoutssearch :input").on("input change blur",function(){var f=0;$("#frmhideoutssearch :input").each(function(){if($(this).is(":visible")&&($(this).prop("tagName").toLowerCase()=="select")){if($(this)[0].selectedIndex!=0){f++}}});if(f){$("#frmhideoutssearch .btnreset").removeClass("disabled")}else{$("#frmhideoutssearch .btnreset").addClass("disabled")}});$(document).on("change",".rental-agency",function(){var f=$(this).attr("id");var h=f.substr(f.length-1);var j;var g=[["ZI",Resources.Search_AWD+" #"],["ZD",Resources.Search_BCD+" #"],["ET",Resources.Search_Customer+" # |"],["EP",Resources.Search_Contract+" # |"],["ZE",Resources.Search_CDP],["ZL",Resources.Search_NationalContractID]];for(var k=0;k<g.length;k++){if(g[k][0]==$("#"+f).val()){j=g[k][1];break}}if(!j){j=Resources.Search_CorporateDiscountCode}$("#CorpCode"+h).attr("placeholder",j).parent().find("label").html(j);if($("#"+f).val()!=0){$(".multirentalhide"+h).find(".col-xs-5,.col-xs-3").removeClass("hide")}else{$(".multirentalhide"+h).find(".col-xs-5,.col-xs-3").addClass("hide")}});$(document.body).on("keyup","input.removeautodiv",function(f){autoCompleteForKeyEvents(f,"OTArez-ac-wrapper","air",this)});$(document.body).on("focus","input.removeautodiv",function(f){var g=f.target.id;if($.cookie("caching_"+g)!=undefined&&$.cookie("caching_"+g)!=""){autoCompleteForKeyEvents(f,"OTArez-ac-wrapper","air",this,null,"true")}});$(".multiselect").each(function(){var f=$(this);f.multiselect({nonSelectedText:f.attr("title-text"),includeSelectAllOption:true})});CruiseDateRangeChange();$("#inner-custom-menu input").click(function(f){f.stopPropagation()});$(".ignore-mask .dropdown a").click(function(){$("#dropdownMenu1").addClass("open")})});function GetClickEvent(a){var b=a.keyCode||a.charCode;if(b==13){selectrentalvalues();a.preventDefault()}else{if(b==9){selectrentalvalues()}}}function LoadProductTypeSearchCtl(b){var a="";if(b==1){a=$("#HiddenContent #divHotelOnly").html()}else{if(b==11){a=$("#HiddenContent #divCarOnly").html()}else{if(b==21){a=$("#HiddenContent #divFlightOnly").html()}else{if(b==27){a=$("#HiddenContent #divTrainOnly").html()}else{if(b==4){a=$("#HiddenContent #divPackageOnly").html()}else{if(b==22){a=$("#HiddenContent #divCruisesOnly").html()}else{a=$("#HiddenContent #divActivityOnly").html()}}}}}}$("#productTypeSearchPlaceHolder").html(a)}function ValidatePackageSearchByName(){if($.trim($("#SearchByNameText").val())==""||$.trim($("#SearchByNameText").val())==null){alert(Resources.Search_EnterName);return false}$("#hdnPackageSearchType").val("SearchByName");$("#frm_4_Search").validate().cancelSubmit=true;$("#frm_4_Search").submit();return true}function SearchPackageByLocation(){$("#hdnPackageSearchType").val("SearchByLocation");$("#frm_4_Search").validate().cancelSubmit=true;$("#frm_4_Search").submit();return true}function SetPackageSearchType(a){$("#hdnPackageSearchType").val(a)}function SetPackageSearchTypeVoluntour(a){$("#KeywordTextBox").val(a)}function ListAllPackages(){$("#frm_4_Search").validate().cancelSubmit=true;$("#frm_4_Search").submit()}function FormatLocationPoint(b){var a="";if(b.LocationName!=null&&b.LocationName!=""){a+=b.LocationName;if(b.IATACode!=null&&b.IATACode!=""){a+="("+b.IATACode+")"}if((b.CityName!=null&&b.CityName!="")&&(b.LocationName!=b.CityName)){a+=" , "+b.CityName}if(b.StateName!=null&&b.StateName!=""){a+=", "+b.StateName}else{if(b.StateCode!=null&&b.StateCode!=""){a+=", "+b.StateCode}}return a}else{return a}}function format(a,b){var c="";if(a.Destination!=null&&a.Destination!=""){c+=a.Destination;if(a.AirportCode!=null&&a.AirportCode!=""&&b!="11"){c+="  ("+a.AirportCode.toUpperCase()+")"}if(a.RegionName!=null&&a.RegionName!=""&&a.FeatureClass!=null&&a.FeatureClass!="P"){c+=" - "+a.RegionName}if(a.StateName!=null&&a.StateName!=""){c+=", "+a.StateName}if(a.CountryName!=null&&a.CountryName!=""){c+=", "+a.CountryName}return c}else{return c}}function TopDestinationClick(c){var a=new serviceProxy();var b="ProductTypeValue="+c;a.invoke("/Product/LoadTopDestinations","POST",b,function(d){$("#divTopDestinations").html("<div style='text-align:right'><a href='#' class='jqmClose'>Close</a></div>"+d);AttachTopDestinationClickEvent();if(d.toString().search("TopDestinationDiv")!=-1){$("#divTopDestinations").jqmShow()}})}function AttachTopDestinationClickEvent(){$("#TopDestinationDiv h6").css("cursor","pointer");$("#TopDestinationDiv h6").click(function(){$("#DestinationTextBox").val($(this).attr("title"));if($("#divTopDestinations").length>0){$("#divTopDestinations").jqmHide()}})}function OthersDropDownList_onChange(a){var b=$(a).attr("Id").replace("OthersDropDownList","");var c=parseInt($(a).val());AddOthers(b,c);if(c>=1){$("#trRoomDetails .OthersItemsWrapper").show()}}function AddOthers(a,e){var b=0,d=$("#tdOthersList"+a).find(".OthersDropDownList").length;if(e>d){for(i=1;i<=e-d;i++){var c=$("#HiddenContent #divOthersListContainer").clone();$(c).find("SELECT").each(function(){$(this).attr("id","OthersDropDownList"+a+"_"+(d+i));$(this).removeAttr("name");$(this).attr("NAME","OthersDropDownList"+a+"_"+(d+i))});$(c).appendTo($("#tdOthersList"+a))}}else{$("#tdOthersList"+a).find(".OthersDropDownList").each(function(){b++;if(b>e){$(this).remove()}})}}function AddRooms(a){$("#RoomCountCheck").val(a);var d=false;for(var b=1;b<=10;b++){if(b<=a&&$("#trRoom"+b).length==0){var c=$("#HiddenContent #divRoomContainer #tblRoomContainer").clone();$(c).find("div.trRoom,INPUT,SELECT,div, label").each(function(){$(this).attr("id",$(this).attr("id")+b);$(this).removeAttr("name");$(this).attr("NAME",$(this).attr("id")+b)});$(c.children(0)).appendTo("#trRoomDetails");$("#trRoomDetails").find("#roomCount"+b).each(function(){$(this).html(Resources.Search_Room+" "+b)})}else{if(b>a&&$("#trRoom"+b).length>0){$("#trRoom"+b).remove()}}if(b<=a){if($("#NoOfChildsDropDownList"+b).val()>0&&!d){d=true}if(d){$("#tdChildAge"+b).show()}if($("#NoOfChildsDropDownList"+b).val()==0){$("#childAgeTitle"+b).hide()}}}}function NoOfChildsDropDownList_onChange(a){var c=$(a).attr("Id").replace("HotelNoOfChildsDropDownList","");var b=parseInt($(a).val());AddChildAge(c,b)}function AddChildAge(a,d){var b=0,c=$("#tdChildAge"+a).find(".ChildAgeDropDownList").length;if(d==0){$("#tdChildAge"+a+" #divChildAgeContainer").remove()}if(d>c){for(i=1;i<=d-c;i++){var e=$("#HiddenContent #divChildAgeContainer").clone();$(e).find("SELECT").each(function(){$(this).attr("id","ChildAgeDropDownList"+a+"_"+(c+i));$(this).removeAttr("name");$(this).attr("NAME","ChildAgeDropDownList"+a+"_"+(c+i))});$(e).appendTo($("#tdChildAge"+a))}}else{$("#tdChildAge"+a).find(".ChildAgeDropDownList").each(function(){b++;if(b>d){$(this).closest(".form-group").remove()}})}}function ValidateAgencyMemberSelect(){if($(".memberType").is(":visible")){if($("#hdnIsMemberSelected").val().toLowerCase()=="false"){return false}}return true}function OnClick_FlightTripOption(a){var b=$(a).val();$("#hdnTripType").val(b);ShowHideFlightTripOption(b)}function ShowHideFlightTripOption(a){flighttimevalidation();if(a=="0"){$("#rdRountrip, #rdMultipleCity").attr("checked",false);$("#rdOneway").attr("checked","checked");$("#ReturnFromTextBox, #ArrivalTimeTextBox, #FlexiDatesTextBox_Arrive").attr("disabled","disabled");$("#EndDateTextBoxFlight, .carattributes, #EndTimeTextBox").css("display","none");$(".flightattributes").css("display","block");$("#EndDateTextBoxFlight").datepicker("disable");$("#rdRountrip").removeClass("btn-warning").addClass("btn-default");$("#rdMultipleCity").removeClass("btn-warning").addClass("btn-default");$("#rdOneway").removeClass("btn-default").addClass("btn-warning");$(".ReturnDiv").css("display","none").parent().addClass("fullwd");$("#StartDateTextBoxFlight").addClass("fullwd");$("#addflightcount").val("0")}else{if(a=="2"){$("#rdRountrip, #rdOneway").attr("checked",false);$("#rdMultipleCity").attr("checked","checked");$(".flightattributes, .carattributes").css("display","block");$(".removeflightcount, .multicityhide1, .multicityhide2, .multicityhide3, .multicityhide4").css("display","none");$("#rdRountrip").removeClass("btn-warning").addClass("btn-default");$("#rdMultipleCity").removeClass("btn-default").addClass("btn-warning");$("#rdOneway").removeClass("btn-warning").addClass("btn-default");$(".ReturnDiv").css("display","none").parent().addClass("fullwd");if($(".addflighthide").css("display")=="none"){$(".addflighthide").css("display","block")}$("#StartDateTextBoxFlight").addClass("fullwd");$("#addflightcount").val("0")}else{$("#rdOneway, #rdMultipleCity").attr("checked",false);$("#rdRountrip").attr("checked","checked");$(".carattributes").css("display","none");$(".flightattributes, #EndDateTextBoxFlight, #EndTimeTextBox").css("display","block");$("#EndDateTextBoxFlight, #ArrivalTimeTextBox, #FlexiDatesTextBox_Arrive").attr("disabled","");$("#EndDateTextBoxFlight").datepicker("enable");$("#EndTimeTextBox, #ReturnFromTextBox").removeAttr("disabled");$("#rdRountrip").removeClass("btn-default").addClass("btn-warning");$("#rdMultipleCity").removeClass("btn-warning").addClass("btn-default");$("#rdOneway").removeClass("btn-warning").addClass("btn-default");$(".ReturnDiv").css("display","block").parent().removeClass("fullwd");$("#StartDateTextBoxFlight").removeClass("fullwd");$("#addflightcount").val("0")}}}function flighttimevalidation(){var a=$("#frmflightsearch").validate();a.resetForm();$("#EndDateTextBoxFlight, #CheckinDateTextBox_2, #CheckinDateTextBox_3, #CheckinDateTextBox_4, #CheckinDateTextBox_5").val("");$("#StartTimeTextBox option[value=''], #EndTimeTextBox option[value=''], #departuretime2 option[value=''], #departuretime3 option[value=''], #departuretime4 option[value=''], #departuretime5 option[value='']").attr("selected",true);$("#MultiCitygoingId2, #MultiCityleavingId2, #MultiCitygoingId3, #MultiCitygoingId4, #MultiCityleavingId4, #MultiCitygoingId5, #MultiCityleavingId5").val("")}function fillAdjacentCity(a){if(a.name=="OriginTextBox_2"){if($("#OriginTextBox_2").val()==""){$("#OriginTextBox_2").val($("#DestinationTextBox_1").val())}}if(a.name=="OriginTextBox_3"){if($("#OriginTextBox_3").val()==""){$("#OriginTextBox_3").val($("#DestinationTextBox_2").val())}}if(a.name=="OriginTextBox_4"){if($("#OriginTextBox_4").val()==""){$("#OriginTextBox_4").val($("#DestinationTextBox_3").val())}}if(a.name=="OriginTextBox_5"){if($("#OriginTextBox_5").val()==""){$("#OriginTextBox_5").val($("#DestinationTextBox_4").val())}}}function fillAdjacentCityFlight(a){if(a=="1"){if($("#OriginTextBox_2").val()==""){$("#OriginTextBox_2").val($("#GoingToTextBox").val())}}if(a=="2"){if($("#OriginTextBox_3").val()==""){$("#OriginTextBox_3").val($("#DestinationTextBox_2").val())}}if(a=="3"){if($("#OriginTextBox_4").val()==""){$("#OriginTextBox_4").val($("#DestinationTextBox_3").val())}}if(a=="4"){if($("#OriginTextBox_5").val()==""){$("#OriginTextBox_5").val($("#DestinationTextBox_4").val())}}}function fillAdjacentStation(a){if(a.name=="MultiStartLocationTextBox_2"){$("#MultiStartLocationTextBox_2").val($("#MultiEndLocationTextBox_1").val())}if(a.name=="MultiStartLocationTextBox_3"){$("#MultiStartLocationTextBox_3").val($("#MultiEndLocationTextBox_2").val())}if(a.name=="MultiStartLocationTextBox_4"){$("#MultiStartLocationTextBox_4").val($("#MultiEndLocationTextBox_3").val())}if(a.name=="MultiStartLocationTextBox_5"){$("#MultiStartLocationTextBox_5").val($("#MultiEndLocationTextBox_4").val())}}function MultipleCitySearch(a){if($(a).val()=="MultipleCity"){$(".carattributes").css("display","block");$(".flightattributes").css("display","none")}else{$(".carattributes").css("display","none");$(".flightattributes").css("display","block")}}function ShowPackageCategoryTab(e,b,a){var c=new serviceProxy({show:false});var d="CategoryName="+e;for(i=1;i<=a;i++){$("#A1_"+i).removeAttr("class")}$("#A1_"+b).attr("class","active");c.invoke("/Package/ShowPackageCategoryTab","POST",d,function(f){$("#divfeaturedpackages").html(f)})}function on_CountryTextBoxChange(d){if(d=="false"){var e=$("#StartLocationTextBox").val(),c=$("#EndLocationTextBox").val();if(e!=null&&c!=null){geolocationAutocomplete("StartLocationTextBox",null);geolocationAutocomplete("EndLocationTextBox",null)}}else{$("#StartLocationTextBox, #EndLocationTextBox, #StartLocationPoint, #EndLocationPoint").val("")}geolocationAutocomplete("StartLocationTextBox",function(b,a){On_SelectStartLocation(a.item)});geolocationAutocomplete("EndLocationTextBox",function(b,a){On_SelectStartLocation(a.item)})}function geolocationAutocomplete(a,d){var e=0;e=$("#MenuSelectedHidden").attr("producttypevalue");if(e==11){if(a=="StartLocationTextBox"){geolocationAutocompleteCar(a,function(h,g){On_StartLocationPoint(g.item)})}if(a=="EndLocationTextBox"){geolocationAutocompleteCar(a,function(h,g){On_EndLocationPoint(g.item)})}}else{var c=$("FORM [id='CountryTextBox']").val(),b=c=="undifined"?"":c;var f=({countryCode:b,productType:e,tenantCode:$("#hdnTenantCode").val()});$("#"+a).autocomplete({source:function(h,g){$.ajax({url:locationServiceUrl+"GetTenantLocationJson",dataType:"jsonp",jsonp:"method",data:$.extend({term:h.term},f),success:function(j){g($.map(j,function(l){var k=format(l,e);return{label:k,value:k,location:l}}))}})},minLength:3,select:d,focus:d,open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}}function geolocationAutocompleteCar(a,d){var e=0,c=$("FORM [id='CountryTextBox']").val(),b=c=="undefined"?"":c;var f=({countryCode:b,partnerType:0,tenantCode:$("#hdnTenantCode").val()});$("#"+a).autocomplete({source:function(h,g){$.ajax({url:locationServiceUrl+"GetNewCarLocationPointsJson",dataType:"jsonp",jsonp:"method",data:$.extend({cityName:h.term},f),success:function(j){g($.map(j,function(l){var k=FormatLocationPoint(l);return{label:k,value:k,location:l}}))}})},minLength:3,select:d,focus:d,open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}}).data("ui-autocomplete")._renderItem=function(g,h){if(h.location.IATACode!=null&&h.location.IATACode!=""){selectorname="rzfairport"}else{if(h.location.LocationName!=null&&h.location.CityName!=null){if(h.location.LocationName.trim()==h.location.CityName.trim()){selectorname="rzfnone"}else{selectorname="rzfcarstop"}}else{selectorname="rzfcarstop"}}return $('<li class="ui-menu-item" role="presentation">').data("item.autocomplete",h).append('<a class="ui-corner-all '+selectorname+'" tabindex="-1">'+h.label+"</a>").appendTo(g)}}function On_StartLocationPoint(a){$("#StartLocationPoint").val(a.location.LocationCode+"!##!"+a.location.PartnerType)}function On_EndLocationPoint(a){$("#EndLocationPoint").val(a.location.LocationCode+"!##!"+a.location.PartnerType)}function geolocationAutocompleteAirport(a,b){$("#"+a).autocomplete({source:function(d,c){$.ajax({url:locationServiceUrl+"GetAiportLocationJson",dataType:"jsonp",jsonp:"method",data:{term:d.term},success:function(e){c($.map(e,function(g){var f=formatAirport(g);return{label:f.replace("(GENERAL)",""),value:f.replace("(GENERAL)","")}}))}})},minLength:3,select:b,open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}function formatAirport(a){var b="",c="";if(a.AirportName!=null&&a.AirportName!=""){c=a.AirportName}if(a.Destination!=null&&a.Destination!=""){if(c.toLowerCase().indexOf(a.Destination.toLowerCase())<0){c=a.Destination+" "+c}}b=c;if(a.StateName!=null&&a.StateName!=""){b+=", "+a.StateName}if(a.CountryName!=null&&a.CountryName!=""){b+=", "+a.CountryName}b+=" ("+a.AirportCode+")";return b}function SearchByPreference(a,b){$("#"+a).attr("action",b);$("#"+a).validate().cancelSubmit=true;if($("#hdnPackageSearchType").length>0){$("#hdnPackageSearchType").val("SearchByPreference")}}function OnClick_TrainTripOption(a){$("#hdnTrainTripType").val(a);$("#hdnSelectedTrainTripOption").val(a);if(a=="0"){$("#EndDateTextBox, #EndTimeTextBox, #OPREndDateTextBox").attr("disabled","disabled");$(".carattributes").css("display","none");$(".flightattributes").css("display","block");$("#EndDateTextBox").datepicker("disable");$("#rdTrip, #mcTrip").removeClass("btn-warning").addClass("btn-default");$("#owTrip").removeClass("btn-default").addClass("btn-warning")}else{if(a=="2"){$(".carattributes").css("display","block");$(".flightattributes").css("display","none");$("#OPREndDateTextBox").datepicker("enable");$("#OPREndDateTextBox").attr("disabled","");$("#rdTrip, #owTrip").removeClass("btn-warning").addClass("btn-default");$("#mcTrip").removeClass("btn-default").addClass("btn-warning")}else{$("#EndDateTextBox, #EndTimeTextBox, #OPREndDateTextBox").attr("disabled","");$(".carattributes").css("display","none");$(".flightattributes").css("display","block");$("#EndDateTextBox, #OPREndDateTextBox").datepicker("enable");$("#rdTrip").removeClass("btn-default").addClass("btn-warning");$("#mcTrip, #owTrip").removeClass("btn-warning").addClass("btn-default")}}}function ShowHideTrainTripOption(a){if(a=="0"){$("#EndDateTextBox, #EndTimeTextBox, #OPREndDateTextBox").attr("disabled","disabled");$(".carattributes").css("display","none");$(".flightattributes").css("display","block");$("#EndDateTextBox").datepicker("disable")}else{if(a=="2"){$(".carattributes").css("display","block");$(".flightattributes").css("display","none");$("#OPREndDateTextBox").datepicker("enable");$("#OPREndDateTextBox").attr("disabled","")}else{$("#EndDateTextBox, #EndTimeTextBox,#OPREndDateTextBox").attr("disabled","");$(".carattributes").css("display","none");$(".flightattributes").css("display","block");$("#EndDateTextBox, #OPREndDateTextBox").datepicker("enable")}}}function geolocationAutocompleteTrain(a,c){var d=false,g=$("#MenuSelectedHidden").attr("producttypevalue"),e=false,b=false,f=({productType:g,tenantCode:$("#hdnTenantCode").val()});$("#"+a).autocomplete({source:function(j,h){$("#isValidStationHdn").val(false);$("#isValidSlectionnHdn").val(false);d=false;$.ajax({url:locationServiceUrl+"GetTrainLocationJson",dataType:"jsonp",jsonp:"method",data:$.extend({term:j.term},f),success:function(k){h($.map(k,function(m){$("#isValidStationHdn").val(true);d=true;var l=TrainFormatLocation(m);return{label:l,value:l}}))}})},minLength:3,select:function(j,h){b=true;$("#isValidSlectionnHdn").val(true)},change:function(j,h){if(!d){$("#"+a).val("");alert("Please Select Location.")}},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all");if(!b){$("#"+a).val("");alert("Please Select Location.")}}})}function TrainFormatLocation(b){var a="";if(b.StationName!=null&&b.StationName!=""){a+=b.StationName}if(b.StationCode!=null&&b.StationCode!=""){a+=", "+b.StationCode}if(b.CityName!=null&&b.CityName!=""){a+=", "+b.CityName}return a}function LoadTrainStationLookUp(a){$("#SelectedLocationHdn").val(a);var b=new serviceProxy({show:true});b.invoke("/Product/LoadTrainStationLookUp/","GET",null,function(c){$("#ViewStationPopupContent").html(c);$("#ViewStationPopup").modal("show")});return false}function SearchStation(){var c=new serviceProxy(),b=$("#StationNameSearchTxt").val(),d=$("#CodeSearchTxt").val(),a="StationName="+b+"&Code="+d;c.invoke("/Product/SearchStation","POST",a,function(e){$("#DivTrainStationList").html(e);$("#DivTrainStationList").slideDown(500)});return false}function SelectStation(e,d,b){var c=b+", "+d,a=$("#SelectedLocationHdn").val();$("#"+a).val(c);$("#ViewStationPopup").modal("hide")}function LoadChildAge(){var a=0;a=$("#NoOfChildsDropDownList").val();if(a=="0"){$("#ChildAge").css("display","none");$("#ChildAge #Child1").css("display","none");$("#ChildAge #Child2").css("display","none");$("#ChildAge #Child3").css("display","none");$("#ChildAge #Child4").css("display","none");$("#ChildAge #Child5").css("display","none");$("#ChildAge #Child5").css("display","none");$("#ChildAge #Child5").css("display","none")}else{if(a=="1"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","none");$("#ChildAge #Child3").css("display","none");$("#ChildAge #Child4").css("display","none");$("#ChildAge #Child5").css("display","none");$("#ChildAge #Child6").css("display","none");$("#ChildAge #Child7").css("display","none");$("#ChildAgeDropDownList1").val(4)}else{if(a=="2"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","block");$("#ChildAge #Child3").css("display","none");$("#ChildAge #Child4").css("display","none");$("#ChildAge #Child5").css("display","none");$("#ChildAge #Child6").css("display","none");$("#ChildAge #Child7").css("display","none");$("#ChildAgeDropDownList1").val(4);$("#ChildAgeDropDownList2").val(4)}else{if(a=="3"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","block");$("#ChildAge #Child3").css("display","block");$("#ChildAge #Child4").css("display","none");$("#ChildAge #Child5").css("display","none");$("#ChildAge #Child6").css("display","none");$("#ChildAge #Child7").css("display","none");$("#ChildAgeDropDownList1").val(4);$("#ChildAgeDropDownList2").val(4);$("#ChildAgeDropDownList3").val(4)}else{if(a=="4"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","block");$("#ChildAge #Child3").css("display","block");$("#ChildAge #Child4").css("display","block");$("#ChildAge #Child5").css("display","none");$("#ChildAge #Child6").css("display","none");$("#ChildAge #Child7").css("display","none");$("#ChildAgeDropDownList1").val(4);$("#ChildAgeDropDownList2").val(4);$("#ChildAgeDropDownList3").val(4);$("#ChildAgeDropDownList4").val(4)}else{if(a=="5"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","block");$("#ChildAge #Child3").css("display","block");$("#ChildAge #Child4").css("display","block");$("#ChildAge #Child5").css("display","block");$("#ChildAge #Child6").css("display","none");$("#ChildAge #Child7").css("display","none");$("#ChildAgeDropDownList1").val(4);$("#ChildAgeDropDownList2").val(4);$("#ChildAgeDropDownList3").val(4);$("#ChildAgeDropDownList4").val(4);$("#ChildAgeDropDownList5").val(4)}else{if(a=="6"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","block");$("#ChildAge #Child3").css("display","block");$("#ChildAge #Child4").css("display","block");$("#ChildAge #Child5").css("display","block");$("#ChildAge #Child6").css("display","block");$("#ChildAge #Child7").css("display","none");$("#ChildAgeDropDownList1").val(4);$("#ChildAgeDropDownList2").val(4);$("#ChildAgeDropDownList3").val(4);$("#ChildAgeDropDownList4").val(4);$("#ChildAgeDropDownList5").val(4);$("#ChildAgeDropDownList6").val(4)}else{if(a=="7"){$("#ChildAge").css("display","block");$("#ChildAge #Child1").css("display","block");$("#ChildAge #Child2").css("display","block");$("#ChildAge #Child3").css("display","block");$("#ChildAge #Child4").css("display","block");$("#ChildAge #Child5").css("display","block");$("#ChildAge #Child6").css("display","block");$("#ChildAge #Child7").css("display","block");$("#ChildAgeDropDownList1").val(4);$("#ChildAgeDropDownList2").val(4);$("#ChildAgeDropDownList3").val(4);$("#ChildAgeDropDownList4").val(4);$("#ChildAgeDropDownList5").val(4);$("#ChildAgeDropDownList6").val(4);$("#ChildAgeDropDownList7").val(4)}}}}}}}}}function LoadOtherPaxTypes(){var a=0;a=$("#NoOfOthersDropDownList").val();if(a=="0"){$("#OtherPaxType").css("display","none");$("#OtherPaxType #pax1").css("display","none");$("#OtherPaxType #pax2").css("display","none");$("#OtherPaxType #pax3").css("display","none");$("#OtherPaxType #pax4").css("display","none");$("#OtherPaxType #pax5").css("display","none");$("#OtherPaxType #pax6").css("display","none");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="1"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","none");$("#OtherPaxType #pax3").css("display","none");$("#OtherPaxType #pax4").css("display","none");$("#OtherPaxType #pax5").css("display","none");$("#OtherPaxType #pax6").css("display","none");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="2"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","none");$("#OtherPaxType #pax4").css("display","none");$("#OtherPaxType #pax5").css("display","none");$("#OtherPaxType #pax6").css("display","none");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="3"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","block");$("#OtherPaxType #pax4").css("display","none");$("#OtherPaxType #pax5").css("display","none");$("#OtherPaxType #pax6").css("display","none");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="4"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","block");$("#OtherPaxType #pax4").css("display","block");$("#OtherPaxType #pax5").css("display","none");$("#OtherPaxType #pax6").css("display","none");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="5"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","block");$("#OtherPaxType #pax4").css("display","block");$("#OtherPaxType #pax5").css("display","block");$("#OtherPaxType #pax6").css("display","none");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="6"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","block");$("#OtherPaxType #pax4").css("display","block");$("#OtherPaxType #pax5").css("display","block");$("#OtherPaxType #pax6").css("display","block");$("#OtherPaxType #pax7").css("display","none");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="7"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","block");$("#OtherPaxType #pax4").css("display","block");$("#OtherPaxType #pax5").css("display","block");$("#OtherPaxType #pax6").css("display","block");$("#OtherPaxType #pax7").css("display","block");$("#OtherPaxType #pax8").css("display","none")}else{if(a=="8"){$("#OtherPaxType").css("display","block");$("#OtherPaxType #pax1").css("display","block");$("#OtherPaxType #pax2").css("display","block");$("#OtherPaxType #pax3").css("display","block");$("#OtherPaxType #pax4").css("display","block");$("#OtherPaxType #pax5").css("display","block");$("#OtherPaxType #pax6").css("display","block");$("#OtherPaxType #pax7").css("display","block");$("#OtherPaxType #pax8").css("display","block")}}}}}}}}}}function PckgTrainLoadOtherPaxTypes(a,c,b){var f=new serviceProxy(),d=0;d=$("#NoOfOthersDropDownList"+b).val();var e="noofPax="+d;e+="&roomIndex="+b;f.invoke("/Package/LoadOtherPaxTypeControl/","GET",e,function(g){if(d==0){$("#DivPassSubTypeDecription").attr("style","display:none")}else{$("#DivPassSubTypeDecription").attr("style","display:block");$("#PassSubTypeDescription").html(a)}$("#CustomPaxControl"+b).html(g);$("#CustomPaxControl"+b).show()});return false}function LoadPassengerSubTypes1(e,f){var b=new serviceProxy();var a="";var d=$(e).val();$("#PassSubTypeDecription").val($(e).val());var c="SelectedPaxType="+d;b.invoke("/Product/GetPassengerSubTypes/","POST",c,function(g){$("#"+f).html("");var h=f.substring(parseInt(f.length)-1,f.length);if(g[0].ValidateConcessionCode==true){$("#txtUniqueConCode_"+h).val("1")}else{$("#txtUniqueConCode_"+h).val("0")}for(i=0;i<g.length;i++){$("#"+f).append("<option value='"+g[i].PassengerTypeID+"'>"+g[i].Name+"</option>")}});return false}function LoadSubtypeDescription(g,c){var h=new serviceProxy(),b="",a=$("#PassSubTypeDecription").val(),f=$(g).val(),d=$("#NoOfOthersDropDownList").val();var e="SelectedSubPaxType="+f+"&ParentID="+a+"&noofPax="+d;h.invoke("/Product/GetPassengerSubTypeDescription/","POST",e,function(j){var k=j.split("#");if(k[1]==1){$("#txtUniqueConCode_"+c).val("1")}else{$("#txtUniqueConCode_"+c).val("0")}});return false}function LoadRequestTrainStationLookUp(a){$("#SelectedRequestLocationHdn").val(a);var b=new serviceProxy();b.invoke("/Product/LoadTrainStationLookUp/","GET",null,function(c){$("#DIVStationLookUp").html(c);$("#DIVStationLookUp").jqmShow()});return false}function SubmitPassengerRequest(j,e,d){var g=$("#NoOfOthersDropDownList").val(),b=$("#"+j),a="/Product/AddPassengerRequest",c=$(b).serialize();c=c+="&requestType="+e+"&departureDateTime="+d;var f=new serviceProxy();if($(b).valid()){if(g>0){for(var h=1;h<=g;h++){if($("#txtCardNum_"+h).val()==""&&$("#txtFirstName_"+h).val()==""&&$("#txtLastName_"+h).val()==""&&$("#txtage_"+h).val()==""){alert(Resources.Search_PassengerDetailsRequired);return false}}}f.invoke(a,"POST",c,function(k){$("#message").html(k)})}return false}function Schedule(f,e){if(document.getElementById("MultiStartLocationTextBox_1").value==""||document.getElementById("MultiEndLocationTextBox_1").value==""||document.getElementById("OPRCheckinDateTextBox_1").value==""){alert(Resources.Search_FillCriteria);return false}var a=$("#"+f),b=$(a).serialize();var c="/Product/SchedulesSearchList/"+b;var d=new serviceProxy();d.invoke(c,"POST",b,function(g){$("#SchedulesList").html(g);$("#SchedulesList").show()});return false}function ScheduleDetails(f,c){var a=$("#"+f);var d="/Product/SchedulesSearchList/"+b;var b=$(a).serialize();b=b;var e=new serviceProxy();e.invoke(d,"POST",b,function(g){$("#SchedulesDetails").html(g)});return false}function SearchProductsPaxValidation(){var a=!isNaN(parseInt($("#OthersDropDownList1").val()))?parseInt($("#OthersDropDownList1").val()):0;if($.trim($("#NoOfAdultsDropDownList1").val())=="0"&&a=="0"){alert(Resources.Search_SelectValidPax);return false}return true}function SearchLocationValidation(){if($("#ProductSearchType").val()!="3"&&$("#StartLocationTextBox").val()!=""&&($("#StartLocationHidden").val()==""||$("#StartLocationHidden").val()==0)){alert(Resources.Search_InvalidLocation);return false}return true}function OpenConcessionlookkup(b,c){$("#SelectedLookUpID").val(b);if(c=="undefined"||c==null||c==""){c=0}var d=null;var e=null;if(c!=0){d=$("#TypeDropDownList_"+b+"_"+c).val();e=$("#SubTypeDropDownList_"+b+"_"+c).val();$("#hdnPckgRoomNum").val(c)}else{d=$("#TypeDropDownList_"+b).val();e=$("#SubTypeDropDownList_"+b).val()}var a="SelectedPaxTypeID="+d+"&SelectedPaxSupTypeID="+e;var f=new serviceProxy({show:true});f.invoke("/Product/LoadConcessionLookUp/","POST",a,function(g){$("#ViewCovessionLookkupContent").html(g);$("#ViewCovessionLookkup").modal("show");$("#lblAddrecordmsg").html("")});return false}function SearchConcession(){var d=$("#StartDateTextBox").val();var g=$("#hdnPackageOptionID").val();if(g!=null&&g!=undefined&&g!=""){if(d==null||d==undefined||d==""){var e=document.getElementById("spnFixedDateSelectedDate");if(e!=null&&e!=undefined&&e!=""){d=e.innerHTML}if(d==null||d==undefined||d==""){alert(Resources.Search_DepartureDate);return false}}}if($.trim($("#ConcessionNameSearchTxt").val())==""&&$.trim($("#ConcessionEmailSearchTxt").val())==""){alert(Resources.Search_NameEmailValid);return false}var h=new serviceProxy({show:true}),l=$("#ConcessionNameSearchTxt").val(),f=$("#ConcessionEmailSearchTxt").val();var k=$("#ConcessionContactNumberTxt").val(),a=$("#ConcessionIDNumbeTxt").val();var b=null;if($("#hdnIsPckgTrain").val()==1){var j=$("#PackageId").val();b=$("#frmPackageDetails"+j).serialize()}else{b=$("#frm_27_Search").serialize()}b=b+"&Name="+l+"&Email="+f+"&ContactNumber="+k+"&IDNumber="+a+"&pckgDate="+d;var c=$("#PassSubTypeDecription").val();b=b+"&ParentID="+c;h.invoke("/Product/SearchConcession","POST",b,function(m){$("#DivPassConcessionList").html(m);$("#DivPassConcessionList").slideDown(500)});return false}function SelectConcession(b){var c=$(b).val();var a=$(b).val().split(",");var d=$("#hdnPckgRoomNum").val();if($("#hdnPckgRoomNum").val()=="undefined"||$("#hdnPckgRoomNum").val()==null||$("#hdnPckgRoomNum").val()=="null"){d=0}$("#hdnPckgRoomNum").val();var e=$("#SelectedLookUpID").val();if(d==0){$("#txtCardNum_"+e).val(a[0]);$("#txtFirstName_"+e).val(a[1]);$("#txtLastName_"+e).val(a[2]);$("#txtConcessionCode_"+e).val(a[3]);$("#hdnConcessionType_"+e).val(a[4])}else{$("#txtCardNum_"+e+"_"+d).val(a[0]);$("#txtFirstName_"+e+"_"+d).val(a[1]);$("#txtLastName_"+e+"_"+d).val(a[2]);$("#txtConcessionCode_"+e+"_"+d).val(a[3]);$("#hdnConcessionType_"+e+"_"+d).val(a[4])}}function ConcessionApply_OnClick(f,b){var e="";if(b=="undefined"||b==null||b==""){b=0}var d="";if(b!=0){d="_"+b}var a=$("#hdnConcessionType_"+f+d).val();$("#lblAddrecordmsg").html("");if($.trim($("#txtCardNum_"+f+d).val())==""&&(a=="Concession"||a=="EmployeeDiscount"||a=="StudentWarrant"||a=="TravelPass"||a=="Entitlement")){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_CardNumberRequired+"</span>"}else{if($.trim($("#txtFirstName_"+f+d).val())==""){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_FirstNameRequired+"</span>"}else{if($.trim($("#txtLastName_"+f+d).val())==""){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_LastNameRequired+"</span>"}else{if($.trim($("#txtConcessionCode_"+f+d).val())==""){e='<span class="rzcspltxt rezpaddrig">'+Resources.Search_QRConcessionMsg+"</span>"}}}}if(e!=""){$("#concessionValidationMsg_"+f+d).html(e);return false}else{$("#hdnApplyClick_"+f+d).val(f);$("#concessionValidationMsg_"+f+d).html("");var h=new serviceProxy();var g=null;if($("#hdnIsPckgTrain").val()==1){var c=$("#PackageId").val();g=$("#frmPackageDetails"+c).serialize()}else{g=$("#frm_27_Search").serialize()}var j=g+" &RoomIndex="+b+"&CardHolderLastName="+$("#txtLastName_"+f+d).val()+"&CardHolderFirstName="+$("#txtFirstName_"+f+d).val()+"&CardNumber="+$("#txtCardNum_"+f+d).val()+"&ConcessionCode="+$("#txtConcessionCode_"+f+d).val();j+="&ParentPassengerTypeID="+$("#TypeDropDownList_"+f+d).val()+"&PassengerTypeID="+$("#SubTypeDropDownList_"+f+d).val();h.invoke("/Product/ValidateConcession/","POST",j,function(k){if(k=="true"){e='<span class="rzcspltxt rezpaddrig rzcc7">'+Resources.Search_ConcessionApplied+"</span>";$("#concessionValidationMsg_"+f+d).html(e)}else{$("#txtFirstName_"+f+d).val("");$("#txtLastName_"+f+d).val("");$("#txtCardNum_"+f+d).val("");$("#txtConcessionCode_"+f+d).val("");$("#concessionValidationMsg_"+f+d).html(k)}});return false}}function ConcessionCodeReset_Click(b,a){$("#txtCardNum_"+b+"_"+a).val("");$("#txtFirstName_"+b+"_"+a).val("");$("#txtLastName_"+b+"_"+a).val("");$("#txtConcessionCode_"+b+"_"+a).val("");$("#concessionValidationMsg_"+b+"_"+a).html("")}function CancelConcession(){var a=$("#SelectedLookUpID").val();$("#txtCardNum_"+a).val("");$("#txtFirstName_"+a).val("");$("#txtLastName_"+a).val("");$("#txtConcessionCode_"+a).val("")}function ValidateSearch(){var a=SearchProductsPaxValidation();if(a){if(SearchLocationValidation()){StoreProductSearchFormValues();return true}}return false}function On_SelectStartLocation(a){$("#StartLocationHidden").val(a.location.GeoNameID);$("#GeoNameTypeHidden").val(a.location.GeoNameType);$("#CountryCodeHidden").val(a.location.CountryCode)}function OnClick_cruiseTripOption(a){var b=$(a).val();$("#hdncruiseid").val(b);ShowHidecruiseTripOption(b)}function ShowHidecruiseTripOption(d){if(d=="0"){$("#cruisesearchid, #cruiselinesid").attr("checked",false);$("#cruisedestinationid").attr("checked","checked");$("#cruisesearchid, #cruiselinesid").removeClass("btn-warning").addClass("btn-default");$("#cruisedestinationid").removeClass("btn-default").addClass("btn-warning");$(".linehide").css("display","block");$(".destinationshide, .lineshide").css("display","none");var a=$("#frmcruisesearch").validate();validatorCruise.resetForm()}else{if(d=="2"){$("#cruisesearchid, #cruisedestinationid").attr("checked",false);$("#cruiselinesid").attr("checked","checked");$("#cruisesearchid, #cruisedestinationid").removeClass("btn-warning").addClass("btn-default");$("#cruiselinesid").removeClass("btn-default").addClass("btn-warning");$(".destinationshide, .linehide").css("display","none");$(".lineshide").css("display","block");var b=$("#frmcruisesearch").validate();b.resetForm()}else{$("#cruiselinesid, #cruisedestinationid").attr("checked",false);$("#cruisesearchid").attr("checked","checked");$("#cruisesearchid").removeClass("btn-default").addClass("btn-warning");$("#cruisedestinationid, #cruiselinesid").removeClass("btn-warning").addClass("btn-default");$(".cruisesearchhide, .destinationshide, .linehide").css("display","block");$(".lineshide").css("display","none");var c=$("#frmcruisesearch").validate();c.resetForm()}}}function Countychange(a){if(a.value==""){$(".Citymonthhide").css("display","none")}else{$(".Citymonthhide").css("display","block");locationCitydropdown()}}function clearactivitydivvalue(){$(".OTAActivityrez-ac-wrapper").empty().hide()}function renderLocationControlActivity(c,b){clearactivitydivvalue();flightString="<li class='rez-ac-group'><i class='fa fa-fighter-jet'></i> Flights</li>";flightCount=0;flightModel=new Array();POIString="<li class='rez-ac-group'><i class='fa fa-poi'></i> Point Of Interest</li>";POICount=0;POIModel=new Array();cityString="<li class='rez-ac-group'><i class='fa fa-map-marker'></i> City</li>";cityCount=0;cityModel=new Array();if(c!=null&&c!=undefined&&c.length==1&&c[0].SearchType=="City"){mapping(c,0,c[0].SearchType,b)}var a=(flightCount>0?flightString:"")+(cityCount>0?cityString:"")+(POICount>0?POIString:"");if(a!=""){$(".OTAActivityrez-ac-wrapper").append("<ul>"+a+"</ul>");$(".OTAActivityrez-ac-wrapper").show();$("#hdnactivitynullsearch").val("1")}else{$("#hdnactivitynullsearch").val("0")}}function selecthotelvalues(){if($(".OTAHotelrez-ac-wrapper li.over").length>0){$("#HotelDestinationTextBox").val($(".OTAHotelrez-ac-wrapper li.over").text());$("#DestinationIdHidden").val($(".OTAHotelrez-ac-wrapper li.over").attr("deeplink")+$(".OTAHotelrez-ac-wrapper li.over").attr("id"))}clearhoteldivvalue()}function selectrentalvalues(){if($(".OTARentalOriginrez-ac-wrapper li.over").length>0){$("#OriginTextBoxHotel").val($(".OTARentalOriginrez-ac-wrapper li.over").text());$("#DropOffTextBoxHotel").val($(".OTARentalOriginrez-ac-wrapper li.over").text());$("#OriginHdn").val($(".OTARentalOriginrez-ac-wrapper li.over").attr("id"));if($(".OTARentalOriginrez-ac-wrapper li.over").attr("deeplink")=="air_"){$("#hdnrentalpickup").val("airport");$("#hdnrentaldropoff").val("airport")}else{if($(".OTARentalOriginrez-ac-wrapper li.over").attr("deeplink")=="com_"){$("#hdnrentalpickup").val("city");$("#hdnrentaldropoff").val("city")}}}if($(".OTARentalDropOffrez-ac-wrapper li.over").length>0){$("#DropOffTextBoxHotel").val($(".OTARentalDropOffrez-ac-wrapper li.over").text());$("#DestinationHdn").val($(".OTARentalDropOffrez-ac-wrapper li.over").attr("id"));if($(".OTARentalDropOffrez-ac-wrapper li.over").attr("deeplink")=="air_"){$("#hdnrentaldropoff").val("airport")}else{if($(".OTARentalDropOffrez-ac-wrapper li.over").attr("deeplink")=="com_"){$("#hdnrentaldropoff").val("city")}}}clearrentaldivvalues()}function selectactivityvalues(){if($(".OTAActivityrez-ac-wrapper li.over").length>0){$("#StartactivityTextBox").val($(".OTAActivityrez-ac-wrapper li.over").text());$("#hdnCountrycode").val($(".OTAActivityrez-ac-wrapper li.over").attr("countrycode"));$("#hdndid").val($(".OTAActivityrez-ac-wrapper li.over").attr("id"))}clearactivitydivvalue()}function selectflightvalues(){var a=$(".OTArez-ac-wrapper");a=a.prev();a=a.attr("id");if($(".OTArez-ac-wrapper li.over").length>0){mapid(a)}$(".OTArez-ac-wrapper").html("");$(".OTArez-ac-wrapper").hide()}function mapid(a){$("#"+a).val($(".OTArez-ac-wrapper li.over").text());hdnfieldvalueFlights(a,$(".OTArez-ac-wrapper li.over").attr("id"))}function delay(d,a){function b(){return d.apply(c,arguments)}var c=this;return setTimeout(b,a||0)}function autoCompleteForKeyEvents(n,k,m,l,e,b){var f=$("."+k+" ul");var h=f.find(".over");var a=h.outerHeight();var c=f.scrollTop();var d=f.length>0?f[0].scrollHeight:"";switch(n.which){case 35:case 36:case 16:case 17:case 18:case 37:case 39:break;case 46:$("."+k).empty();break;case 27:$("."+k).empty();break;case 13:if(m=="air"){selectflightvalues();n.preventDefault()}break;case 40:navigateDownOTA(k);var g=c+a;var j=d-a;if(g<=j){f.scrollTop(c+a)}else{f.scrollTop(30)}n.preventDefault();break;case 38:if(c!=30){f.scrollTop(c-a)}else{f.scrollTop(d+a)}navigateUpOTA(k);n.preventDefault();break;default:if(m=="air"){locationAutocompleteFlight(l,b)}else{if(m=="hotel"){locationAutocompleteHotel("HotelDestinationTextBox",b)}else{if(m=="activity"){locationAutocomplete("StartactivityTextBox")}else{if(m=="rental"){locationAutocompleteRental(l,e,b)}}}}}}function GetSuccess(d,c,a,b,e){$.ajax({type:d,dataType:c,url:a,data:b,success:e,})}function locationAutocomplete(a){var b=$("#"+a).val();clearTimeout(searchingActivity);searchingActivity=delay(function(){if(b.length>=3){GetSuccess("GET","jsonp",OTAroviaServiceAPI,{type:"activity",query:$("#"+a).val()},getSuccessLocationAutocomplete)}else{clearhoteldivvalue()}},200)}function getSuccessLocationAutocomplete(a,b){clearactivitydivvalue();renderLocationControlActivity(a,$("#StartactivityTextBox").val())}function navigateUpOTA(a){if($("."+a+" li.nav:first").hasClass("over")){}else{if($("."+a+" li.over").index()>=0){highlightOTA($("."+a+" li.over").index()-1,-1,a)}else{highlightOTA($("."+a+" li.over").index(),-1,a)}}}function navigateDownOTA(a){if($("."+a+" li:last-child").hasClass("over")){}else{if($("."+a+" li.over").index()>=0){highlightOTA($("."+a+" li.over").index(),1,a)}else{highlightOTA(0,1,a)}}}function highlightOTA(c,a,b){if((c+1)>$("."+b+" li").length){c=0}if($("."+b+" li:eq("+c+")").length>0&&$("."+b+" li:eq("+c+")").attr("class")=="nav"){$("."+b+" li").removeClass("over");$("."+b+" li:eq("+c+")").addClass("over")}else{highlightOTA(c+a,a,b)}}function DeepLink(d){var f=OTABOTService,a;var b=$("#hdnauthonticationtoken").val();switch(d){case"activity":a=new ConstructUrlParamsActivity(d);break;case"cruise":f=hdnOTACruiseUrl;a=ConstructUrlParamsRevelexCruises(d);break;case"hideaways":a=new ConstructUrlParamsHideouts(d);break;case"hotel":a=new ConstructUrlParamsHotel(d);break;case"car":a=new ConstructUrlParamsRental(d);break;case"flight":a=new ConstructUrlParamsFlight(d);break}var c="";if(d=="cruise"){c=a}else{c=$.param(a)}c=c.replace(/[^=&]+=(&|$)/g,"").replace(/&$/,"");if($("#OTAAppmode").length){c+="&appmode=true"}var e=window.location.href.indexOf("/trips");if(c===""&&d=="cruise"){}else{if($("#hdnIsUserLoggedin").val()=="true"){if(e!=-1){window.open(f+c)}else{window.location.href=f+c}}else{$.cookie("sessionlogin",f+c);if($("#hdnAppMode").val()=="True"){LoginPopupShow(false)}else{LoginPopupShowNew(false)}}}}function ConstructUrlParamsActivity(b){var a="";if($("#hdndid").val()==""){a=$("#StartactivityTextBox").val()}return getparams={tp:"landing",source:"DreamTrips",product:b,did:$("#hdndid").val(),destination:a,startdate:$("#StartDateTextBox_Activity").val(),enddate:$("#EndDateTextBox_Activity").val(),cc:$("#hdnCountrycodeOTA").val(),pt:$("#hdnauthonticationtoken").val(),culture:$("#hdnOTACulture").val(),}}function ConstructUrlParamsCruises(b){var a=$("#destinationcruise option:Selected").val();var c=$("#selectcruiseid option:Selected").val();return getparams={triptype:b,DestinationID:a,VendorID:c,PIN:$("#hdnmemberid").val(),culture:$("#hdnOTACulture").val(),}}function ConstructUrlParamsRevelexCruises(b){var a=GenerateLink();return a}function GenerateLink(){var c="",a="",f="",g="",e="",b="",l="",j="";if($("input[type='radio'][name=cruiseTravelPeriod]:checked").val()=="cruiseDateRange"){if($("#StartDateTextBoxCruise").val()!=null&&$("#StartDateTextBoxCruise").val()!=""){a="&start_date="+$("#StartDateTextBoxCruise").val()}if($("#EndDateTextBoxCruise").val()!=null&&$("#EndDateTextBoxCruise").val()!=""){a=a+"&end_date="+$("#EndDateTextBoxCruise").val()}if(a==""){alert("Please select date");return false}}else{var h=$("#cruiseTravelPeriodTextBox").data("value");var d=h.split("-");var k=new Date(d[1],parseInt(d[0]),1);var m=new Date(d[1],parseInt(d[0])+1,0);a="&start_date="+FormatDate(k);a=a+"&end_date="+FormatDate(m)}if($("#FromLengthCruise").val()!=null&&$("#FromLengthCruise").val()!=""&&parseInt($("#FromLengthCruise").val())>0){l="&duration_min="+$("#FromLengthCruise").val()}if($("#ToLengthCruise").val()!=null&&$("#ToLengthCruise").val()!=""&&parseInt($("#ToLengthCruise").val())>0){l=l+"&duration_max="+$("#ToLengthCruise").val()}if(parseInt($("#FromLengthCruise").val())>parseInt($("#ToLengthCruise").val())){alert("From nights cannot be greater than To nights");return""}var n=$("#destinationId option:selected");if(n.length!=$("#destinationId option").length){n.each(function(){var o=$(this).val();if(o!=null&&o!=""){b=b+"&destination_ids[]="+o}})}c="&clear=instance"+a+b+l;if(c.length>2000){c=c.substr(0,2000)}return c}function FormatDate(a){var b=a.getDate();var d=a.getMonth();var c=a.getFullYear();return(d<=9?"0"+d:d)+"/"+(b<=9?"0"+b:b)+"/"+c}function ConstructUrlParamsHideouts(a){return getparams={tp:"landing",source:"DreamTrips",product:a,destination:$("#Citylisthideouts Option:selected").html(),month:$("#Monthlist").val(),year:$("#Monthlist Option:selected").attr("name"),countrycode:$("#Countrylist Option:selected").attr("name"),cc:$("#hdnCountrycodeOTA").val(),pt:$("#hdnauthonticationtoken").val(),culture:$("#hdnOTACulture").val(),}}function ConstructUrlParamsHotel(d){var e=/\d+/;$.cookie("cachinghotel",hotelorigin);var a="";var c=$(".PaxChildAgeContainer").find(".ChildAgePaxCount").each(function(){a=a+($("#"+this.id).val())+"|"});var b=$("#DestinationIdHidden").val()==""?$("#HotelDestinationTextBox").val():"";return getparams={tp:"landing",source:"DreamTrips",product:d,Did:$("#DestinationIdHidden").val(),destination:b,adultcount:parseInt($("#HoteldrpAdult").val().match(e)),childcount:parseInt($("#HoteldrpChild").val().match(e)),childage:a.slice(0,-1),startdate:$("#StartDateTextBoxHotel").val(),enddate:$("#EndDateTextBoxHotel").val(),cc:$("#hdnCountrycodeOTA").val(),pt:$("#hdnauthonticationtoken").val(),culture:$("#hdnOTACulture").val(),}}function getPromoCode(a){var c="";var b=$(".RentalAgencyContainer").find(".RentalAgency_"+a).each(function(){if($("#"+this.id).val()!="0"){c=c+($("#"+this.id).val())+"|"}});return c}function ConstructUrlParamsRental(b){$.cookie("cachingrentalpickup",renatlorigin);$.cookie("cachingrentaldropoff",renatldestination);var d="";for(var g=1;g<6;g++){if($(".RentalAgency_"+g).is(":visible")){d=d+getPromoCode(g).slice(0,-1)+"^"}}var e=parseInt($("#StartTime").val())<10?"0"+$("#StartTime").val()+"00":$("#StartTime").val()+"00";var h=parseInt($("#EndTime").val())<10?"0"+$("#EndTime").val()+"00":$("#EndTime").val()+"00";var f=$("#hdncruise").val()==1?$("#OriginHdn").val():$("#DestinationHdn").val();var k=$("#hdnrentalpickup").val()!=""?$("#hdnrentalpickup").val():"city";var c=$("#hdnrentaldropoff").val()!=""?$("#hdnrentaldropoff").val():"city";var j=$("#OriginHdn").val()!=""?"":$("#OriginTextBoxHotel").val();var a=f!=""?"":$("#DropOffTextBoxHotel").val();if($("#hdncruise").val()==1){c=k}return getparams={tp:"landing",source:"DreamTrips",product:b,Oid:$("#OriginHdn").val(),origin:j,pickupspot:k,startdate:$("#StartDateTextBoxRental").val(),starttime:e,startradius:$("#StartRadius option:selected").attr("name"),enddate:$("#EndDateTextBoxRental").val(),endtime:h,Did:f,destination:a,dropoffspot:c,endradius:$("#EndRadius option:selected").attr("name"),ac:$("#AirConditionDropDown").val(),cartype:$("#CarTypeDropDown").val(),discountcode:d.slice(0,-1),cc:$("#hdnCountrycodeOTA").val(),pt:$("#hdnauthonticationtoken").val(),culture:$("#hdnOTACulture").val(),}}function OnClick_CarTripOption(a){var b=$(a).val();$("#hdncruise").val(b);ShowHidecarTripOption(b);locationAutocompleteRental("DropOffTextBoxHotel","hdncruise")}function ShowHidecarTripOption(a){if(a=="0"){$(".RentalRow-Hide").css("display","block");$("#cruisesearch, #cruiselines").attr("checked",false);$("#cruisedestination").attr("checked","checked");$("#cruisesearch, #cruiselines").removeClass("btn-warning").addClass("btn-default");$("#cruisedestination").removeClass("btn-default").addClass("btn-warning")}else{if(a=="2"){$(".RentalRow-Hide").css("display","block");$("#cruisesearch, #cruisedestination").attr("checked",false);$("#cruiselines").attr("checked","checked");$("#cruisesearch, #cruisedestination").removeClass("btn-warning").addClass("btn-default");$("#cruiselines").removeClass("btn-default").addClass("btn-warning")}else{$(".RentalRow-Hide").css("display","none");$("#cruiselines, #cruisedestination").attr("checked",false);$("#cruisesearch").attr("checked","checked");$("#cruisesearch").removeClass("btn-default").addClass("btn-warning");$("#cruisedestination, #cruiselines").removeClass("btn-warning").addClass("btn-default");$(".cruisesearchhide").css("display","block");$(".cruisdestinationhide, .cruislineshide").css("display","none")}}}function OnClick_rentalsTripOption(a){var b=$(a).val();$("#hdnrental").val(b);ShowHiderentalTripOption(b);locationAutocompleteRental("OriginTextBoxHotel","hdnrental")}function ShowHiderentalTripOption(a){$("#DestinationHdn").val("");if(a=="1"){$("#Radius").css("display","block");$("#rentalsearch").attr("checked","checked");$("#rentalsearch").removeClass("btn-default").addClass("btn-warning");$("#rentalairport").removeClass("btn-warning").addClass("btn-default");$("#OriginTextBoxHotel").css("display","block");$(".multirentalhide1, .multirentalhide2, .multirentalhide3, .multirentalhide4, .multirentalhide5").css("display","none")}else{$("#Radius, #OriginTextBoxHotel").css("display","block");$("#rentalairport").attr("checked","checked");$("#rentalairport").removeClass("btn-default").addClass("btn-warning");$("#rentalsearch").removeClass("btn-warning").addClass("btn-default")}}function locationAutocompleteHotel(a,b){var c=$("#"+a).val();if($.cookie("cachinghotel")!=undefined&&$.cookie("cachinghotel")!=""&&a=="HotelDestinationTextBox"&&b!=undefined&&b=="true"){c=$.cookie("cachinghotel")}if(c.length>=3){hotelorigin=c}clearTimeout(searchingHotel);searchingHotel=delay(function(){if(c.length>=3){GetSuccess("GET","jsonp",OTAroviaServiceAPI,{type:"city|airport|poi",query:c},getSuccessHotelAutocomplete)}else{clearhoteldivvalue()}},200)}function getSuccessHotelAutocomplete(a){clearactivitydivvalue();renderLocationControlHotel(a,$("#HotelDestinationTextBox").val())}function clearhoteldivvalue(){$(".OTAHotelrez-ac-wrapper").empty()}function renderLocationControlHotel(c,b){clearhoteldivvalue();flightString="<li class='rez-ac-group'><i class='fa fa-fighter-jet'></i> Airport</li>";flightCount=0;flightModel=new Array();cityString="<li class='rez-ac-group'><i class='fa fa-map-marker'></i> City</li>";cityCount=0;cityModel=new Array();POIString="<li class='rez-ac-group'><i class='fa fa-poi'></i> Point Of Interest</li>";POICount=0;POIModel=new Array();if(c.length==3&&c[0].SearchType=="City"){mapping(c,0,c[0].SearchType,b,"Hotel")}if(c.length==3&&c[1].SearchType=="Airport"){mapping(c,1,c[1].SearchType,b,"Hotel")}if(c.length==3&&c[2].SearchType=="POI"){mapping(c,2,c[2].SearchType,b,"Hotel")}var a=(cityCount>0?cityString:"")+(flightCount>0?flightString:"")+(POICount>0?POIString:"");if(a!=""){$(".OTAHotelrez-ac-wrapper").append("<ul>"+a+"</ul>");$(".OTAHotelrez-ac-wrapper").show()}}function locationAutocompleteRental(d,c,a){clearrentaldivvalues();var b=$(d).attr("id");var e=$("#"+b).val();if($.cookie("cachingrentalpickup")!=undefined&&$.cookie("cachingrentalpickup")!=""&&b=="OriginTextBoxHotel"&&a!=undefined&&a=="true"){e=$.cookie("cachingrentalpickup")}else{if($.cookie("cachingrentaldropoff")!=undefined&&$.cookie("cachingrentaldropoff")!=""&&b=="DropOffTextBoxHotel"&&a!=undefined&&a=="true"){e=$.cookie("cachingrentaldropoff")}}if(e.length>=3&&b=="OriginTextBoxHotel"){renatlorigin=e;rentalPlace="OriginTextBoxHotel"}else{if(e.length>=3&&b=="DropOffTextBoxHotel"){renatldestination=e;rentalPlace="DropOffTextBoxHotel"}}clearTimeout(searchingRental);searchingRental=delay(function(){if(e.length>=3){GetSuccess("GET","jsonp",OTAroviaServiceAPI,{type:"car",query:e},getSuccessRentalAutocomplete)}else{clearrentaldivvalues()}},200)}function getSuccessRentalAutocomplete(a){clearactivitydivvalue();renderLocationControlRental(a,rentalPlace,$("#OriginTextBoxHotel").val())}function clearrentaldivvalues(){$(".OTARentalOriginrez-ac-wrapper").empty();$(".OTARentalDropOffrez-ac-wrapper").empty()}function ConstructUrlParamsFlight(p){var s=0;var y="";var n=/\d+/;SetCacheValueforFlights();var x="";if($("#hdnTripType").val()==2){x="multicity"}var o="";var f=$(".PaxChildAgeContainer").find(".ChildAgePaxCount").each(function(){o=o+($("#"+this.id).val())+"|";var r=o.split("|");if($("#"+this.id).val()>=2){y=y+($("#"+this.id).val())+"|"}for(var z=0;z<r.length;z++){r[z]=parseInt(r[z],10)}s=r.filter(function(A){return A<2})});var u=0;u=parseInt($("#FlightNoOfChildsDropDownList1").val().match(n));if(s.length>0){u=u-s.length}var v=$("#leavingid").val()!=""?"":$("#LeavingFromTextBox").val();var w=$("#goingid").val()!=""?"":$("#GoingToTextBox").val();var d=$("#addflightcount").val()=="0"?"":($("#MultiCityleavingId2").val()==""?$("#goingid").val():$("#MultiCityleavingId2").val());var h=d!=""?"":$("#OriginTextBox_2").val();var m=$("#MultiCitygoingId2").val()!=""?"":$("#DestinationTextBox_2").val();var t=$("#addflightcount").val()=="1"?"":$("#MultiCityleavingId3").val()==""?$("#MultiCitygoingId2").val():$("#MultiCityleavingId3").val();var g=t!=""?"":$("#OriginTextBox_3").val();var k=$("#MultiCitygoingId3").val()!=""?"":$("#DestinationTextBox_3").val();var l=$("#addflightcount").val()=="2"?"":$("#MultiCityleavingId4").val()==""?$("#MultiCitygoingId3").val():$("#MultiCityleavingId4").val();var b=l!=""?"":$("#OriginTextBox_4").val();var q=$("#leavingid").val()!=""?"":$("#DestinationTextBox_4").val();var c=$("#addflightcount").val()=="3"?"":$("#MultiCityleavingId5").val()==""?$("#MultiCitygoingId4").val():$("#MultiCityleavingId5").val();var a=c!=""?"":$("#OriginTextBox_5").val();var e=$("#leavingid").val()!=""?"":$("#DestinationTextBox_5").val();var j=s.length;return getparams={tp:"landing",source:"DreamTrips",product:p,adultcount:parseInt($("#NoOfAdultsDropDownList").val().match(n)),infantcount:j,childcount:u,childage:y.slice(0,-1),noStops:$("#NonStops:checked").val()?true:false,airlines:$("#AirlinesPreference").val(),Class:$("#preferences option:selected").attr("name"),turbosearch:$("#turboSearch:checked").val()?true:false,includeNearbyAirports:$("#includenearbyairport:checked").val()?true:false,triptype:x,startdate:$("#StartDateTextBoxFlight").val(),starttime:$("#StartTimeTextBox").val()==0?"":$("#StartTimeTextBox").val(),enddate:$("#hdnTripType").val()==0?"":$("#EndDateTextBoxFlight").val(),endtime:$("#hdnTripType").val()==0?"":$("#EndTimeTextBox").val(),Oid:$("#leavingid").val(),Did:$("#goingid").val(),origin:v,destination:w,startdate2:$("#CheckinDateTextBox_2").val(),starttime2:$("#departuretime2").val()==0?"":$("#departuretime2").val(),Oid2:$("#addflightcount").val()=="0"?"":($("#MultiCityleavingId2").val()==""?$("#goingid").val():$("#MultiCityleavingId2").val()),Did2:$("#MultiCitygoingId2").val(),origin2:h,destination2:m,startdate3:$("#CheckinDateTextBox_3").val(),starttime3:$("#departuretime3").val()==0?"":$("#departuretime3").val(),Oid3:$("#addflightcount").val()=="1"?"":$("#MultiCityleavingId3").val()==""?$("#MultiCitygoingId2").val():$("#MultiCityleavingId3").val(),Did3:$("#MultiCitygoingId3").val(),origin3:g,destination3:k,startdate4:$("#CheckinDateTextBox_4").val(),starttime4:$("#departuretime4").val()==0?"":$("#departuretime4").val(),Oid4:$("#addflightcount").val()=="2"?"":$("#MultiCityleavingId4").val()==""?$("#MultiCitygoingId3").val():$("#MultiCityleavingId4").val(),Did4:$("#MultiCitygoingId4").val(),origin4:b,destination4:q,startdate5:$("#CheckinDateTextBox_5").val(),starttime5:$("#departuretime5").val()==0?"":$("#departuretime5").val(),Oid5:$("#addflightcount").val()=="3"?"":$("#MultiCityleavingId5").val()==""?$("#MultiCitygoingId4").val():$("#MultiCityleavingId5").val(),Did5:$("#MultiCitygoingId5").val(),origin5:a,destination5:e,cc:$("#hdnCountrycodeOTA").val(),pt:$("#hdnauthonticationtoken").val(),culture:$("#hdnOTACulture").val(),}}function SetCacheValueforFlights(){$.cookie("caching_LeavingFromTextBox",flight1);$.cookie("caching_GoingToTextBox",flight2);$.cookie("caching_OriginTextBox_2",flight3);$.cookie("caching_DestinationTextBox_2",flight4);$.cookie("caching_OriginTextBox_3",flight5);$.cookie("caching_DestinationTextBox_3",flight6);$.cookie("caching_OriginTextBox_4",flight7);$.cookie("caching_DestinationTextBox_4",flight8)}function locationAutocompleteFlight(b,c){$(".OTArez-ac-wrapper").empty();$(".OTArez-ac-wrapper").remove();var a=$(b).attr("id");flightSelected=a;value=$("#"+a).val();flightSelectedValue=$("#"+a).val();value=setcacheforFlight(value,c,a);clearTimeout(searchingFlight);searchingFlight=delay(function(){if(value.length>=3){GetSuccess("GET","jsonp",OTAroviaServiceAPI,{type:"airport",query:value},getSuccessFlightAutocomplete)}else{$(".OTArez-ac-wrapper").empty();$(".OTArez-ac-wrapper").remove()}},200)}function getSuccessFlightAutocomplete(a){$(".OTArez-ac-wrapper").empty();$(".OTArez-ac-wrapper").remove();$("#"+flightSelected).after("<div class='OTArez-ac-wrapper ota_autosuggestion'></div>");renderLocationControlFlight(a,flightSelectedValue)}function setcacheforFlight(c,b,a){if($.cookie("caching_LeavingFromTextBox")!=undefined&&$.cookie("caching_LeavingFromTextBox")!=""&&a=="LeavingFromTextBox"&&b!=undefined&&b=="true"){c=$.cookie("caching_LeavingFromTextBox")}if(c.length>=3&&a=="LeavingFromTextBox"){flight1=c}if($.cookie("caching_GoingToTextBox")!=undefined&&$.cookie("caching_GoingToTextBox")!=""&&a=="GoingToTextBox"&&b!=undefined&&b=="true"){c=$.cookie("caching_GoingToTextBox")}if(c.length>=3&&a=="GoingToTextBox"){flight2=c;flightSelected="GoingToTextBox"}if($.cookie("caching_OriginTextBox_2")!=undefined&&$.cookie("caching_OriginTextBox_2")!=""&&a=="OriginTextBox_2"&&b!=undefined&&b=="true"){c=$.cookie("caching_OriginTextBox_2")}if(c.length>=3&&a=="caching_OriginTextBox_2"){flight3=c}if($.cookie("caching_DestinationTextBox_2")!=undefined&&$.cookie("caching_DestinationTextBox_2")!=""&&a=="DestinationTextBox_2"&&b!=undefined&&b=="true"){c=$.cookie("caching_DestinationTextBox_2")}if(c.length>=3&&a=="DestinationTextBox_2"){flight4=c}if($.cookie("caching_OriginTextBox_3")!=undefined&&$.cookie("caching_OriginTextBox_3")!=""&&a=="OriginTextBox_3"&&b!=undefined&&b=="true"){c=$.cookie("caching_OriginTextBox_3")}if(c.length>=3&&a=="OriginTextBox_3"){flight5=c}if($.cookie("caching_DestinationTextBox_3")!=undefined&&$.cookie("caching_DestinationTextBox_3")!=""&&a=="DestinationTextBox_3"&&b!=undefined&&b=="true"){c=$.cookie("caching_DestinationTextBox_3")}if(c.length>=3&&a=="DestinationTextBox_3"){flight6=c}if($.cookie("caching_OriginTextBox_4")!=undefined&&$.cookie("caching_OriginTextBox_4")!=""&&a=="OriginTextBox_4"&&b!=undefined&&b=="true"){c=$.cookie("caching_OriginTextBox_4")}if(c.length>=3&&a=="OriginTextBox_4"){flight7=c}if($.cookie("caching_DestinationTextBox_4")!=undefined&&$.cookie("caching_DestinationTextBox_4")!=""&&a=="DestinationTextBox_4"&&b!=undefined&&b=="true"){c=$.cookie("caching_DestinationTextBox_4")}if(c.length>=3&&a=="DestinationTextBox_4"){flight8=c}return c}function mapping(e,a,b,d,c){subcount=0;$.map(e[a].ItemList,function(f){var g=f.CulturedText;if(c=="IsFlight"){g=f.CityName+" ("+f.Code+")"}var h=new RegExp("("+d+")","gi");var j=g.replace(h,"<strong>$1</strong>");if(c!=undefined&&c=="Hotel"){searcount=6}else{searcount=100}switch(b){case"Airport":if(flightCount<e[a].ItemList.length&&flightCount<searcount){flightString+="<li class='nav' id="+f.Id+" deeplink = air_>"+j+"</li>";flightCount++}if(f.SubItemList!=null&&f.SubItemList.length>0){mappingSubItemList(b,f.SubItemList,d,c)}break;case"City":if(cityCount<e[a].ItemList.length&&cityCount<searcount){cityString+="<li class='nav' id="+f.Id+" countrycode="+f.CountryCode+" deeplink = com_>"+j+"</li>";cityCount++}if(f.SubItemList!=null&&f.SubItemList.length>0){mappingSubItemList(b,f.SubItemList,d,c)}break;case"POI":if(POICount<e[a].ItemList.length&&POICount<searcount){POIString+="<li class='nav' id="+f.Id+" deeplink = com_><i class='fa fa-auto-right'></i>"+j+"</li>";POICount++}if(f.SubItemList!=null&&f.SubItemList.length>0){mappingSubItemList(b,f.SubItemList,d,c)}break}})}function mappingSubItemList(c,a,d,b){if(b!=undefined&&b=="Hotel"&&c=="Airport"){subcount+=flightCount;sublistcount=6}else{if(b!=undefined&&b=="Hotel"&&c=="City"){subcount+=cityCount;sublistcount=6}else{if(b!=undefined&&b=="Hotel"&&c=="POI"){subcount+=POICount;sublistcount=6}}}$.map(a,function(e){var f=e.CulturedText;var g=new RegExp("("+d+")","gi");var h=f.replace(g,"<strong>$1</strong>");switch(c){case"Airport":if(subcount<sublistcount){flightString+="<li class='nav' id="+e.Id+" deeplink = air_><i class='fa fa-auto-right'></i> "+h+"</li>"}if(a.SubItemList!=null&&a.SubItemList.length>0){mappingSubItemList(c,a.SubItemList,b);subcount++}break;case"City":if(subcount<sublistcount){cityString+="<li class='nav' id="+e.Id+" countrycode="+e.CountryCode+" deeplink = com_><i class='fa fa-auto-right'></i>"+h+"</li>"}if(a.SubItemList!=null&&a.SubItemList.length>0){mappingSubItemList(c,a.SubItemList,b);subcount++}break;case"POI":if(subcount<sublistcount){POIString+="<li class='nav' id="+e.Id+" deeplink = com_><i class='fa fa-auto-right'></i>"+h+"</li>"}if(a.SubItemList!=null&&a.SubItemLists.length>0){mappingSubItemList(c,a.SubItemList,b);subcount++}break}})}function renderLocationControlFlight(c,b){flightString="<li class='rez-ac-group'><i class='fa fa-fighter-jet'></i> Airport</li>";flightCount=0;flightModel=new Array();POIString="<li class='rez-ac-group'><i class='fa fa-poi'></i> Point Of Interest</li>";POICount=0;POIModel=new Array();cityString="<li class='rez-ac-group'><i class='fa fa-map-marker'></i> City</li>";cityCount=0;cityModel=new Array();if(c.length==1&&c[0].SearchType=="Airport"){mapping(c,0,c[0].SearchType,b,"IsFlight")}var a=(flightCount>0?flightString:"")+(cityCount>0?cityString:"")+(POICount>0?POIString:"");if(a!=""){$(".OTArez-ac-wrapper").append("<ul>"+a+"</ul>");$(".OTArez-ac-wrapper").show()}}function hdnfieldvalueFlights(a,b){if(a=="LeavingFromTextBox"){$("#leavingid").val(b)}if(a=="GoingToTextBox"){$("#goingid").val(b)}if(a=="OriginTextBox_2"){$("#MultiCityleavingId2").val(b)}if(a=="DestinationTextBox_2"){$("#MultiCitygoingId2").val(b)}if(a=="OriginTextBox_3"){$("#MultiCityleavingId3").val(b)}if(a=="DestinationTextBox_3"){$("#MultiCitygoingId3").val(b)}if(a=="OriginTextBox_4"){$("#MultiCityleavingId4").val(b)}if(a=="DestinationTextBox_4"){$("#MultiCitygoingId4").val(b)}if(a=="OriginTextBox_5"){$("#MultiCityleavingId5").val(b)}if(a=="DestinationTextBox_5"){$("#MultiCitygoingId5").val(b)}}function selectbycitymonthChange(){$("#Monthlist").empty();hideoutsCitydropdown();$("#Monthlist").append("<option value='' selected=''>"+Resources.Search_Months+"</option>");if(typeof $("#Countrylist Option:selected").attr("name")!="undefined"){$(".Cityhide").attr("style","display: block")}else{$(".Cityhide").hide()}$(".Monthhide").attr("style","display: none");swipediv("Cityhide","Monthhide")}function hideoutsCountrydropdown(){if($.trim($("#Countrylist").html())==""){var a=$("#Countrylist");URL=OTAhideoutsservice+"rest/GetCountriesOfAvailableHideaway";$("#Countrylist").empty();var b=new serviceProxy({show:false});b.invoke(URL.toString(),"GET",null,function(c){for(i=0;i<c.HideawaysCountries.length;i++){a.append($("<option name="+c.HideawaysCountries[i].CountryCode+"></option>").val(i).html(c.HideawaysCountries[i].CountryName))}var d=$("#Countrylist option");d.sort(function(f,e){if(f.text.toUpperCase()>e.text.toUpperCase()){return 1}else{if(f.text.toUpperCase()<e.text.toUpperCase()){return -1}else{return 0}}});$("#Countrylist").empty();$("#Countrylist").append($("<option value='' selected='selected'>"+Resources.Search_ByCountry+"</option>"));$("#Countrylist").append(d);$("#Countrylist").val("")},null,"json",false)}return false}function hideoutsCitydropdown(){$("#Citylisthideouts").empty();var a=$("#Countrylist Option:selected").attr("name");var c=$("#Citylisthideouts");URL=OTAhideoutsservice+"rest/GetHideawaysCitiesByCountryCode?countryCode="+a;var b=new serviceProxy({show:false});c.append("<option value='' selected=''>"+Resources.Search_ChooseCity+"</option>");b.invoke(URL.toString(),"GET",null,function(d){for(i=0;i<d.HideawaysCities.length;i++){c.append($("<option name="+d.HideawaysCities[i].CountryCode+" statecode="+d.HideawaysCities[i].StateCode+"></option>").val(d.HideawaysCities[i].CityName).html(d.HideawaysCities[i].CityName))}},null,"json",false)}function hideoutsMonthdropdown(){var b=$("#Countrylist Option:selected").attr("name");var a=$("#Monthlist");URL=OTAhideoutsservice+"rest/GetAvailableHideawaysMonthsByCountryCode?countryCode="+b;a.append("<option value='' selected=''>"+Resources.Search_Months+"</option>");var c=new serviceProxy({show:false});c.invoke(URL.toString(),"GET",null,function(d){for(i=0;i<d.HideawaysAvailableMonths.length;i++){a.append($("<option name="+d.HideawaysAvailableMonths[i].Year+"></option>").val(d.HideawaysAvailableMonths[i].MonthNumber).html(d.HideawaysAvailableMonths[i].FullName+d.HideawaysAvailableMonths[i].Year))}},null,"json",false)}function loadmonthbasedoncity(){$("#Monthlist").empty();$(".Monthhide").attr("style","display: block");var c=$("#Citylisthideouts Option:selected").html();var b=$("#Citylisthideouts Option:selected").attr("statecode");if(b==undefined){b=""}var d=$("#Countrylist Option:selected").attr("name");var a=$("#Monthlist");URL=OTAhideoutsservice+"rest/GetAvailableHideawaysMonthsByCity?cityName="+c+"&statecode="+b+"&countryCode="+d;a.append("<option value='' selected=''>"+Resources.Search_Months+"</option>");var e=new serviceProxy({show:false});e.invoke(URL.toString(),"GET",null,function(f){var g=f.HideawaysAvailableMonths;g.sort(function(j,h){return(j.Year-h.Year)||(j.MonthNumber-h.MonthNumber)});for(i=0;i<g.length;i++){a.append($("<option name="+g[i].Year+"></option>").val(g[i].MonthNumber).html(g[i].FullName+" "+g[i].Year))}},null,"json",false)}function swipediv(b,a){$("."+b).each(function(){$(this).insertBefore($(this).prev("."+a))})}function NoOfChildsDropDownListFlight_onChange(a){var c=$(a).attr("Id").replace("FlightNoOfChildsDropDownList","");var b=parseInt($(a).val());AddChildAgeFlight(c,b)}function AddChildAgeFlight(a,d){var b=0;var c=$("#tdChildAgeFlight"+a).find(".ChildAgeDropDownList").length;if(d==0){$("#tdChildAgeFlight"+a+" #divChildAgeContainerFlight").remove()}if(d>c){for(i=1;i<=d-c;i++){var e=$("#HiddenContent #divChildAgeContainerFlight").clone();$(e).find("SELECT").each(function(){var f=$(this).attr("id");$(this).attr("id","ChildAgeDropDownList"+a+"_"+(c+i));$(this).removeAttr("name");$(this).attr("NAME","ChildAgeDropDownList"+a+"_"+(c+i))});$(e).appendTo($("#tdChildAgeFlight"+a))}}else{$("#tdChildAgeFlight"+a).find(".ChildAgeDropDownList").each(function(){b++;if(b>d){$(this).closest(".form-group").remove()}})}}function renderLocationControlRental(d,c,b){clearrentaldivvalues();flightString="<li class='rez-ac-group'><i class='fa fa-fighter-jet'></i> Airport</li>";flightCount=0;flightModel=new Array();POIString="<li class='rez-ac-group'><i class='fa fa-poi'></i> Point Of Interest</li>";POICount=0;POIModel=new Array();cityString="<li class='rez-ac-group'><i class='fa fa-map-marker'></i> City</li>";cityCount=0;cityModel=new Array();if(d.length==2&&(d[0].SearchType=="City"||d[0].SearchType=="Airport")){mapping(d,0,d[0].SearchType,b)}if(d.length==2&&(d[1].SearchType=="City"||d[1].SearchType=="Airport")){mapping(d,1,d[1].SearchType,b)}var a=(flightCount>0?flightString:"")+(cityCount>0?cityString:"")+(POICount>0?POIString:"");if(a!=""&&c=="OriginTextBoxHotel"){$(".OTARentalOriginrez-ac-wrapper").append("<ul>"+a+"</ul>");$(".OTARentalOriginrez-ac-wrapper").show()}else{if(a!=""&&c=="DropOffTextBoxHotel"){$(".OTARentalDropOffrez-ac-wrapper").append("<ul>"+a+"</ul>");$(".OTARentalDropOffrez-ac-wrapper").show()}}}function resetFormCheck(){var a=0;$("#frmflightsearch :input").each(function(){if($(this).is(":visible")){if(($(this).prop("tagName").toLowerCase()=="button")||$(this).hasClass("dummy-control")||($(this).attr("type")=="submit")){}else{if($(this).prop("tagName").toLowerCase()=="select"){if($(this)[0].selectedIndex!=0){a++}}else{if($(this).attr("type")=="checkbox"){if($(this).attr("id")=="turboSearch"&&!$(this).is(":checked")){a++}else{if($(this).is(":checked")&&$(this).attr("id")!="turboSearch"){a++}}}else{if($(this).val()){a++}}}}}});if(a){$("#frmflightsearch .btnreset").removeClass("disabled")}else{$("#frmflightsearch .btnreset").addClass("disabled")}}function CruiseDateRangeChange(){if($("input[type='radio'][name=cruiseTravelPeriod]:checked").val()=="cruiseDateRange"){$("#cruiseDateRangeGroup").attr("style","display: block");$("#cruiseMonthGroup").attr("style","display: none")}else{$("#cruiseMonthGroup").attr("style","display: block");$("#cruiseDateRangeGroup").attr("style","display: none")}}function SetDataValue(a){$("#cruiseTravelPeriodTextBox").attr("data-value",$(a).attr("data-value"))}
/* jQuery Validation Plugin - v1.11.1 - 3/22/2013\n* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jörn Zaefferer; Licensed MIT */
var requiredtxt="Required";if(typeof Resources!="undefined"&&typeof Resources.Common_Required!="undefined"){requiredtxt=Resources.Common_Required}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){return b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0}var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.validateDelegate(":submit","click",function(d){c.settings.submitHandler&&(c.submitButton=d.target),a(d.target).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(d.target).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.submit(function(d){function f(){var e;return c.settings.submitHandler?(c.submitButton&&(e=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),c.settings.submitHandler.call(c,c.currentForm,d),c.submitButton&&e.remove(),!1):!0}return c.settings.debug&&d.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,f()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):f():(c.focusInvalid(),!1)})),c)},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}var b=!0,c=a(this[0].form).validate();return this.each(function(){b=b&&c.element(this)}),b},removeAttrs:function(c){var d={},b=this;return a.each(c.split(/\s/),function(g,f){d[f]=b.attr(f),b.removeAttr(f)}),d},rules:function(f,h){var c=this[0];if(f){var b=a.data(c.form,"validator").settings,j=b.rules,d=a.validator.staticRules(c);switch(f){case"add":a.extend(d,a.validator.normalizeRule(h)),delete d.messages,j[c.name]=d,h.messages&&(b.messages[c.name]=a.extend(b.messages[c.name],h.messages));break;case"remove":if(!h){return delete j[c.name],d}var g={};return a.each(h.split(/\s/),function(n,l){g[l]=d[l],delete d[l]}),g}}var k=a.validator.normalizeRules(a.extend({},a.validator.classRules(c),a.validator.attributeRules(c),a.validator.dataRules(c),a.validator.staticRules(c)),c);if(k.required){var m=k.required;delete k.required,k=a.extend({required:m},k)}return k}}),a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+a(b).val())},filled:function(b){return !!a.trim(""+a(b).val())},unchecked:function(b){return !a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var d=a.makeArray(arguments);return d.unshift(b),a.validator.format.apply(this,d)}:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(e,d){b=b.replace(RegExp("\\{"+e+"\\}","g"),function(){return d})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(b){this.lastActive=b,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(b)).hide())},onfocusout:function(b){this.checkable(b)||!(b.name in this.submitted)&&this.optional(b)||this.element(b)},onkeyup:function(c,b){(9!==b.which||""!==this.elementValue(c))&&(c.name in this.submitted||c===this.lastElement)&&this.element(c)},onclick:function(b){b.name in this.submitted?this.element(b):b.parentNode.name in this.submitted&&this.element(b.parentNode)},highlight:function(c,d,b){"radio"===c.type?this.findByName(c.name).addClass(d).removeClass(b):a(c).addClass(d).removeClass(b)},unhighlight:function(c,d,b){"radio"===c.type?this.findByName(c.name).removeClass(d).addClass(b):a(c).removeClass(d).addClass(b)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:requiredtxt,remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function c(g){var h=a.data(this[0].form,"validator"),f="on"+g.type.replace(/^validate/,"");h.settings[f]&&h.settings[f].call(h,this[0],g)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var d=this.groups={};a.each(this.settings.groups,function(f,g){"string"==typeof g&&(g=g.split(/\s/)),a.each(g,function(e,h){d[h]=f})});var b=this.settings.rules;a.each(b,function(f,g){b[f]=a.validator.normalizeRule(g)}),a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var c=0,b=this.currentElements=this.elements();b[c];c++){this.check(b[c])}return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b)),this.lastElement=b,this.prepareElement(b),this.currentElements=a(b);var c=this.check(b)!==!1;return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b){this.errorList.push({message:b[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var b=0;for(var c in d){b++}return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(c){return c.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return !this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:(c[this.name]=!0,!0)})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset(),this.toHide=this.errorsFor(b)},elementValue:function(c){var d=a(c).attr("type"),b=a(c).val();return"radio"===d||"checkbox"===d?a("input[name='"+a(c).attr("name")+"']:checked").val():"string"==typeof b?b.replace(/\r/g,""):b},check:function(f){f=this.validationTargetFor(this.clean(f));var h,c=a(f).rules(),b=!1,j=this.elementValue(f);for(var d in c){var g={method:d,parameters:c[d]};try{if(h=a.validator.methods[d].call(this,j,f,g.parameters),"dependency-mismatch"===h){b=!0;continue}if(b=!1,"pending"===h){return this.toHide=this.toHide.not(this.errorsFor(f)),void 0}if(!h){return this.formatAndAdd(f,g),!1}}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+f.id+", check the '"+g.method+"' method.",k),k}}return b?void 0:(this.objectLength(c)&&this.successList.push(f),!0)},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||b.attributes&&a(b).attr("data-msg-"+c.toLowerCase())},customMessage:function(d,b){var c=this.settings.messages[d];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var b=0;arguments.length>b;b++){if(void 0!==arguments[b]){return arguments[b]}}return void 0},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,d){var b=this.defaultMessage(c,d.method),f=/\$?\{(\d+)\}/g;"function"==typeof b?b=b.call(this,d.parameters,c):f.test(b)&&(b=a.validator.format(b.replace(f,"{$1}"),d.parameters)),this.errorList.push({message:b,element:c}),this.errorMap[c.name]=b,this.submitted[c.name]=b},addWrapper:function(b){return this.settings.wrapper&&(b=b.add(b.parent(this.settings.wrapper))),b},defaultShowErrors:function(){var d,b;for(d=0;this.errorList[d];d++){var c=this.errorList[d];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success){for(d=0;this.successList[d];d++){this.showLabel(this.successList[d])}}if(this.settings.unhighlight){for(d=0,b=this.validElements();b[d];d++){this.settings.unhighlight.call(this,b[d],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);b.length?(b.removeClass(this.settings.validClass).addClass(this.settings.errorClass),b.html(d)):(b=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(d||""),this.settings.wrapper&&(b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(b).length||(this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c))),!d&&this.settings.success&&(b.text(""),"string"==typeof this.settings.success?b.addClass(this.settings.success):this.settings.success(b,c)),this.toShow=this.toShow.add(b)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name).not(this.settings.ignore)[0]),b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c)){return this.findByName(c.name).filter(":checked").length}}return b.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):!0},dependTypes:{"boolean":function(b){return b},string:function(b,c){return !!a(b,c.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,0>this.pendingRequest&&(this.pendingRequest=0),delete this.pending[b.name],c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={},b=a(c).attr("class");return b&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(d,a.validator.classRuleSettings[this])}),d},attributeRules:function(f){var g={},c=a(f),b=c[0].getAttribute("type");for(var h in a.validator.methods){var d;"required"===h?(d=c.get(0).getAttribute(h),""===d&&(d=!0),d=!!d):d=c.attr(h),/min|max/.test(h)&&(null===b||/number|range|text/.test(b))&&(d=Number(d)),d?g[h]=d:b===h&&"range"!==b&&(g[h]=!0)}return g.maxlength&&/-1|2147483647|524288/.test(g.maxlength)&&delete g.maxlength,g},dataRules:function(c){var d,b,g={},f=a(c);for(d in a.validator.methods){b=f.data("rule-"+d.toLowerCase()),void 0!==b&&(g[d]=b)}return g},staticRules:function(c){var d={},b=a.data(c.form,"validator");return b.settings.rules&&(d=a.validator.normalizeRule(b.settings.rules[c.name])||{}),d},normalizeRules:function(b,c){return a.each(b,function(d,f){if(f===!1){return delete b[d],void 0}if(f.param||f.depends){var e=!0;switch(typeof f.depends){case"string":e=!!a(f.depends,c.form).length;break;case"function":e=f.depends.call(c,c)}e?b[d]=void 0!==f.param?f.param:!0:delete b[d]}}),a.each(b,function(e,d){b[e]=a.isFunction(d)?d(c):d}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var d;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(d=b[this].split(/[\s,]+/),b[this]=[Number(d[0]),Number(d[1])]))}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(c,d,b){a.validator.methods[c]=d,a.validator.messages[c]=void 0!==b?b:a.validator.messages[c],3>d.length&&a.validator.addClassRules(c,a.validator.normalizeRule(c))},methods:{required:function(c,d,b){if(!this.depend(b,d)){return"dependency-mismatch"}if("select"===d.nodeName.toLowerCase()){var f=a(d).val();return f&&f.length>0}return this.checkable(d)?this.getLength(c,d)>0:a.trim(c).length>0},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(""+new Date(c))},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,g){if(this.optional(g)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(f)){return !1}var h=0,c=0,b=!1;f=f.replace(/\D/g,"");for(var j=f.length-1;j>=0;j--){var d=f.charAt(j);c=parseInt(d,10),b&&(c*=2)>9&&(c-=9),h+=c,b=!b}return 0===h%10},minlength:function(c,d,b){var f=a.isArray(c)?c.length:this.getLength(a.trim(c),d);return this.optional(d)||f>=b},maxlength:function(c,d,b){var f=a.isArray(c)?c.length:this.getLength(a.trim(c),d);return this.optional(d)||b>=f},rangelength:function(c,d,b){var f=a.isArray(c)?c.length:this.getLength(a.trim(c),d);return this.optional(d)||f>=b[0]&&b[1]>=f},min:function(d,b,c){return this.optional(b)||d>=c},max:function(d,b,c){return this.optional(b)||c>=d},range:function(d,b,c){return this.optional(b)||d>=c[0]&&c[1]>=d},equalTo:function(c,d,b){var f=a(b);return this.settings.onfocusout&&f.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(d).valid()}),c===f.val()},remote:function(f,g,c){if(this.optional(g)){return"dependency-mismatch"}var b=this.previousValue(g);if(this.settings.messages[g.name]||(this.settings.messages[g.name]={}),b.originalMessage=this.settings.messages[g.name].remote,this.settings.messages[g.name].remote=b.message,c="string"==typeof c&&{url:c}||c,b.old===f){return b.valid}b.old=f;var h=this;this.startRequest(g);var d={};return d[g.name]=f,a.ajax(a.extend(!0,{url:c,mode:"abort",port:"validate"+g.name,dataType:"json",data:d,success:function(e){h.settings.messages[g.name].remote=b.originalMessage;var k=e===!0||"true"===e;if(k){var n=h.formSubmitted;h.prepareElement(g),h.formSubmitted=n,h.successList.push(g),delete h.invalid[g.name],h.showErrors()}else{var m={},j=e||h.defaultMessage(g,"remote");m[g.name]=b.message=a.isFunction(j)?j(f):j,h.invalid[g.name]=!0,h.showErrors(m)}b.valid=k,h.stopRequest(g,k)}},c)),"pending"}}}),a.format=a.validator.format})(jQuery),function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,d){var g=f.port;"abort"===f.mode&&(a[g]&&a[g].abort(),a[g]=d)})}else{var b=c.ajax;c.ajax=function(d){var f=("mode" in d?d:c.ajaxSettings).mode,e=("port" in d?d:c.ajaxSettings).port;return"abort"===f?(a[e]&&a[e].abort(),a[e]=b.apply(this,arguments),a[e]):b.apply(this,arguments)}}}(jQuery),function(a){a.extend(a.fn,{validateDelegate:function(c,d,b){return this.bind(d,function(e){var f=a(e.target);return f.is(c)?b.apply(f,arguments):void 0})}})}(jQuery);
/*
 * jquery.sumoselect - v3.0.2
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2014-04-08
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */
(function(a){a.fn.SumoSelect=function(d){var b=a.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:100,forceCustomRendering:false,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:false,csvSepChar:",",okCancelInMulti:false,triggerChangeCombined:true,selectAll:false,search:false,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:false},d);var c=this.each(function(){var e=this;if(this.sumo||!a(this).is("select")){return}this.sumo={E:a(e),is_multi:a(e).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:false,is_opened:false,mob:false,Pstate:[],createElems:function(){var f=this;f.E.wrap('<div class="SumoSelect" tabindex="0">');f.select=f.E.parent();f.caption=a("<span>");f.CaptionCont=a('<p class="CaptionCont"><label><i></i></label></p>').addClass("SelectBox").attr("style",f.E.attr("style")).prepend(f.caption);f.select.append(f.CaptionCont);if(!f.is_multi){b.okCancelInMulti=false}if(f.E.attr("disabled")){f.select.addClass("disabled").removeAttr("tabindex")}if(b.outputAsCSV&&f.is_multi&&f.E.attr("name")){f.select.append(a('<input class="HEMANT123" type="hidden" />').attr("name",f.E.attr("name")).val(f.getSelStr()));f.E.removeAttr("name")}if(f.isMobile()&&!b.forceCustomRendering){f.setNativeMobile();return}if(f.E.attr("name")){f.select.addClass("sumo_"+f.E.attr("name"))}f.E.addClass("SumoUnder").attr("tabindex","-1");f.optDiv=a('<div class="optWrapper '+(b.up?"up":"")+'">');f.floatingList();f.ul=a('<ul class="options">');f.optDiv.append(f.ul);if(b.selectAll){f.SelAll()}if(b.search){f.Search()}f.ul.append(f.prepItems(f.E.children()));if(f.is_multi){f.multiSelelect()}f.select.append(f.optDiv);f.basicEvents();f.selAllState()},prepItems:function(h,f){var j=[],g=this;a(h).each(function(k,l){l=a(l);j.push(l.is("optgroup")?a('<li class="group '+(l[0].disabled?"disabled":"")+'"><label>'+l.attr("label")+"</label><ul></ul><li>").find("ul").append(g.prepItems(l.children(),l[0].disabled)).end():g.createLi(l,f))});return j},createLi:function(h,f){var g=this;if(!h.attr("value")){h.attr("value",h.val())}li=a('<li class="opt"><label>'+h.text()+"</label></li>");li.data("opt",h);h.data("li",li);if(g.is_multi){li.prepend("<span><i></i></span>")}if(h[0].disabled||f){li=li.addClass("disabled")}g.onOptClick(li);if(h[0].selected){li.addClass("selected")}if(h.attr("class")){li.addClass(h.attr("class"))}return li},getSelStr:function(){sopt=[];this.E.find("option:selected").each(function(){sopt.push(a(this).val())});return sopt.join(b.csvSepChar)},multiSelelect:function(){var f=this;f.optDiv.addClass("multiple");f.okbtn=a('<p class="btnOk">'+b.locale[0]+"</p>").click(function(){if(b.triggerChangeCombined){changed=false;if(f.E.find("option:selected").length!=f.Pstate.length){changed=true}else{f.E.find("option").each(function(g,h){if(h.selected&&f.Pstate.indexOf(g)<0){changed=true}})}if(changed){f.callChange();f.setText()}}f.hideOpts()});f.cancelBtn=a('<p class="btnCancel">'+b.locale[1]+"</p>").click(function(){f._cnbtn();f.hideOpts()});f.optDiv.append(a('<div class="MultiControls">').append(f.okbtn).append(f.cancelBtn))},_cnbtn:function(){var f=this;f.E.find("option:selected").each(function(){this.selected=false});f.optDiv.find("li.selected").removeClass("selected");for(var g=0;g<f.Pstate.length;g++){f.E.find("option")[f.Pstate[g]].selected=true;f.ul.find("li.opt").eq(f.Pstate[g]).addClass("selected")}f.selAllState()},SelAll:function(){var f=this;if(!f.is_multi){return}f.selAll=a('<p class="select-all"><span><i></i></span><label>'+b.locale[2]+"</label></p>");f.selAll.on("click",function(){f.selAll.toggleClass("selected");f.optDiv.find("li.opt").not(".hidden").each(function(h,g){g=a(g);if(f.selAll.hasClass("selected")){if(!g.hasClass("selected")){if(f.is_multi){g.toggleClass("selected");g.data("opt")[0].selected=g.hasClass("selected")}else{g.trigger("click")}}}else{if(g.hasClass("selected")){if(f.is_multi){g.toggleClass("selected");g.data("opt")[0].selected=g.hasClass("selected")}else{g.trigger("click")}}}});f.setText()});f.optDiv.prepend(f.selAll)},Search:function(){var g=this,f=g.CaptionCont.addClass("search"),h=a('<p class="no-match">');g.ftxt=a('<input type="text" class="search-txt" value="" placeholder="'+b.searchText+'">').on("click",function(j){j.stopPropagation()});f.append(g.ftxt);g.optDiv.children("ul").after(h);g.ftxt.on("keyup.sumo",function(){var j=g.optDiv.find("ul.options li.opt").each(function(l,k){k=a(k);if(k.text().toLowerCase().indexOf(g.ftxt.val().toLowerCase())>-1){k.removeClass("hidden")}else{k.addClass("hidden")}}).not(".hidden");h.html(b.noMatch.replace(/\{0\}/g,g.ftxt.val())).toggle(!j.length);g.selAllState()})},selAllState:function(){var f=this;if(b.selectAll){var h=0,g=0;f.optDiv.find("li.opt").not(".hidden").each(function(k,j){if(a(j).hasClass("selected")){h++}if(!a(j).hasClass("disabled")){g++}});if(f.is_multi){if(h==g){f.selAll.removeClass("partial").addClass("selected")}else{if(h==0){f.selAll.removeClass("selected")}else{f.selAll.removeClass("selected")}}}else{if(h==g){f.selAll.removeClass("partial").addClass("selected")}else{if(h==0){f.selAll.removeClass("selected partial")}else{f.selAll.addClass("partial")}}}}},showOpts:function(){var f=this;if(f.E.attr("disabled")){return}f.is_opened=true;f.select.addClass("open");if(f.ftxt){f.ftxt.focus()}else{f.select.focus()}a(document).on("click.sumo",function(g){if(!f.select.is(g.target)&&f.select.has(g.target).length===0){if(!f.is_opened){return}f.hideOpts();if(b.okCancelInMulti){f._cnbtn()}}});if(f.is_floating){H=f.optDiv.children("ul").outerHeight()+2;if(f.is_multi){H=H+parseInt(f.optDiv.css("padding-bottom"))}f.optDiv.css("height",H);a("body").addClass("sumoStopScroll")}f.setPstate()},setPstate:function(){var f=this;if(f.is_multi&&(f.is_floating||b.okCancelInMulti)){f.Pstate=[];f.E.find("option").each(function(g,h){if(h.selected){f.Pstate.push(g)}})}},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var f=this;if(f.is_opened){f.is_opened=false;f.select.removeClass("open").find("ul li.sel").removeClass("sel");a(document).off("click.sumo");f.select.focus();a("body").removeClass("sumoStopScroll");if(b.search){f.ftxt.val("");f.optDiv.find("ul.options li").removeClass("hidden");f.optDiv.find(".no-match").toggle(false)}}},setOnOpen:function(){var f=this,g=f.optDiv.find("li.opt:not(.hidden)").eq(b.search?0:f.E[0].selectedIndex);f.optDiv.find("li.sel").removeClass("sel");g.addClass("sel");f.showOpts()},nav:function(n){var o=this,g,h=o.ul.find("li.opt:not(.disabled, .hidden)"),m=o.ul.find("li.opt.sel:not(.hidden)"),k=h.index(m);if(o.is_opened&&m.length){if(n&&k>0){g=h.eq(k-1)}else{if(!n&&k<h.length-1&&k>-1){g=h.eq(k+1)}else{return}}m.removeClass("sel");m=g.addClass("sel");var j=o.ul,f=j.scrollTop(),l=m.position().top+f;if(l>=f+j.height()-m.outerHeight()){j.scrollTop(l-j.height()+m.outerHeight())}if(l<f){j.scrollTop(l)}}else{o.setOnOpen()}},basicEvents:function(){var f=this;f.CaptionCont.click(function(g){f.E.trigger("click");if(f.is_opened){f.hideOpts()}else{f.showOpts()}g.stopPropagation()});f.select.on("keydown.sumo",function(g){switch(g.which){case 38:f.nav(true);break;case 40:f.nav(false);break;case 32:if(b.search&&f.ftxt.is(g.target)){return}case 13:if(f.is_opened){f.optDiv.find("ul li.sel").trigger("click")}else{f.setOnOpen()}break;case 9:case 27:if(b.okCancelInMulti){f._cnbtn()}f.hideOpts();return;default:return}g.preventDefault()});a(window).on("resize.sumo",function(){f.floatingList()})},onOptClick:function(g){var f=this;g.click(function(){var h=a(this);if(h.hasClass("disabled")){return}txt="";if(f.is_multi){h.toggleClass("selected");h.data("opt")[0].selected=h.hasClass("selected");f.selAllState()}else{h.parent().find("li.selected").removeClass("selected");h.toggleClass("selected");h.data("opt")[0].selected=true}if(!(f.is_multi&&b.triggerChangeCombined&&(f.is_floating||b.okCancelInMulti))){f.setText();f.callChange()}if(!f.is_multi){f.hideOpts()}})},setText:function(){var f=this;f.placeholder="";if(f.is_multi){sels=f.E.find(":selected").not(":disabled");for(i=0;i<sels.length;i++){if(i+1>=b.csvDispCount&&b.csvDispCount){if(sels.length==f.E.find("option").length&&b.captionFormatAllSelected){f.placeholder=b.captionFormatAllSelected.replace(/\{0\}/g,sels.length)+","}else{f.placeholder=b.captionFormat.replace(/\{0\}/g,sels.length)+","}break}else{f.placeholder+=a(sels[i]).text()+", "}}f.placeholder=f.placeholder.replace(/,([^,]*)$/,"$1")}else{f.placeholder=f.E.find(":selected").not(":disabled").text()}is_placeholder=false;if(!f.placeholder){is_placeholder=true;f.placeholder=f.E.attr("placeholder");if(!f.placeholder){f.placeholder=f.E.find("option:disabled:selected").text()}}f.placeholder=f.placeholder?(b.prefix+" "+f.placeholder):b.placeholder;f.caption.html(f.placeholder);f.CaptionCont.attr("title",f.placeholder);csvField=f.select.find("input.HEMANT123");if(csvField.length){csvField.val(f.getSelStr())}if(is_placeholder){f.caption.addClass("placeholder")}else{f.caption.removeClass("placeholder")}return f.placeholder},isMobile:function(){var g=navigator.userAgent||navigator.vendor||window.opera;for(var f=0;f<b.nativeOnDevice.length;f++){if(g.toString().toLowerCase().indexOf(b.nativeOnDevice[f].toLowerCase())>0){return b.nativeOnDevice[f]}}return false},setNativeMobile:function(){var f=this;f.E.addClass("SelectClass");f.mob=true;f.E.change(function(){f.setText()})},floatingList:function(){var f=this;f.is_floating=a(window).width()<=b.floatWidth;if(!f.is_floating){f.optDiv.css("height","")}f.optDiv.toggleClass("okCancelInMulti",b.okCancelInMulti&&!f.is_floating)},vRange:function(f){var g=this;opts=g.E.find("option");if(opts.length<=f||f<0){throw"index out of bounds"}return g},toggSel:function(g,h){var f=this;if(typeof(h)==="number"){f.vRange(h);opt=f.E.find("option")[h]}else{opt=f.E.find('option[value="'+h+'"]')[0]||0}if(!opt||opt.disabled){return}if(opt.selected!=g){opt.selected=g;if(!f.mob){a(opt).data("li").toggleClass("selected",g)}f.callChange();f.setPstate();f.setText();f.selAllState()}},toggDis:function(g,h){var f=this.vRange(h);f.E.find("option")[h].disabled=g;if(g){f.E.find("option")[h].selected=false}if(!f.mob){f.optDiv.find("ul.options li").eq(h).toggleClass("disabled",g).removeClass("selected")}f.setText()},toggSumo:function(g){var f=this;f.enabled=g;f.select.toggleClass("disabled",g);if(g){f.E.attr("disabled","disabled");f.select.removeAttr("tabindex")}else{f.E.removeAttr("disabled");f.select.attr("tabindex","0")}return f},toggSelAll:function(f){var g=this;g.E.find("option").each(function(j,h){if(g.E.find("option")[a(this).index()].disabled){return}g.E.find("option")[a(this).index()].selected=f;if(!g.mob){g.optDiv.find("ul.options li").eq(a(this).index()).toggleClass("selected",f)}g.setText()});if(!g.mob&&g.selAll){g.selAll.removeClass("partial").toggleClass("selected",f)}g.callChange();g.setPstate()},reload:function(){var f=this.unload();return a(f).SumoSelect(b)},unload:function(){var f=this;f.select.before(f.E);f.E.show();if(b.outputAsCSV&&f.is_multi&&f.select.find("input.HEMANT123").length){f.E.attr("name",f.select.find("input.HEMANT123").attr("name"))}f.select.remove();delete e.sumo;return e},add:function(h,j,g){if(typeof h=="undefined"){throw"No value to add"}var f=this;opts=f.E.find("option");if(typeof j=="number"){g=j;j=h}if(typeof j=="undefined"){j=h}opt=a("<option></option>").val(h).html(j);if(opts.length<g){throw"index out of bounds"}if(typeof g=="undefined"||opts.length==g){f.E.append(opt);if(!f.mob){f.ul.append(f.createLi(opt))}}else{opts.eq(g).before(opt);if(!f.mob){f.ul.find("li.opt").eq(g).before(f.createLi(opt))}}return e},remove:function(f){var g=this.vRange(f);g.E.find("option").eq(f).remove();if(!g.mob){g.optDiv.find("ul.options li").eq(f).remove()}g.setText()},selectItem:function(f){this.toggSel(true,f)},unSelectItem:function(f){this.toggSel(false,f)},selectAll:function(){this.toggSelAll(true)},unSelectAll:function(){this.toggSelAll(false)},disableItem:function(f){this.toggDis(true,f)},enableItem:function(f){this.toggDis(false,f)},enabled:true,enable:function(){return this.toggSumo(false)},disable:function(){return this.toggSumo(true)},init:function(){var f=this;f.createElems();f.setText();return f}};e.sumo.init()});return c.length==1?c[0]:c}}(jQuery));